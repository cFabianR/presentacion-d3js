<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <title>D3.js y React, trabajando juntos</title>
  <meta name="description" content="Presentación para la charla 'D3.js y React, trabajando juntos'">
  <meta name="author" content="Javier Calzado">

  <!-- Config -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

  <!-- Temas Reveal y custom -->
  <link rel="stylesheet" href="css/reveal.css">
  <link rel="stylesheet" href="css/theme/fjcalzado.css" id="theme">

  <!-- Tema para sintaxis de código -->
  <link rel="stylesheet" href="lib/css/vs2015.css">

  <!-- Printing and PDF exports -->
  <script>
    const link = document.createElement('link');
    link.rel = 'stylesheet';
    link.type = 'text/css';
    link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
    document.getElementsByTagName('head')[0].appendChild(link);
  </script>

  <!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
</head>

<body>

  <div class="reveal">
    <div class="slides">


      <!-- |GRUPO| Apertura -->
      <section >

        <!-- Slide Estática -->
        <section data-timing="0">
          <div class="flex column center">
            <object type="image/svg+xml" data="media/lemoncode_logo.svg" height="130">Lemoncode Logo</object>
            <div class="flex column">
              <a class="flex row svg-button" style="margin-top:1rem;" target="_blank" href="https://twitter.com/lemoncoders">
                <svg style="margin-right:1rem;" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" height="50">
                  <path d="M23.954 4.569c-.885.389-1.83.654-2.825.775 1.014-.611 1.794-1.574 2.163-2.723-.951.555-2.005.959-3.127 1.184-.896-.959-2.173-1.559-3.591-1.559-2.717 0-4.92 2.203-4.92 4.917 0 .39.045.765.127 1.124C7.691 8.094 4.066 6.13 1.64 3.161c-.427.722-.666 1.561-.666 2.475 0 1.71.87 3.213 2.188 4.096-.807-.026-1.566-.248-2.228-.616v.061c0 2.385 1.693 4.374 3.946 4.827-.413.111-.849.171-1.296.171-.314 0-.615-.03-.916-.086.631 1.953 2.445 3.377 4.604 3.417-1.68 1.319-3.809 2.105-6.102 2.105-.39 0-.779-.023-1.17-.067 2.189 1.394 4.768 2.209 7.557 2.209 9.054 0 13.999-7.496 13.999-13.986 0-.209 0-.42-.015-.63.961-.689 1.8-1.56 2.46-2.548l-.047-.02z"/>
                </svg>
                twitter.com/lemoncoders
              </a>
              <a class="flex row svg-button" style="margin-top:1rem;" target="_blank" href="https://github.com/lemoncode">
                <svg style="margin-right:1rem;" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" height="50">
                  <path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/>
                </svg>
                github.com/lemoncode
              </a>
            </div>
            <h4 style="margin-top:2rem;">Presentación</h4>
            <div class="pulse-glow">
              <a target="_blank" class="bottom" href="https://fjcalzado.surge.sh">fjcalzado.surge.sh</a>
            </div>
          </div>

          <aside class="notes">
            <ul>
              <li>Comenzamos la charla.</li>
              <li>Ante todo bienvenidos, gracias por asistir.</li>
              <li>Me llamo Javier Calzado, soy compañero de Lemoncode.</li>
              <li>Para quien no nos conozca, nos dedicamos fundamentalmente al mundo Front-End y desarrollo web.</li>
              <li>Y en este ratito vamos a hablar de React y D3.js.</li>
              <li>▶</li>
            </ul>
          </aside>
        </section>

        <!-- Slide - Título -->
        <section data-timing="30">
          <object type="image/svg+xml" data="media/osc_logo.svg" height="100">Open South Code Logo</object>
          <h1 class="space-up-down">
            React y D3.js, trabajando juntos
          </h1>
          <object type="image/svg+xml" data="media/react_logo.svg" height="100">React Logo</object>
          <svg class="pulse-size" style="margin: 0 50px"
            height="100" viewbox="0 0 16 16">
            <path d="m417.59 527.35c-.653-.644-1.555-.965-2.707-.965-.319 0-.644.056-.976.167-.332.112-.64.262-.926.452-.285.189-.531.367-.737.533-.206.166-.401.343-.586.529-.185-.187-.381-.363-.586-.529-.206-.166-.451-.344-.737-.533-.285-.189-.594-.34-.926-.452-.332-.112-.657-.167-.976-.167-1.152 0-2.054.322-2.707.965-.653.644-.98 1.536-.98 2.678 0 .348.06.706.181 1.074.121.369.258.683.413.942.154.259.329.513.524.759.195.247.338.416.428.51.09.093.161.161.212.202l4.813 4.687c.093.094.206.14.339.14.134 0 .247-.047.339-.14l4.805-4.672c1.178-1.189 1.766-2.356 1.766-3.504 0-1.142-.327-2.035-.98-2.678" fill="#f11" transform="translate(-403.7-524.37)"/>
          </svg>
          <object type="image/svg+xml" data="media/d3_logo.svg" height="100">D3 Logo</object>

          <aside class="notes">
            <ul>
              <li>Objetivo:
                <ul>
                  <li>Hacer que estas dos grandes librerias se quieran un poquito.</li>
                  <li>Que puedan trabajar juntas sin problemas.</li>
                </ul>
              </li>
              <li>▼</li>
            </ul>
          </aside>
        </section>

        <!-- Slide - Contenido -->
        <section data-timing="60">
          <h2>Contenido</h2>
          <ul>
            <li class="fragment"><a target="_blank" href="https://reactjs.org/">React</a></li>
            <li class="fragment"><a target="_blank" href="https://d3js.org/">D3.js</a></li>
            <li class="fragment">Problemática React + D3.js</li>
            <li class="fragment">Soluciones y ejemplos</li>
          </ul>

          <aside class="notes">
            <ul>
              <li>División en los siguientes puntos:
                <ul>
                  <li>▼ Breve introducción a React. Foco en gestión del DOM.</li>
                  <li>▼ Idem para D3. Nos centramos en características clave: Data Joins.</li>
                  <li>▼ Problema de trabajar juntos.</li>
                  <li>▼ Soluciones, con ejemplos y un poco de código.</li>
                  <li>▶</li>
                </ul>
              </li>
            </ul>
          </aside>
        </section>

      </section>



      <!-- |GRUPO| React -->
      <section>

        <!-- Slide - React Intro -->
        <section data-timing="120">
          <div class="flex row center">
            <object type="image/svg+xml" data="media/react_logo.svg" height="75">React Logo</object>
            <h2 class="header-in-row">React</h2>
          </div>
          <ul>
            <li class="fragment">Construcción de Interfaces de Usuario</li>
            <li class="fragment">Componentes reusables</li>
            <li class="fragment">Declarativo, nos abstrae de modificar el DOM</li>
            <li class="fragment"><i>DOM Virtual</i></li>
          </ul>

          <!-- Notas -->
          <aside class="notes">
            <ul>
              <li>▼ Librería MUY popular que nos permite construir interfaces de usuario.</li>
              <li>▼ Basado en componentes: pequeños elementos funcionales (un botón, un input, etc) que gracias a la composición forman componentes más complejos.</li>
              <li>▼ Declarativo, QUE queremos representar, NO COMO hacerlo.
                <ul>
                  <li>React nos abstrae de modificar el DOM, lo hace por nosotros.</li>
                </ul>
              </li>
              <li>▼ Caracteristica estrella: DOM VIRTUAL.
                <ul>
                  <li>Manejo eficiente del DOM REAL.</li>
                  <li>Tiene otras (paradigma inmutable, one way data binding, etc).</li>
                </ul>
              </li>
              <li>Veamos con más detalle ▼</li>
            </ul>
          </aside>
        </section>

        <!-- Slide - DOM Real vs DOM Virtual -->
        <section data-timing="120">
          <div class="flex row spaced">
            <div>
              <h3>DOM Real</h3>
              <ul>
                <li class="fragment">Navegador</li>
                <li class="fragment">Pesado</li>
                <li class="fragment">Cambios Costosos</li>
              </ul>
            </div>
            <div>
              <h3>DOM Virtual</h3>
              <ul>
                <li class="fragment">En Memoria</li>
                <li class="fragment">Ligero</li>
                <li class="fragment">Cambios Baratos</li>
              </ul>
            </div>
          </div>

          <aside class="notes">
            <ul>
              <li>DOM REAL es una abstracción del markup (HTML), de la página q vemos en navegador.</li>
              <li>DOM VIRTUAL es una abstracción del DOM REAL.</li>
              <li>Abstracción de una abstracción.</li>
              <li>DOM real:
                <ul>
                  <li>▼ Ligado al navegador.</li>
                  <li>▼ Entidad pesada con API grande. Jerarquía árbol, recorrerla es lento.</li>
                  <li>▼ Operaciones caras, costosas. Muchos cambios directos al DOM puede ser ineficiente.</li>
                </ul>
              </li>
              <li>DOM virtual en cambio:
                <ul>
                  <li>▼ Vive en memoria, no está atacheado a ningún sitio.</li>
                  <li>▼ Entidad ligera, DOM real adelgazado, a dieta.</li>
                  <li>▼ Operacione mucho más baratas, casi sin coste en performance.</li>
                </ul>
              </li>
              <li>▼</li>
            </ul>
          </aside>
        </section>

        <!-- Slide - Reconciliación -->
        <section data-timing="180">
          <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
            viewbox="0 0 960 560.5" style="enable-background:new 0 0 960 560.5;" xml:space="preserve">
            <style type="text/css">
              .svg-a-rule2{fill:#FCFCFD;}
              .svg-a-rule3{fill:#4F5565;}
              .svg-a-rule4{fill:#FFFFFF;}
              .svg-a-rule5{fill:#333842;}
              .svg-a-rule6{fill:#00D4EC;}
              .svg-a-rule7{font-family:'Montserrat';}
              .svg-a-rule8{font-size:38px;}
              .svg-a-rule10{fill:none;stroke:#FFFFFF;stroke-width:3;stroke-miterlimit:10;}
              .svg-a-rule11{fill:none;stroke:#FFFFFF;stroke-width:3;stroke-miterlimit:10;stroke-dasharray:11.8286,11.8286;}
              .svg-a-rule12{opacity:0.2!important;}
              .svg-a-rule13{fill:#00D4EC;stroke:#00D4EC;stroke-width:3;stroke-miterlimit:10;}
              .svg-a-rule14{fill:none;stroke:#00D4EC;stroke-width:5;stroke-miterlimit:10;}
              .svg-a-rule15{fill:#FF55F7;stroke:#FF55F7;stroke-width:5;stroke-miterlimit:10;}
              .svg-a-rule16{fill:#FF55F7;stroke:#FF55F7;stroke-width:3;stroke-miterlimit:10;}
              .svg-a-rule17{font-size:32px;}
              .svg-a-rule18{fill:#808080;stroke:#808080;stroke-width:3;stroke-miterlimit:10;}
              .svg-a-rule19{fill:#808080;stroke:#808080;stroke-width:5;stroke-miterlimit:10;}
            </style>
            <g id="UI">
              <g>
                <path class="svg-a-rule2" d="M26.2,233.3V362c0,3.5,2.8,6.3,6.3,6.3h174.7c3.5,0,6.3-2.8,6.3-6.3V233.3H26.2z"/>
                <path class="svg-a-rule3" d="M213.4,211.6c0-3.5-2.8-6.3-6.3-6.3H32.6c-3.5,0-6.3,2.8-6.3,6.3v21.5h187.2L213.4,211.6L213.4,211.6z"/>
                <circle class="svg-a-rule4" cx="44.8" cy="219.3" r="4.6"/>
                <circle class="svg-a-rule4" cx="60" cy="219.3" r="4.6"/>
                <circle class="svg-a-rule4" cx="75.1" cy="219.3" r="4.6"/>
                <path class="svg-a-rule5" d="M181,214.7H97.8c-2.4,0-4.6,2.1-4.6,4.6c0,2.4,2.1,4.6,4.6,4.6h83.4c2.4,0,4.6-2.1,4.6-4.6
                  C185.6,216.8,183.5,214.7,181,214.7z"/>
                <rect x="46.1" y="250.6" class="svg-a-rule6" width="48.3" height="100.1"/>
                <rect x="107.1" y="292.4" class="svg-a-rule6" width="86.6" height="58.4"/>
                <rect x="107.1" y="250.6" class="svg-a-rule6" width="86.6" height="27.3"/>
              </g>
            </g>
            <g id="Reconciliacion" class="fragment" data-fragment-index="2">
              <text transform="matrix(1 0 0 1 437.0545 538.8836)" class="svg-a-rule4 svg-a-rule7 svg-a-rule8">RECONCILIACIÓN</text>
              <g class="fragment" data-fragment-index="6">
                <path class="svg-a-rule4" d="M656.5,481.4l-0.1-17.2c-0.1-7.6-6.3-13.8-13.8-13.9l-19-0.2c-7.6-0.1-13.7,6-13.7,13.6l10.8,0.2
                  c1.1-2.2,3.7-3.5,6.4-3.4l12.1,0.2c3.8,0.1,6.9,3.2,6.9,7l0.1,10.3c0,3.8-3,6.8-6.8,6.8l-12.1-0.1c-2.6,0-5.4-1.5-6.6-3.6
                  l-10.6-0.1c0,7.6,6.2,13.8,13.8,13.9l18.9,0.2C650.4,495.1,656.5,489,656.5,481.4z"/>
                <path class="svg-a-rule4" d="M587.1,480.5c-1.2,2.1-4,3.5-6.6,3.5l-11.3-0.1c-3.9,0-7-3.2-7-7.1l-0.1-10.5c0-3.9,3.1-7,7-6.9l11.3,0.1
                  c2.7,0,5.4,1.4,6.6,3.7l11,0.1c-0.1-7.7-6.4-14.1-14.1-14.2l-18.3-0.2c-7.7-0.1-14,6.1-13.9,13.9l0.1,17.5
                  c0.1,7.7,6.4,14.1,14.1,14.2l18.3,0.2c7.7,0.1,14-6.1,13.9-13.8L587.1,480.5z"/>
                <path class="svg-a-rule4" d="M583.5,472c0,2.6,2.1,4.7,4.7,4.8l31.5,0.1c2.6,0,4.8-2.1,4.8-4.7s-2.1-4.7-4.7-4.7l-31.5-0.1
                  C585.7,467.3,583.5,469.4,583.5,472z"/>
              </g>
              <g>
                <g>
                  <line class="svg-a-rule10" x1="604" y1="439.9" x2="604" y2="433.9"/>
                  <line class="svg-a-rule11" x1="604" y1="422" x2="604" y2="25.8"/>
                  <line class="svg-a-rule10" x1="604" y1="19.9" x2="604" y2="13.9"/>
                </g>
              </g>
            </g>
            <g id="DOMVirtual">
              <g id="DOMVirtualPrevious" class="fragment svg-a-rule12" data-fragment-index="3">
                <circle class="svg-a-rule13" cx="429.3" cy="218.7" r="23.9"/>
                <circle class="svg-a-rule13" cx="364.6" cy="283.4" r="23.9"/>
                <line class="svg-a-rule14" x1="429.3" y1="218.7" x2="494" y2="283.4"/>
                <line class="svg-a-rule14" x1="429.3" y1="218.7" x2="363.7" y2="284.2"/>
                <circle class="svg-a-rule13" cx="299.8" cy="347.3" r="23.9"/>
                <circle class="svg-a-rule13" cx="429.3" cy="347.3" r="23.9"/>
                <line class="svg-a-rule14" x1="364.6" y1="282.6" x2="429.3" y2="347.3"/>
                <line class="svg-a-rule14" x1="364.6" y1="282.6" x2="299" y2="348.2"/>
                <circle class="svg-a-rule13" cx="494" cy="283.4" r="23.9"/>
                <path class="svg-a-rule14" d="M558.7,347.3"/>
                <path class="svg-a-rule14" d="M494,282.6"/>
              </g>
              <g id="DOMVirtualChange" class="fragment" data-fragment-index="1">
                <line class="svg-a-rule14" x1="475.2" y1="283.5" x2="539.9" y2="348.2"/>
                <circle class="svg-a-rule13" cx="539.9" cy="348.2" r="23.9"/>
              </g>
              <g id="DOMVirtualDelta" class="fragment" data-fragment-index="4">
                <line class="svg-a-rule15" x1="475.2" y1="283.5" x2="539.9" y2="348.2"/>
                <circle class="svg-a-rule16" cx="539.9" cy="348.2" r="23.9"/>
              </g>
              <g id="DOMVirtualCurrent">
                <circle class="svg-a-rule13" cx="410.5" cy="219.6" r="23.9"/>
                <circle class="svg-a-rule13" cx="345.8" cy="284.3" r="23.9"/>
                <line class="svg-a-rule14" x1="410.5" y1="219.6" x2="475.2" y2="284.3"/>
                <line class="svg-a-rule14" x1="410.5" y1="219.6" x2="344.9" y2="285.1"/>
                <circle class="svg-a-rule13" cx="281" cy="348.2" r="23.9"/>
                <circle class="svg-a-rule13" cx="410.5" cy="348.2" r="23.9"/>
                <line class="svg-a-rule14" x1="345.8" y1="283.5" x2="410.5" y2="348.2"/>
                <line class="svg-a-rule14" x1="345.8" y1="283.5" x2="280.2" y2="349.1"/>
                <circle class="svg-a-rule13" cx="475.2" cy="284.3" r="23.9"/>
              </g>
              <text id="DOMVirtualText" transform="matrix(1 0 0 1 315.8565 108.3565)" class="svg-a-rule4 svg-a-rule7 svg-a-rule17">DOM Virtual</text>
            </g>
            <g id="DOMReal">
              <g id="DOMRealChange" class="fragment" data-fragment-index="5">
                <line class="svg-a-rule15" x1="855.5" y1="286.3" x2="920.2" y2="351"/>
                <circle class="svg-a-rule16" cx="920.2" cy="351" r="23.9"/>
              </g>
              <g id="DOMRealTree">
                <circle class="svg-a-rule18" cx="790.8" cy="220.8" r="23.9"/>
                <circle class="svg-a-rule18" cx="726.1" cy="285.5" r="23.9"/>
                <line class="svg-a-rule19" x1="790.8" y1="220.8" x2="855.5" y2="285.5"/>
                <line class="svg-a-rule19" x1="790.8" y1="220.8" x2="725.2" y2="286.3"/>
                <circle class="svg-a-rule18" cx="661.3" cy="349.4" r="23.9"/>
                <circle class="svg-a-rule18" cx="790.8" cy="349.4" r="23.9"/>
                <line class="svg-a-rule19" x1="726.1" y1="284.7" x2="790.8" y2="349.4"/>
                <line class="svg-a-rule19" x1="726.1" y1="284.7" x2="660.5" y2="350.3"/>
                <circle class="svg-a-rule18" cx="855.5" cy="285.5" r="23.9"/>
              </g>
              <text id="DOMRealText" transform="matrix(1 0 0 1 706.8565 108.3565)" class="svg-a-rule4 svg-a-rule7 svg-a-rule17">DOM Real</text>
            </g>
          </svg>

          <!-- Notas -->
          <aside class="notes">
            <ul>
              <li>Como funciona? Como consigue ser eficiente?</li>
              <li>Cambios UI a DOM Virtual, no promocionan a DOM Real.</li>
              <li>Aglutinador de cambios | Buffer | Capa intermedia | Borrador.</li>
              <li>DOM virtual es rápido y barato, acepta muchos cambios, no penaliza.</li>
              <li>▼ Ejemplo: renderizar nuevo elemento, nuevo nodo.</li>
              <li>▼ Proceso RECONCILIACIÓN. Algoritmo DIFF compara con versión anterior de DOM Virtual y con DOM Real.</li>
              <li>▼ Se genera la delta con el minimo numero de cambios.</li>
              <li>▼ Se comitea/aplica esta delta en el DOM Real.</li>
              <li>Eficiente. Mínimo número de operaciones.</li>
              <li>▼ Reconciliacion: mecanismo de sincronización.</li>
              <li>En RESUMEN: <b>React gestiona los cambios en el DOM y lo mantiene actualizado por nosotros de forma eficiente</b></li>
              <li>▶</li>
            </ul>
          </aside>
        </section>

      </section>



      <!-- |GRUPO| D3.js -->
      <section>

        <!-- Slide - D3.js Intro -->
        <section data-timing="120">
          <div class="flex row center">
            <object type="image/svg+xml" data="media/d3_logo.svg" height="75">D3.js Logo</object>
            <h2 class="header-in-row">D3.js</h2>
          </div>
          <ul>
            <li class="fragment">Visualización de datos</li>
            <li class="fragment">API de bajo nivel. Potencia. Flexibilidad.</li>
            <li class="fragment">Declarativo, nos abstrae de modificar el DOM</li>
            <li class="fragment"><i>Data Joins</i>, uniones entre datos y elementos</li>
            <li class="fragment">Tiempo real | Animaciones | Interactividad</li>
          </ul>

          <!-- Notas -->
          <aside class="notes">
            <ul>
              <li>▼ Framework/librería para visualización interactiva de datos.
                <ul>
                  <li>Data-Driven-Documents.</li>
                  <li>remendamente popular.</li>
                  <li>Referencia de facto para visualización.</li>
                </ul>
              </li>
              <li>▼ API de bajo nivel le confiere potencia y flexibilidad.</li>
              <ul>
                <li>Es el secreto de su éxito.</li>
                <li>NO galería de graficos pre-hechos / enlatados.</li>
              </ul>
              <li>▼ Declarativo, nos abstrae de cambios en DOM, se encarga por nosotros. ¿Nos suena verdad?</li>
              <li>▼ DATA JOINS: Concepto Clave. Uniones de datos y elementos.
                <ul>
                  <li>Literalmente se vinculan los datos con los elementos que los representan.</li>
                </ul>
              </li>
              <li>Esta vinculación permite:
                <li>Que el gráfico sea reactivo, cambie en tiempo real a medida que lo hacen los datos.</li>
                <li>Animaciones e interactividad.</li>
              </li>
              <li>▼</li>
            </ul>
          </aside>
        </section>

        <!-- Slide - Data Joins -->
        <section data-timing="180">
          <h2><i>Data Joins</i></h2>
          <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
           height="600" viewbox="0 0 960 700" style="enable-background:new 0 0 960 700;" xml:space="preserve">
          <defs>
            <style type="text/css">
              .svg-b-rule2{fill:#20232A;}
              .svg-b-rule3{fill:#4F5565;}
              .svg-b-rule4{fill:#FFFFFF;}
              .svg-b-rule5{fill:#22B573;}
              .svg-b-rule6{fill:#006837;}
              .svg-b-rule7{fill:none;stroke:#006837;stroke-width:8;stroke-miterlimit:10;}
              .svg-b-rule8{fill:none;stroke:#B7B7B7;stroke-width:4;stroke-linecap:round;stroke-miterlimit:10;}
              .svg-b-rule9{fill:#00D4EC;stroke:#007E84;stroke-width:4;stroke-linecap:round;stroke-miterlimit:10;}
              .svg-b-rule10{font-family:'Montserrat';}
              .svg-b-rule11{font-size:38px;}
              .svg-b-rule12{fill:#F7D9B0;}
              .svg-b-rule13{fill:#FBB03B;}
              .svg-b-rule14{fill:none;stroke:#F7931E;stroke-width:5;stroke-miterlimit:10;}
              .svg-b-rule15{fill:#FF55F7;stroke:#913391;stroke-width:4;stroke-linecap:round;stroke-miterlimit:10;}
              .svg-b-rule16{fill:#EA6A73;}
              .svg-b-rule17{fill:#C1272D;}
              .svg-b-rule18{fill:none;stroke:#C1272D;stroke-width:8;stroke-miterlimit:10;}
              .svg-b-rule19{fill:none;stroke:#9BAAC9;stroke-width:4;stroke-linecap:round;stroke-miterlimit:10;stroke-dasharray:12.1659,12.1659;}
            </style>
          </defs>
          <g id="Enter" class="fragment" data-fragment-index="1">
            <g id="Tabla_1">
              <path class="svg-b-rule3" d="M281.7,67.3c0-3.3-2.7-5.9-6-5.9H109.9c-3.3,0-5.9,2.7-5.9,5.9v20.4h177.8L281.7,67.3L281.7,67.3z"/>
              <g>
                <rect x="104.4" y="88.4" class="svg-b-rule4" width="176.9" height="28.3"/>
                <path class="svg-b-rule3" d="M280.8,88.9v27.3H104.9V88.9H280.8 M281.8,87.9H103.9v29.3h177.9V87.9L281.8,87.9z"/>
              </g>
              <g>
                <path class="svg-b-rule4" d="M109.9,171.6c-3,0-5.5-2.5-5.5-5.5v-22.8h176.9v22.8c0,3-2.5,5.5-5.5,5.5H109.9z"/>
                <path class="svg-b-rule3" d="M280.8,143.9v22.3c0,2.8-2.2,5-5,5H109.9c-2.8,0-5-2.2-5-5v-22.3H280.8 M281.8,142.9H103.9v23.3
                  c0,3.3,2.7,6,6,6h165.9c3.3,0,6-2.7,6-6V142.9L281.8,142.9z"/>
              </g>
              <g>
                <rect x="118.6" y="112.6" class="svg-b-rule5" width="173.9" height="34"/>
                <path class="svg-b-rule6" d="M290.5,114.6v30H120.6v-30H290.5 M294.5,110.6H116.6v38h177.9V110.6L294.5,110.6z"/>
              </g>
              <g>
                <g>
                  <line class="svg-b-rule7" x1="89.7" y1="118.5" x2="89.7" y2="142.3"/>
                </g>
                <line class="svg-b-rule7" x1="77.7" y1="130.4" x2="101.7" y2="130.4"/>
              </g>
            </g>
            <g id="Flecha_1">
              <line class="svg-b-rule8" x1="384.7" y1="118.5" x2="632.7" y2="118.5"/>
              <line class="svg-b-rule8" x1="632.7" y1="118.5" x2="614.9" y2="100.7"/>
              <line class="svg-b-rule8" x1="614.9" y1="136.3" x2="632.7" y2="118.5"/>
            </g>
            <circle id="Circulo_1" class="svg-b-rule9" cx="786.3" cy="118.5" r="42.5"/>
          </g>
          <g id="Update" class="fragment" data-fragment-index="2">
            <g id="Tabla_2">
              <path class="svg-b-rule3" d="M281.7,289.8c0-3.3-2.7-5.9-6-5.9H109.9c-3.3,0-5.9,2.7-5.9,5.9v20.4h177.8L281.7,289.8L281.7,289.8z"/>
              <g>
                <rect x="104.4" y="310.9" class="svg-b-rule4" width="176.9" height="28.3"/>
                <path class="svg-b-rule3" d="M280.8,311.4v27.3H104.9v-27.3H280.8 M281.8,310.4H103.9v29.3h177.9V310.4L281.8,310.4z"/>
              </g>
              <g>
                <path class="svg-b-rule4" d="M109.9,394.1c-3,0-5.5-2.5-5.5-5.5v-22.8h176.9v22.8c0,3-2.5,5.5-5.5,5.5H109.9z"/>
                <path class="svg-b-rule3" d="M280.8,366.4v22.3c0,2.8-2.2,5-5,5H109.9c-2.8,0-5-2.2-5-5v-22.3H280.8 M281.8,365.4H103.9v23.3
                  c0,3.3,2.7,6,6,6h165.9c3.3,0,6-2.7,6-6V365.4L281.8,365.4z"/>
              </g>
              <g>
                <rect x="96.5" y="335.1" class="svg-b-rule12" width="190" height="34"/>
                <path class="svg-b-rule13" d="M284.5,337.1v30h-186v-30H284.5 M288.5,333.1h-194v38h194V333.1L288.5,333.1z"/>
              </g>
              <g>
                <line class="svg-b-rule14" x1="110.7" y1="351.9" x2="134.7" y2="351.9"/>
                <line class="svg-b-rule14" x1="114" y1="360.5" x2="131" y2="343.5"/>
                <line class="svg-b-rule14" x1="122.8" y1="364.1" x2="122.8" y2="340.1"/>
                <line class="svg-b-rule14" x1="131.2" y1="360.5" x2="114.3" y2="343.6"/>
              </g>
            </g>
            <g id="Flecha_2">
              <line class="svg-b-rule8" x1="384.7" y1="341" x2="632.7" y2="341"/>
              <line class="svg-b-rule8" x1="632.7" y1="341" x2="614.9" y2="323.2"/>
              <line class="svg-b-rule8" x1="614.9" y1="358.8" x2="632.7" y2="341"/>
            </g>
            <circle id="Circulo_2" class="svg-b-rule15" cx="786.3" cy="341" r="65.8"/>
          </g>
          <g id="Exit" class="fragment" data-fragment-index="3">
            <g id="Tabla_3">
              <path class="svg-b-rule3" d="M281.7,510.8c0-3.3-2.7-5.9-6-5.9H109.9c-3.3,0-5.9,2.7-5.9,5.9v20.4h177.8L281.7,510.8L281.7,510.8z"/>
              <g>
                <rect x="104.4" y="531.9" class="svg-b-rule4" width="176.9" height="28.3"/>
                <path class="svg-b-rule3" d="M280.8,532.4v27.3H104.9v-27.3H280.8 M281.8,531.4H103.9v29.3h177.9V531.4L281.8,531.4z"/>
              </g>
              <g>
                <path class="svg-b-rule4" d="M109.9,615.1c-3,0-5.5-2.5-5.5-5.5v-22.8h176.9v22.8c0,3-2.5,5.5-5.5,5.5H109.9z"/>
                <path class="svg-b-rule3" d="M280.8,587.4v22.3c0,2.8-2.2,5-5,5H109.9c-2.8,0-5-2.2-5-5v-22.3H280.8 M281.8,586.4H103.9v23.3
                  c0,3.3,2.7,6,6,6h165.9c3.3,0,6-2.7,6-6V586.4L281.8,586.4z"/>
              </g>
              <g>
                <rect x="90.6" y="556.1" class="svg-b-rule16" width="173.9" height="34"/>
                <path class="svg-b-rule17" d="M262.5,558.1v30H92.6v-30H262.5 M266.5,554.1H88.6v38h177.9V554.1L266.5,554.1z"/>
              </g>
              <g>
                <line class="svg-b-rule18" x1="279.7" y1="573.9" x2="303.7" y2="573.9"/>
              </g>
            </g>
            <g id="Flecha_3">
              <line class="svg-b-rule8" x1="384.7" y1="562" x2="632.7" y2="562"/>
              <line class="svg-b-rule8" x1="632.7" y1="562" x2="614.9" y2="544.2"/>
              <line class="svg-b-rule8" x1="614.9" y1="579.8" x2="632.7" y2="562"/>
            </g>
            <g id="Circulo_3">
                <ellipse transform="matrix(0.7071 -0.7071 0.7071 0.7071 -167.0898 720.6096)" class="svg-b-rule19" cx="786.3" cy="562" rx="65.8" ry="65.8"/>
            </g>
          </g>
          <g id="Textos" class="fragment" data-fragment-index="4">
            <text transform="matrix(1 0 0 1 458.5232 198.0232)" class="svg-b-rule4 svg-b-rule10 svg-b-rule11">Enter</text>
            <text transform="matrix(1 0 0 1 436.8565 422.6898)" class="svg-b-rule4 svg-b-rule10 svg-b-rule11">Update</text>
            <text transform="matrix(1 0 0 1 465.5233 641.3565)" class="svg-b-rule4 svg-b-rule10 svg-b-rule11">Exit</text>
          </g>
          </svg>

          <!-- Notas -->
          <aside class="notes">
            <ul>
              <li>¿Qué es? Literalmente vínculos entre datos y elementos.</li>
              <li>En jerga D3: datos siempre array | Datum = item del array | Elemento = elemento gráfico que lo representa.</li>
              <li>PROPONGO ejercicio mental para entender los DATA JOINS:
                <ul>
                  <li>Os doy tabla de paises, cada fila pais, con datos como habitantes.</li>
                  <li>Os pido que representeis gráficamente esos datos.</li>
                  <li>Proponeis: circulo por cada pais, tamaño proporcional a habitantes.</li>
                  <li>CADA FILA DE LA TABLA ASOCIADO A UN CÍRCULO</li>
                  <li>Esta asociación es un Data Join y es justo lo que hace D3 por nosotros, almacena ese vínculo.</li>
                </ul>
              </li>
              <li>Gracias a los DataJoins, hacemos el gráfico REACTIVO a los hipotéticos cambios en los datos.</li>
              <li>Si digo que los datos pueden cambiar en tiempo real y os pido un algoritmo para gestionarlo, me diríais:
                <ul>
                  <li>▼ Si dato nuevo para el q no tenemos círculo, lo creamos.</li>
                  <li>▼ Si dato se actualiza, actualizamos círculo asociado.</li>
                  <li>▼ Si dato desaparece, eliminamos círculo <b>huérfano</b> del gráfico.</li>
                  <li><b>Esto es el patrón ENTER-UPDATE-EXIT.</b></li>
                </ul>
              </li>
              <li><b>Esta es la manera de operar con D3. Implementando el patrón ENTER-UPDATE-EXIT.</b></li>
              <li>▼</li>
            </ul>
          </aside>
        </section>

        <!-- Slide - Selecciones -->
        <section data-timing="180">
          <h2>Selecciones</h2>
            <pre><code class="code-area js" data-trim="true" data-noescape="true">
              const paises = [...];
              const circulos = svg.selectAll("circle")
                .data(paises)
                .enter()
                .append("circle")
                  .attr("cx", pais =&gt; xScale(pais.poderAdquisitivo))
                  .attr("cy", pais =&gt; yScale(pais.esperanzaVida))
                  .attr("r", pais =&gt; areaScale(pais.habitantes))
                  .attr("fill", pais =&gt; color(pais.continente));
            </code></pre>

            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="800" height="120"
              class="fragment smallfont" style="margin-top: 2rem;">
              <defs>
                <style>
                  .smallfont {font: 10px sans-serif;}
                  .join,.link,.node rect {fill: none;stroke-width: 1.5px;}
                  .link {stroke: #969696;}
                  .node rect {fill: white;}
                  .node .element rect {fill: #bdbdbd;stroke: none;}
                  .node .datum rect {fill: #d9d9d9;stroke: none;}
                  .node .key rect {fill: #00eccc;stroke: none;}
                  .node .key rect:hover {fill: #ff55f7;}
                  .link .to-key,.join {stroke: #00eccc;}
                  .join {stroke-dasharray: 2, 2;}
                  .link .from-data {stroke: #ff55f7;}
                  .link .from-selection {stroke: #ff55f7;}
                  .enter {fill: #006837;font-weight: bold;pointer-events: none;}
                  .update {fill: black;font-weight: bold;pointer-events: none;}
                  .exit {fill: #C1272D;font-weight: bold;pointer-events: none;}
                </style>
              </defs>
              <g class="left" transform="translate(40,0)">
                <g class="link">
                  <path class="to-array from-selection" d="M51.4677734375,60C75.73388671875,60 75.73388671875,60 100,60"></path>
                  <path class="to-element from-array" d="M137.576171875,60C168.7880859375,60 168.7880859375,12 200,12"></path>
                  <path class="to-element from-array" d="M137.576171875,60C168.7880859375,60 168.7880859375,36 200,36"></path>
                  <path class="to-element from-array" d="M137.576171875,60C168.7880859375,60 168.7880859375,60 200,60"></path>
                  <path class="to-element from-array" d="M137.576171875,60C168.7880859375,60 168.7880859375,84 200,84"></path>
                  <path class="to-element from-array" d="M137.576171875,60C168.7880859375,60 168.7880859375,108 200,108"></path>
                  <path class="to-key from-element" d="M247.576171875,12C273.7880859375,12 273.7880859375,12 300,12"></path>
                  <path class="to-key from-element" d="M247.576171875,36C273.7880859375,36 273.7880859375,36 300,36"></path>
                  <path class="to-key from-element" d="M247.576171875,60C273.7880859375,60 273.7880859375,60 300,60"></path>
                  <path class="to-key from-element" d="M247.576171875,84C273.7880859375,84 273.7880859375,84 300,84"></path>
                  <path class="to-key from-element" d="M247.576171875,108C273.7880859375,108 273.7880859375,108 300,108"></path>
                </g>
                <g class="node">
                  <g class="selection" transform="translate(0,60)">
                    <rect ry="6" rx="6" y="-10" height="20" width="51.4677734375"></rect>
                    <text dy=".35em" x="6">selection</text>
                  </g>
                  <g class="array" transform="translate(100,60)">
                    <rect ry="6" rx="6" y="-10" height="20" width="37.576171875"></rect>
                    <text dy=".35em" x="6">group</text>
                  </g>
                  <g class="element" transform="translate(200,12)">
                    <rect ry="6" rx="6" y="-10" height="20" width="47.576171875"></rect>
                    <text dy=".35em" x="6">element</text>
                  </g>
                  <g class="key" transform="translate(300,12)">
                    <rect ry="6" rx="6" y="-10" height="20" width="32"></rect>
                    <path class="join" d="M32,0C60,0 60,48 88,48"></path>
                    <text class="update" dy=".35em" x="6">SP</text>
                  </g>
                  <g class="element" transform="translate(200,36)">
                    <rect ry="6" rx="6" y="-10" height="20" width="47.576171875"></rect>
                    <text dy=".35em" x="6">element</text>
                  </g>
                  <g class="key" transform="translate(300,36)">
                    <rect ry="6" rx="6" y="-10" height="20" width="32"></rect>
                    <text class="exit" dy=".35em" x="6">UK</text>
                  </g>
                  <g class="element" transform="translate(200,60)">
                    <rect ry="6" rx="6" y="-10" height="20" width="47.576171875"></rect>
                    <text dy=".35em" x="6">element</text>
                  </g>
                  <g class="key" transform="translate(300,60)">
                    <rect ry="6" rx="6" y="-10" height="20" width="32"></rect>
                    <text class="exit" dy=".35em" x="6">BE</text>
                  </g>
                  <g class="element" transform="translate(200,84)">
                    <rect ry="6" rx="6" y="-10" height="20" width="47.576171875"></rect>
                    <text dy=".35em" x="6">element</text>
                  </g>
                  <g class="key" transform="translate(300,84)">
                    <rect ry="6" rx="6" y="-10" height="20" width="32"></rect>
                    <text class="exit" dy=".35em" x="6">NL</text>
                  </g>
                  <g class="element" transform="translate(200,108)">
                    <rect ry="6" rx="6" y="-10" height="20" width="47.576171875"></rect>
                    <text dy=".35em" x="6">element</text>
                  </g>
                  <g class="key" transform="translate(300,108)">
                    <rect ry="6" rx="6" y="-10" height="20" width="32"></rect>
                    <path class="join" d="M32,0C60,0 60,-72 88,-72"></path>
                    <text class="update" dy=".35em" x="6">PT</text>
                  </g>
                </g>
              </g>
              <g class="right" transform="translate(760,0)">
                <g class="link">
                  <path class="to-array from-data" d="M-32,60C-66,60 -66,60 -100,60"></path>
                  <path class="to-datum from-array" d="M-134.783203125,60C-167.3916015625,60 -167.3916015625,12 -200,12"></path>
                  <path class="to-datum from-array" d="M-134.783203125,60C-167.3916015625,60 -167.3916015625,36 -200,36"></path>
                  <path class="to-datum from-array" d="M-134.783203125,60C-167.3916015625,60 -167.3916015625,60 -200,60"></path>
                  <path class="to-datum from-array" d="M-134.783203125,60C-167.3916015625,60 -167.3916015625,84 -200,84"></path>
                  <path class="to-datum from-array" d="M-134.783203125,60C-167.3916015625,60 -167.3916015625,108 -200,108"></path>
                  <path class="to-key from-datum" d="M-232,12C-266,12 -266,12 -300,12"></path>
                  <path class="to-key from-datum" d="M-232,36C-266,36 -266,36 -300,36"></path>
                  <path class="to-key from-datum" d="M-232,60C-266,60 -266,60 -300,60"></path>
                  <path class="to-key from-datum" d="M-232,84C-266,84 -266,84 -300,84"></path>
                  <path class="to-key from-datum" d="M-232,108C-266,108 -266,108 -300,108"></path>
                </g>
                <g class="node">
                  <g class="data" transform="translate(0,60)">
                    <rect ry="6" rx="6" y="-10" height="20" width="32" x="-32"></rect>
                    <text dy=".35em" x="-26">data</text>
                  </g>
                  <g class="array" transform="translate(-100,60)">
                    <rect ry="6" rx="6" y="-10" height="20" width="34.783203125" x="-34.783203125"></rect>
                    <text dy=".35em" x="-28.783203125">array</text>
                  </g>
                  <g class="datum" transform="translate(-200,12)">
                    <rect ry="6" rx="6" y="-10" height="20" width="32" x="-32"></rect>
                    <text dy=".35em" x="-26">DE</text>
                  </g>
                  <g class="key" transform="translate(-300,12)">
                    <rect ry="6" rx="6" y="-10" height="20" width="32" x="-32"></rect>
                    <text class="enter" dy=".35em" x="-26">DE</text>
                  </g>
                  <g class="datum" transform="translate(-200,36)">
                    <rect ry="6" rx="6" y="-10" height="20" width="32" x="-32"></rect>
                    <text dy=".35em" x="-26">PT</text>
                  </g>
                  <g class="key" transform="translate(-300,36)">
                    <rect ry="6" rx="6" y="-10" height="20" width="32" x="-32"></rect>
                    <text class="update" dy=".35em" x="-26">PT</text>
                  </g>
                  <g class="datum" transform="translate(-200,60)">
                    <rect ry="6" rx="6" y="-10" height="20" width="32" x="-32"></rect>
                    <text dy=".35em" x="-26">SP</text>
                  </g>
                  <g class="key" transform="translate(-300,60)">
                    <rect ry="6" rx="6" y="-10" height="20" width="32" x="-32"></rect>
                    <text class="update" dy=".35em" x="-26">SP</text>
                  </g>
                  <g class="datum" transform="translate(-200,84)">
                    <rect ry="6" rx="6" y="-10" height="20" width="32" x="-32"></rect>
                    <text dy=".35em" x="-26">FR</text>
                  </g>
                  <g class="key" transform="translate(-300,84)">
                    <rect ry="6" rx="6" y="-10" height="20" width="32" x="-32"></rect>
                    <text class="enter" dy=".35em" x="-26">FR</text>
                  </g>
                  <g class="datum" transform="translate(-200,108)">
                    <rect ry="6" rx="6" y="-10" height="20" width="32" x="-32"></rect>
                    <text dy=".35em" x="-26">IT</text>
                  </g>
                  <g class="key" transform="translate(-300,108)">
                    <rect ry="6" rx="6" y="-10" height="20" width="32" x="-32"></rect>
                    <text class="enter" dy=".35em" x="-26">IT</text>
                  </g>
                </g>
              </g>
            </svg>

          <!-- Notas -->
          <aside class="notes">
            <ul>
              <li>Data joins y patrón ENTER-UPDATE-EXIT se implementa en código a través de las selecciones</li>
              <li>Paises como array de datos.</li>
              <li>Core de D3 como JQuery, permite hacer selecciones.</li>
              <li>Seleccionamos todos los círculos | EStablecemos data join con método data().</li>
              <li>Macheo entre círculos y datum se hace con el índice del array como clave. Customizable con callback en data().</li>
              <li>Implementamos patrón ENTER. Añadimos un círculo por cada país que todavía no lo tenga.</li>
              <li>Caracterizamos ese círculo en función de los datos del país. Color, tamaño y posición.</li>
              <li>▼ Representación de la selección y la unión de datos en memoria:
                <ul>
                  <li>Izquda: Elementos gráficos (svg).</li>
                  <li>Derecha: Datos, cada item del array.</li>
                  <li>Clave de macheo: nombre del país.</li>
                  <li>Se aprecian las 3 posible situaciones a las que se refiere el patron ENTER-UPDATE-EXIT.</li>
                </ul>
              </li>
              <li>▼</li>
            </ul>
          </aside>
        </section >

        <!-- Slide - Sample -->
        <section data-timing="120">
          <div id="sample-countries" class="flex row center"></div>
          <a style="font-size:1.8rem" target="_blank" href="https://github.com/fjcalzado/DemoSeries-D3JS-Bubble-Chart">Github</a>

          <!-- Notas -->
          <aside class="notes">
            <ul>
              <li>¿Curiosidad?, Ejemplo anterior de paises implementado con D3 de verdad.</li>
              <li>Con que poco se genera un gráfico muy chulo, muy profesonal.</li>
              <li>Solo se ha implementado patrón ENTER -&gt; tabla datos fuente es estática, mockeada, no cambian.</li>
              <li>No obstante si que se han añadido eventos para mostrar un popup animado, etc, para que veáis que D3 permite interacción con los elementos.</li>
              <li>▶</li>
            </ul>
          </aside>
        </section>

      </section>



      <!-- |GRUPO| Pugna por el DOM -->
      <section>

        <!-- Slide - Qué Sucederá -->
        <section data-timing="30">
          <div class="flex row spaced">
            <object type="image/svg+xml" data="media/react_logo.svg" height="100">React Logo</object>
            <svg class="fragment" data-fragment-index="1" width="100" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 252 39.51">
              <defs>
                <style>
                  .flecha{fill:none;stroke:#b7b7b7;stroke-linecap:round;stroke-miterlimit:10;stroke-width:4px;}
                </style>
              </defs>
              <g id="Flecha_4">
                <line class="flecha" x1="2" y1="19.76" x2="250" y2="19.76"/>
                <line class="flecha" x1="250" y1="19.76" x2="232.24" y2="2"/>
                <line class="flecha" x1="232.24" y1="37.51" x2="250" y2="19.76"/>
              </g>
            </svg>
            <h2 style="margin:0;padding:15px;border:2px solid white;border-radius:10px;">DOM</h2>
            <svg class="fragment" data-fragment-index="1" style="transform:rotate(180deg)" width="100" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 252 39.51">
              <defs>
                <style>
                  .flecha{fill:none;stroke:#b7b7b7;stroke-linecap:round;stroke-miterlimit:10;stroke-width:4px;}
                </style>
              </defs>
              <g id="Flecha_5">
                <line class="flecha" x1="2" y1="19.76" x2="250" y2="19.76"/>
                <line class="flecha" x1="250" y1="19.76" x2="232.24" y2="2"/>
                <line class="flecha" x1="232.24" y1="37.51" x2="250" y2="19.76"/>
              </g>
            </svg>
            <object type="image/svg+xml" data="media/d3_logo.svg" height="100">React Logo</object>
          </div>

          <!-- Notas -->
          <aside class="notes">
            <ul>
              <li>Resumen en 1 frase:
                <ul>
                  <li>Tanto React como D3 gestionan eficientemente el DOM por nosotros</li>
                  <li>React via DOM virtual y reconciliación.</li>
                  <li>D3 con mutaciones directas optimizadas siguiendo patrón ENTER-UPDATE-EXIT.</li>
                </ul>
              </li>
              <li>▼ Ambos controlan el DOM real.</li>
              <li>¿Qué sucederá entonces si los ponemos a trabajar juntos?</li>
              <li>▼</li>
            </ul>
          </aside>
        </section>

        <!-- Slide - A tortas -->
        <section data-timing="15" data-background="./media/fight.gif">
          <h2 class="text-shadow">¡A tortas por el DOM!</h2>

          <aside class="notes">
            <ul>
              <li>Vale si, he dramatizado un poco.</li>
              <li>Igual no es tan violento.</li>
              <li>Hagamos una prueba ▼</li>
            </ul>
          </aside>
        </section>

        <!-- Slide - Test de colisión -->
        <section data-timing="120">
          <h2 style="margin-bottom:40px">Test de colisión</h2>
          <div id="sample-collision" class="flex row center"></div>

          <aside class="notes">
            <ul>
              <li>Para demostrarlo: app de react.</li>
              <li>Provocamos colisión intencionadamente.</li>
              <li>2 botones, 1 DIV con color y texto.</li>
              <li>Click REACT, cambia DIV siguiendo flujo REACT.</li>
              <li>Click D3, mutación directa del NODO.</li>
              <li>Click REACT de nuevo, ha perdido sincronización.</li>
              <li><b>La mutación de D3 corrompe el mecanismo de React.</b></li>
              <li>React exige que los cambios vaya siempre por su DOM virtual.</li>
              <li><b>COROLARIO: Nunca hagais que REACT y D3 colisionen, se solapen</b></li>
              <li>▶</li>
            </ul>
          </aside>
        </section>

      </section>



      <!-- Slide - Soluciones -->
      <section data-timing="15">
        <h2>Soluciones</h2>

        <aside class="notes">
          <ul>
            <li>Ya conocemos el problema, veamos las soluciones que tenemos.</li>
            <li>▶</li>
          </ul>
        </aside>
      </section>


      <!-- |GRUPO| 1 DOM compartido pero no solapado -->
      <section>

        <!-- Slide - Titulo Intro -->
        <section data-timing="30">
          <h3>DOM compartido</h3>
          <p>Juntos pero no revueltos</p>

          <aside class="notes">
            <ul>
              <li>Primera solución, DOM compartido</li>
              <li>Comparten DOM real pero sin solaparse.</li>
              <li>Clara frontera entre las dos, juntas pero no revueltas.</li>
              <li>React renderizará la mayor parte, D3 el gráfico.</li>
              <li>▼</li>
            </ul>
          </aside>
        </section>

        <!-- Slide - En que consiste la solución -->
        <section data-timing="120">
          <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
           viewbox="0 0 900 425.8" style="enable-background:new 0 0 900 425.8;" xml:space="preserve">
            <style type="text/css">
              .svg-c-rule0{fill:none;}
              .svg-c-rule1{fill:none;stroke:#20232A;stroke-width:6;}
              .svg-c-rule2{display:none;}
              .svg-c-rule3{display:inline;fill:#20232A;}
              .svg-c-rule4{fill:#00D4EC;fill-opacity:0.2;}
              .svg-c-rule5{opacity:0.2;fill:#F68E48;}
              .svg-c-rule6{fill:#b4b4b4;}
              .svg-c-rule7{font-family:'Montserrat';}
              .svg-c-rule8{font-size:32px;}
              .svg-c-rule9{fill:#F68E48;stroke:#F68E48;stroke-width:3;stroke-miterlimit:10;}
              .svg-c-rule10{font-size:38px;}
              .svg-c-rule11{fill:none;stroke:#AAAAAA;stroke-width:3;stroke-miterlimit:10;stroke-dasharray:11.829,11.8286;}
              .svg-c-rule12{fill:none;stroke:#F68E48;stroke-miterlimit:10;}
              .svg-c-rule13{fill:none;stroke:#F68E48;stroke-width:5;stroke-miterlimit:10;}
              .svg-c-rule14{fill:#7F7F7F;stroke:#7F7F7F;stroke-width:3;stroke-miterlimit:10;}
              .svg-c-rule15{fill:#7F7F7F;stroke:#7F7F7F;stroke-width:5;stroke-miterlimit:10;}
              .svg-c-rule16{fill:#FFFFFF;}
              .svg-c-rule18{fill:white;stroke:#7F7F7F;stroke-width:5;stroke-miterlimit:10;}
              .svg-c-rule19{fill:#00D4EC;stroke:#00D4EC;stroke-width:3;stroke-miterlimit:10;}
              .svg-c-rule20{fill:#00D4EC;stroke:#00D4EC;stroke-width:5;stroke-miterlimit:10;}
              .svg-c-rule23{fill:white;stroke:#00D4EC;stroke-width:5;stroke-miterlimit:10;}
              .svg-c-rule24{fill:#20232A;}
              .svg-c-rule25{font-size:21px;}
            </style>
            <g>
              <polygon class="svg-c-rule4" points="658.5,207.4 658.5,85.4 48.5,85.4 48.5,323 542.9,323 	"/>
              <polygon class="svg-c-rule5" points="658.5,207.4 849.3,208.1 849.3,377.9 542.9,376.9 542.9,323 	"/>
              <text transform="matrix(1 0 0 1 112.8565 63.3566)" class="svg-c-rule6 svg-c-rule7 svg-c-rule8">DOM Virtual</text>
              <circle class="svg-c-rule9" cx="664.1" cy="267.8" r="23.9"/>
              <text transform="matrix(1 0 0 1 460.5232 63.3566)" class="svg-c-rule6 svg-c-rule7 svg-c-rule8">DOM Real</text>
              <text transform="matrix(1 0 0 1 732.8045 267.1165)" class="svg-c-rule16 svg-c-rule7 svg-c-rule10">D3.js</text>
              <g>
                <path class="svg-c-rule16" d="M405.2,180l0-8.6c0-3.8-3.1-6.9-6.9-6.9l-9.5-0.1c-3.8-0.1-6.9,3-6.9,6.8l5.4,0.1c0.5-1.1,1.9-1.8,3.2-1.7
                  l6,0.1c1.9,0.1,3.5,1.6,3.5,3.5l0,5.1c0,1.9-1.5,3.4-3.4,3.4l-6-0.1c-1.3,0-2.7-0.8-3.3-1.8l-5.3-0.1c0,3.8,3.1,6.9,6.9,6.9
                  l9.5,0.1C402.2,186.8,405.2,183.8,405.2,180z"/>
                <path class="svg-c-rule16" d="M370.5,179.5c-0.6,1.1-2,1.8-3.3,1.8l-5.6-0.1c-2,0-3.5-1.6-3.5-3.6l0-5.3c0-1.9,1.5-3.5,3.5-3.4l5.6,0.1
                  c1.4,0,2.7,0.7,3.3,1.9l5.5,0.1c0-3.9-3.2-7.1-7-7.1l-9.1-0.1c-3.9-0.1-7,3.1-7,6.9l0,8.8c0,3.9,3.2,7.1,7,7.1l9.1,0.1
                  c3.9,0.1,7-3.1,7-6.9L370.5,179.5z"/>
                <path class="svg-c-rule16" d="M368.7,175.3c0,1.3,1,2.4,2.4,2.4l15.8,0.1c1.3,0,2.4-1.1,2.4-2.4s-1-2.4-2.4-2.4l-15.8-0.1
                  C369.8,172.9,368.7,174,368.7,175.3z"/>
              </g>
              <path class="svg-c-rule11" d="M621.6-12.8"/>
              <path class="svg-c-rule11" d="M-21.9,232.7"/>
              <path class="svg-c-rule11" d="M668,229.6"/>
              <circle class="svg-c-rule9" cx="599.4" cy="332.5" r="23.9"/>
              <circle class="svg-c-rule9" cx="728.8" cy="332.5" r="23.9"/>
              <text transform="matrix(1 0 0 1 326.5543 148.3836)" class="svg-c-rule16 svg-c-rule7 svg-c-rule10">React</text>
              <path class="svg-c-rule12" d="M652.7,278.9"/>
              <path class="svg-c-rule12" d="M779.5,405.7"/>
              <line class="svg-c-rule13" x1="664.1" y1="267.8" x2="728.8" y2="332.5"/>
              <line class="svg-c-rule13" x1="664.1" y1="267.8" x2="598.5" y2="333.4"/>
              <circle class="svg-c-rule14" cx="534.6" cy="138.5" r="23.9"/>
              <circle class="svg-c-rule14" cx="469.9" cy="203.2" r="23.9"/>
              <line class="svg-c-rule15" x1="534.6" y1="138.5" x2="599.3" y2="203.2"/>
              <line class="svg-c-rule15" x1="534.6" y1="138.5" x2="469" y2="204"/>
              <line class="svg-c-rule13" x1="599.4" y1="203.1" x2="664.1" y2="267.9"/>
              <circle class="svg-c-rule14" cx="405.1" cy="267.1" r="23.9"/>
              <circle class="svg-c-rule14" cx="534.6" cy="267.1" r="23.9"/>
              <line class="svg-c-rule15" x1="469.9" y1="202.4" x2="534.6" y2="267.1"/>
              <line class="svg-c-rule15" x1="469.9" y1="202.4" x2="404.3" y2="268"/>
              <circle class="svg-c-rule18" cx="599.3" cy="203.2" r="23.9"/>
              <circle class="svg-c-rule19" cx="232.6" cy="138.5" r="23.9"/>
              <circle class="svg-c-rule19" cx="167.9" cy="203.2" r="23.9"/>
              <line class="svg-c-rule20" x1="232.6" y1="138.5" x2="297.3" y2="203.2"/>
              <line class="svg-c-rule20" x1="232.6" y1="138.5" x2="167" y2="204"/>
              <circle class="svg-c-rule19" cx="103.1" cy="267.1" r="23.9"/>
              <circle class="svg-c-rule19" cx="232.6" cy="267.1" r="23.9"/>
              <line class="svg-c-rule20" x1="167.9" y1="202.4" x2="232.6" y2="267.1"/>
              <line class="svg-c-rule20" x1="167.9" y1="202.4" x2="102.3" y2="268"/>
              <circle class="svg-c-rule23" cx="297.3" cy="203.2" r="23.9"/>
              <text transform="matrix(1 0 0 1 643.1665 275.7831)" class="svg-c-rule24 svg-c-rule7 svg-c-rule25">SVG</text>
            </g>
          </svg>

          <aside class="notes">
            <ul>
              <li>Conocemos esquema React, DOM Virtual + Reconciliación -&gt; DOM Real</li>
              <li><b>CLAVE</b>: Un componente contenedor. Marca la frontera.</li>
              <li>(Santi) Actúa como cascarón en React, <b>MISION: punto de entrada para D3</b>.</li>
              <li>A partir de este nodo: territorio de D3 | caja negra xa React.</li>
              <li>2 islas de trabajo, conectadas pero sin interferencias</li>
              <li>¿Cómo se consigue?</li>
              <li>▼</li>
            </ul>
          </aside>
        </section>

        <!-- Slide - Código Variante Estática -->
        <section data-timing="120">
          <h4>Versión Estática</h4>
          <pre><code class="code-area jsx" data-trim="true" data-noescape="true">
            interface Props {
              data: any[];
            }

            class ChartComponent extends React.Component&ltProps, {}&gt {
              constructor(props) {
                super(props);
              }

              private nodeRef = null;

              private setRef = (ref) => {
                this.nodeRef = ref;
              }

              public componentDidMount() {
                // LLamada a D3
                createChart(this.nodeRef, this.props.data);
              }

              public shouldComponentUpdate() {
                return false;
              }

              public render() {
                return (
                  &ltdiv className="container" ref={this.setRef} /&gt
                );
              }
            }
          </code></pre>

          <aside class="notes">
            <ul>
              <li>Solución sencilla | efectiva | funciona.</li>
              <li>Componente básico, DATOS como propiedad, RENDER mínimo: 1 DIV Contenedor.</li>
              <li>OBJETIVO: NODO en DOM para punto de entrada D3.</li>
              <li>REF: . Almacenamos referencia para D3.</li>
              <li>MOUNT: al montarse tenemos nodo en DOM y REF válida. INVOCAMOS D3.</li>
              <li>D3 construirá árbol de elementos para el gráfico enganchado al contenedor.</li>
              <li><b>SECRETO: evitar RENDERS de React -&gt; shouldComponentUpdate=false</b></li>
              <li>1 ÚNICO render al montarse. No necesitamos más. Resto D3 se encarga.</li>
              <li>MATIZ | PREMISA: Los datos no cambian. Por eso versión estática.</li>
              <li>Si cambiaran, no se reflejaría, D3 sólo en mount.</li>
              <li>Solución para casos estáticos. NO REAL TIME.</li>
              <li>▼</li>
            </ul>
          </aside>
        </section>

         <!-- Slide - Ejemplo Variante Estática -->
         <section data-timing="120">
          <div id="sample-d3-render-static" class="flex row center"></div>

          <aside class="notes">
            <ul>
              <li>Ejempo de esta solución</li>
              <li>DATA es un <b>vector números random</b>.</li>
              <li>Representa la altura de las barras.</li>
              <li>Al montarse D3.js genera nodos SVG en función de los datos.</li>
              <li>PREMISA: los datos no cambian.</li>
              <li>Eso si, puedo implementar interactividad.</li>
              <li>Pero QUEREMOS REAL TIME, REACCION ante CAMBIOS, nos da POTENCIA.</li>
              <li>Veamos versión dinámica.</li>
              <li>▼</li>
            </ul>
          </aside>
        </section>

        <!-- Slide - Código Variante Dinámica -->
        <section data-timing="120">
          <h4>Versión Dinámica</h4>
          <pre><code class="code-area jsx" data-trim="true" data-noescape="true">
            interface Props {
              data: any[];
            }

            class ChartComponent extends React.Component&ltProps, {}&gt {
              constructor(props) {
                super(props);
              }

              private nodeRef = null;

              private setRef = (ref) => {
                this.nodeRef = ref;
              }

              public componentDidMount() {
                // LLamada a D3. Enter().
                createChart(this.nodeRef, this.props.data);
              }

              public shouldComponentUpdate(prevProps) {
                return Boolean(prevProps.data !== this.props.data);
              }

              public componentDidUpdate() {
                // LLamada a D3. Update().
                updateChart(this.props.data);
              }

              public render() {
                return (
                  &ltdiv className="container" ref={this.setRef} /&gt
                );
              }
            }
          </code></pre>

          <aside class="notes">
            <ul>
              <li>MUY PARECIDA a la anterior:
                <ul>
                  <li>Datos como propiedad DATA.</li>
                  <li>RENDER con un simple DIV.</li>
                  <li>REF del nodo DIV para pasarsela a D3.</li>
                </ul>
              </li>
              <li>DIFERENCIA: el ciclo de vida.</li>
              <li>MOUNT: Primera llamada a D3, invocamos patrón ENTER. Crea gráfico por primera vez.</li>
              <li>shouldComponentUpdate: ya no bloqueamos todo RENDER. Permitimos si DATA cambia.</li>
              <li>Por tanto, siguiente punto ciclo de vida: componentDidUpdate ->&gt; llamamos a D3 con patrón update.</li>
              <li>NOTA: Podriamos haber usado PureComponent ya que comparación es shallow.</li>
              <li>Lo he hecho así por que sea más explicito y tener más control.</li>
              <li>▼</li>
            </ul>
          </aside>
        </section>

        <!-- Slide - Ejemplo Variante Dinámica -->
        <section data-timing="120">
          <div id="sample-d3-render-dynamic" class="flex row center"></div>

          <aside class="notes">
            <ul>
              <li>Ejemplo dinámico, basado en estático pero:
                <ul>
                  <li>Intervalos programados de 1s.</li>
                  <li>Cada intervalo, nuevos datos Random.</li>
                  <li>Nuevo render dispara patron UPDATE de D3.</li>
                  <li>Transicion implementada en patrón UPDATE.</li>
                </ul>
              </li>
              <li>▼</li>
            </ul>
          </aside>
        </section>

        <!-- Slide - Resumen Pros & Cons -->
        <section data-timing="120">
          <div class="flex column center">
            <div>
              <div class="flex row top-align">
                <h4>PROS</h4>
                <ul class="no-bullet">
                  <li class="fragment"><strong class="positive">✓ </strong>Muy sencilla y efectiva, funciona</li>
                  <li class="fragment"><strong class="positive">✓ </strong>Funcionalidad completa D3</li>
                  <li class="fragment"><strong class="positive">✓ </strong>Código nativo D3 y ejemplos</li>
                  <li class="fragment"><strong class="positive">✓ </strong>Transiciones</li>
                </ul>
              </div>
              <div class="flex row top-align">
                <h4>CONS</h4>
                <ul class="no-bullet">
                  <li class="fragment"><strong class="negative">✗ </strong>DOM Virtual / Reconciliación React</li>
                  <li class="fragment"><strong class="negative">✗ </strong>Porción del DOM mutable</li>
                  <li class="fragment"><strong class="negative">✗ </strong><i>Server Side Rendering</i></li>
                </ul>
              </div>
            </div>
          </div>

          <aside class="notes">
            <ul>
              <li>▼ ✓ SENCILLA, empezad siempre por aqui, después vais promocionando a otras soluciones.</li>
              <li>▼ ✓ Todo el API de D3 disponible, Otras soluciones = restringimos a ciertas funciones D3.</li>
              <li>▼ ✓ Código 100% nativo D3. Consulta y copy/paste miles de ejemplos disponibles. Mejor forma de aprender D3.</li>
              <li>▼ ✓ Transiciones soportadas | mutamos el DOM directamente | NO problemática como en React.</li>
              <li>▼ ✗ NO DOM virtual / reconciliación | Perdemos mecanismo eficiente.</li>
              <li>▼ ✗ ISLA de DOM mutable, sin reglas, con total libertad.</li>
              <li>No es un problema en si, mutar no tiene pq ser malo, pero nos salimos del paradigam de React. PURISTAS BOOM</li>
              <li>▼ ✗ NO SSR. No genración markup de forma remota. D3 debe estar en cliente con el DOM REAL PARA MUTARLO.</li>
              <li>▶</li>
            </ul>
          </aside>
        </section>

      </section>



      <!-- |GRUPO| 2 React renderiza, D3 calcula -->
      <section>

        <!-- Slide - Titulo Intro -->
        <section data-timing="30">
          <h3>React <i>renderiza</i>, D3 calcula</h3>
          <p>D3 al servicio de React</p>

          <aside class="notes">
            <ul>
              <li>Nueva aproximación</li>
              <li>Más protagonismo para REACT</li>
              <li>REACT tiene el peso del renderizado</li>
              <li>Por eso decimos D3 al servicio de React, como esclavo</li>
              <li>▼</li>
            </ul>
          </aside>
        </section>

        <!-- Slide - En que consiste la solución -->
        <section data-timing="120">
          <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
            viewbox="0 0 900 500" style="enable-background:new 0 0 900 500;" xml:space="preserve">
            <style type="text/css">
              .svg-d-rule0{fill:#00D4EC;fill-opacity:0.2;}
              .svg-d-rule1{opacity:0.2;fill:#F68E48;enable-background:new;}
              .svg-d-rule2{fill:#B4B4B4;}
              .svg-d-rule3{font-family:'Montserrat';}
              .svg-d-rule4{font-size:32px;}
              .svg-d-rule5{fill:#FFFFFF;}
              .svg-d-rule6{font-size:38px;}
              .svg-d-rule7{fill:none;stroke:#AAAAAA;stroke-width:3;stroke-miterlimit:10;stroke-dasharray:11.829,11.8286;}
              .svg-d-rule8{fill:none;stroke:#F68E48;stroke-miterlimit:10;}
              .svg-d-rule9{fill:#7F7F7F;stroke:#7F7F7F;stroke-width:3;stroke-miterlimit:10;}
              .svg-d-rule10{fill:none;stroke:#7F7F7F;stroke-width:5;stroke-miterlimit:10;}
              .svg-d-rule11{font-size:21px;}
              .svg-d-rule12{fill:#00D4EC;stroke:#00D4EC;stroke-width:3;stroke-miterlimit:10;}
              .svg-d-rule13{fill:none;stroke:#00D4EC;stroke-width:5;stroke-miterlimit:10;}
              .svg-d-rule14{fill:#F68E48;}
              .svg-d-rule15{font-family:'Montserrat';}
              .svg-d-rule16{fill:none;stroke:#F68E48;stroke-width:3;stroke-miterlimit:10;}
              .svg-d-rule17{fill:#FFFFFF;stroke:#7F7F7F;stroke-width:5;stroke-miterlimit:10;}
              .svg-d-rule18{fill:#FFFFFF;stroke:#00D4EC;stroke-width:5;stroke-miterlimit:10;}
            </style>
            <polygon class="svg-d-rule0" points="863.2,366.5 863.2,72.7 40.7,72.7 40.7,366.5 "/>
            <polygon class="svg-d-rule1" points="219.6,393.4 605.7,394.1 605.7,470 219.6,469 "/>
            <text transform="matrix(1 0 0 1 132.8565 50.6566)" class="svg-d-rule2 svg-d-rule3 svg-d-rule4">DOM Virtual</text>
            <text transform="matrix(1 0 0 1 561.5232 50.6566)" class="svg-d-rule2 svg-d-rule3 svg-d-rule4">DOM Real</text>
            <text transform="matrix(1 0 0 1 500.5502 445.1328)" class="svg-d-rule5 svg-d-rule3 svg-d-rule6">D3.js</text>
            <g>
              <path class="svg-d-rule5" d="M475.2,167.3v-8.6c0-3.8-3.1-6.9-6.9-6.9l-9.5-0.1c-3.8-0.1-6.9,3-6.9,6.8l5.4,0.1c0.5-1.1,1.9-1.8,3.2-1.7
                l6,0.1c1.9,0.1,3.5,1.6,3.5,3.5v5.1c0,1.9-1.5,3.4-3.4,3.4l-6-0.1c-1.3,0-2.7-0.8-3.3-1.8L452,167c0,3.8,3.1,6.9,6.9,6.9l9.5,0.1
                C472.2,174.1,475.2,171.1,475.2,167.3z"/>
              <path class="svg-d-rule5" d="M440.5,166.8c-0.6,1.1-2,1.8-3.3,1.8l-5.6-0.1c-2,0-3.5-1.6-3.5-3.6v-5.3c0-1.9,1.5-3.5,3.5-3.4l5.6,0.1
                c1.4,0,2.7,0.7,3.3,1.9l5.5,0.1c0-3.9-3.2-7.1-7-7.1l-9.1-0.1c-3.9-0.1-7,3.1-7,6.9v8.8c0,3.9,3.2,7.1,7,7.1l9.1,0.1
                c3.9,0.1,7-3.1,7-6.9L440.5,166.8z"/>
              <path class="svg-d-rule5" d="M438.7,162.6c0,1.3,1,2.4,2.4,2.4l15.8,0.1c1.3,0,2.4-1.1,2.4-2.4s-1-2.4-2.4-2.4l-15.8-0.1
                C439.8,160.2,438.7,161.3,438.7,162.6z"/>
            </g>
            <path class="svg-d-rule7" d="M621.6-25.5"/>
            <path class="svg-d-rule7" d="M-21.9,220"/>
            <path class="svg-d-rule7" d="M668,216.9"/>
            <text transform="matrix(1 0 0 1 396.5543 135.6836)" class="svg-d-rule5 svg-d-rule3 svg-d-rule6">React</text>
            <path class="svg-d-rule8" d="M652.7,266.2"/>
            <path class="svg-d-rule8" d="M779.5,393"/>
            <ellipse transform="matrix(0.3417 -0.9398 0.9398 0.3417 296.2089 674.4679)" class="svg-d-rule9" cx="629.6" cy="125.8" rx="23.9" ry="23.9"/>
            <circle class="svg-d-rule9" cx="564.9" cy="190.5" r="23.9"/>
            <line class="svg-d-rule10" x1="629.6" y1="125.8" x2="694.3" y2="190.5"/>
            <line class="svg-d-rule10" x1="629.6" y1="125.8" x2="564" y2="191.3"/>
            <circle class="svg-d-rule9" cx="500.1" cy="254.4" r="23.9"/>
            <ellipse transform="matrix(0.3162 -0.9487 0.9487 0.3162 189.1797 771.2373)" class="svg-d-rule9" cx="629.6" cy="254.4" rx="23.9" ry="23.9"/>
            <line class="svg-d-rule10" x1="564.9" y1="189.7" x2="629.6" y2="254.4"/>
            <line class="svg-d-rule10" x1="564.9" y1="189.7" x2="499.3" y2="255.3"/>
            <circle class="svg-d-rule9" cx="759.1" cy="255.1" r="23.9"/>
            <circle class="svg-d-rule9" cx="694.4" cy="319.8" r="23.9"/>
            <circle class="svg-d-rule9" cx="823.8" cy="319.8" r="23.9"/>
            <line class="svg-d-rule10" x1="759.1" y1="255.1" x2="823.8" y2="319.8"/>
            <line class="svg-d-rule10" x1="759.1" y1="255.1" x2="693.5" y2="320.7"/>
            <line class="svg-d-rule10" x1="694.4" y1="190.4" x2="759.1" y2="255.2"/>
            <text transform="matrix(1 0 0 1 738.1665 263.0831)" class="svg-d-rule5 svg-d-rule3 svg-d-rule11">SVG</text>
            <ellipse class="svg-d-rule12" cx="219.6" cy="125.8" rx="23.9" ry="23.9"/>
            <circle class="svg-d-rule12" cx="154.9" cy="190.5" r="23.9"/>
            <line class="svg-d-rule13" x1="219.6" y1="125.8" x2="284.3" y2="190.5"/>
            <line class="svg-d-rule13" x1="219.6" y1="125.8" x2="154" y2="191.3"/>
            <circle class="svg-d-rule12" cx="90.1" cy="254.4" r="23.9"/>
            <ellipse class="svg-d-rule12" cx="219.6" cy="254.4" rx="23.9" ry="23.9"/>
            <line class="svg-d-rule13" x1="154.9" y1="189.7" x2="219.6" y2="254.4"/>
            <line class="svg-d-rule13" x1="154.9" y1="189.7" x2="89.3" y2="255.3"/>
            <circle class="svg-d-rule12" cx="349.1" cy="255.1" r="23.9"/>
            <circle class="svg-d-rule12" cx="284.4" cy="319.8" r="23.9"/>
            <circle class="svg-d-rule12" cx="413.8" cy="319.8" r="23.9"/>
            <line class="svg-d-rule13" x1="349.1" y1="255.1" x2="413.8" y2="319.8"/>
            <line class="svg-d-rule13" x1="349.1" y1="255.1" x2="283.5" y2="320.7"/>
            <line class="svg-d-rule13" x1="284.4" y1="190.4" x2="349.1" y2="255.2"/>
            <text transform="matrix(1 0 0 1 328.1665 263.0831)" class="svg-d-rule5 svg-d-rule3 svg-d-rule11">SVG</text>
            <text transform="matrix(1 0 0 1 326.1664 443.1324)" class="svg-d-rule14 svg-d-rule15 svg-d-rule6">f(x) </text>
            <text transform="matrix(1 0 0 1 241.1664 443.1324)" class="svg-d-rule14 svg-d-rule15 svg-d-rule6">f(x) </text>
            <text transform="matrix(1 0 0 1 412.1664 443.1324)" class="svg-d-rule14 svg-d-rule15 svg-d-rule6">f(x) </text>
            <line class="svg-d-rule16" x1="284.4" y1="393.8" x2="284.4" y2="356.3"/>
            <polygon class="svg-d-rule14" points="289.5,362.2 284.4,357.1 279.3,362.2 279.3,357.9 284.4,352.8 289.5,357.9"/>
            <path class="svg-d-rule16" d="M299,457h-61c-2.2,0-4-1.8-4-4v-42.7c0-2.2,1.8-4,4-4h61c2.2,0,4,1.8,4,4V453C303,455.2,301.2,457,299,457z"/>
            <path class="svg-d-rule16" d="M384,457h-61c-2.2,0-4-1.8-4-4v-42.7c0-2.2,1.8-4,4-4h61c2.2,0,4,1.8,4,4V453C388,455.2,386.2,457,384,457z"/>
            <path class="svg-d-rule16" d="M469,457h-61c-2.2,0-4-1.8-4-4v-42.7c0-2.2,1.8-4,4-4h61c2.2,0,4,1.8,4,4V453C473,455.2,471.2,457,469,457z"/>
            <line class="svg-d-rule16" x1="351.4" y1="394" x2="351.4" y2="318.8"/>
            <polygon class="svg-d-rule14" points="356.5,324.8 351.4,319.7 346.3,324.8 346.3,320.5 351.4,315.4 356.5,320.5"/>
            <line class="svg-d-rule16" x1="415.4" y1="393.8" x2="415.4" y2="356.3"/>
            <polygon class="svg-d-rule14" points="420.5,362.2 415.4,357.1 410.3,362.2 410.3,357.9 415.4,352.8 420.5,357.9"/>
            <circle class="svg-d-rule17" cx="694.3" cy="190.5" r="23.9"/>
            <circle class="svg-d-rule18" cx="284.3" cy="190.5" r="23.9"/>
          </svg>

          <aside class="notes">
            <ul>
              <li>Panorama de React ya lo conocemos. DOM virtual vs Real + Reconciliación</li>
              <li>Todo el árbol de componentes dentro de React. React renderiza todo.</li>
              <li><b>RECOMENDACIÓN</b>: Aunque no es necesario ahora, mantened un contenedor para vuestro gráfico. Puede que necesiteis implementar otra alternativa más adelante.</li>
              <li>Dijimos: D3 API enorme, core para DOM pequeño, muchos helpers matemáticos.</li>
              <li>Usemos los helpers de D3 para apoyarnos y calcular tamaños, posiciones, escalas, etc.</li>
              <li>No obstante, los elementos SVG del gráfico serán siempre React.</li>
              <li>▼</li>
            </ul>
          </aside>
        </section>

        <!-- Slide - Código -->
        <section data-timing="120">
          <pre><code class="code-area jsx" data-trim="true" data-noescape="true">
            interface Props {
              data: any[];
            }

            class ChartComponent extends React.PureComponent&ltProps, {}&gt {
              constructor(props) {
                super(props);
              }

              private calculatePath = (lineData) => {
                // Usamos D3 para cálculos
                // d3.scaleLinear()...
                // d3.line()...
                return ...
              }

              public render() {
                return (
                  &ltsvg width="500px" height="300px"&gt
                    {
                      this.props.data.map(lineData => (
                        &ltpath d={this.calculatePath(lineData)} className="line" /&gt
                      ))
                    }
                  &lt/svg&gt
                );
              }
            }
          </code></pre>

          <aside class="notes">
            <ul>
              <li>Ejemplo muy sencillito para ilustrar esta solución.</li>
              <li>Igual que antes: Datos como propiedad.</li>
              <li>Aqui he decidido hacerlo puro, si los datos cambian, habrá nuevo render.</li>
              <li>Por tanto soporta datos dinámicos.</li>
              <li>La chicha está en el RENDER. Ahora es mucho más elaborado.</li>
              <li>Genera un contendor SVG y todos los elementos que componen el gráfico.</li>
              <li>Líneas en este caso, cuyas coordenadas son calculadas por D3.</li>
              <li>Como veis es un ejemplo muuuy sencillo, porque su complejidad crece rápidamente.</li>
              <li>▼</li>
            </ul>
          </aside>
        </section>

        <!-- Slide - Ejemplo -->
        <section data-timing="120">
          <div id="sample-react-render" class="flex row center"></div>

          <aside class="notes">
            <ul>
              <li>Resultado de carrera de F1. Posición de cada piloto en cada vuelta.</li>
              <li>Un array donde cada datum representa un piloto y su posición en cada vuelta.</li>
              <li>Por sencillez el ejemplo es estático pero esta solución soporta real time, aunque a través de React y sus re-renders.</li>
              <li>Interactividad, tb posible dentro de React: hover, onclick, etc, etc.</li>
              <li>▼</li>
            </ul>
          </aside>
        </section>

        <!-- Slide - Resumen Pros & Cons -->
        <section data-timing="120">
          <div class="flex column center">
            <div>
              <div class="flex row top-align">
                <h4>PROS</h4>
                <ul class="no-bullet">
                  <li class="fragment"><strong class="positive">✓ </strong>Código React</li>
                  <li class="fragment"><strong class="positive">✓ </strong>DOM Virtual / Reconciliación</li>
                  <li class="fragment"><strong class="positive">✓ </strong><i>Server Side Rendering</i></li>
                </ul>
              </div>
              <div class="flex row top-align">
                <h4>CONS</h4>
                <ul class="no-bullet">
                  <li class="fragment"><strong class="negative">✗ </strong>Complejidad exponencial</li>
                  <li class="fragment"><strong class="negative">✗ </strong>Reimplementar funcionalidad D3</li>
                  <li class="fragment"><strong class="negative">✗ </strong>Ejemplos D3</li>
                  <li class="fragment"><strong class="negative">✗ </strong>Amplio conocimiento API D3</li>
                  <li class="fragment"><strong class="negative">✗ </strong>Transiciones</li>
                </ul>
              </div>
            </div>
          </div>

          <aside class="notes">
            <ul>
              <li>▼ ✓ Para los puristas, código 100% React.</li>
              <li>▼ ✓ Performance y eficiencia de React.</li>
              <li>▼ ✓ SSR es posible siguiendo los mecanismos que ya existen en React (Next.js)</li>
              <li>▼ ✗ Gráficos sencillos, ok, gráficos complejos, código jodido.</li>
              <li>▼ ✗ Acabamos duplicando código que ya existe en D3.js.</li>
              <li>▼ ✗ Perdemos los miles de ejemplos de D3. El código nativo D3 no se va a parecer al código que necesitaremos en React para nuestro gráfico.</li>
              <li>▼ ✗ Requiere dominio del API de D3</li>
              <li>▼ ✗ 3rd party library para transiciones IN-OUT. Animaciones SVG complejas no soportadas por React</li>
              <li>▶</li>
            </ul>
          </aside>
        </section>

      </section>


      <!-- |GRUPO| 3 Faux DOM -->
      <section>

        <!-- Slide - Titulo Intro -->
        <section data-timing="30">
          <h3><i>Faux</i> DOM</h3>
          <p>React y D3 totalmente separados</p>

          <aside class="notes">
            <ul>
              <li>Solución muy ingeniosa.</li>
              <li>Posible gracias a react-faux-dom por Oliver Caldwell.</li>
              <li>Recuerda a la aproximación primera, pero aqui la separación es TOTAL. Desconexión total.</li>
              <li>react-faux-dom hará de puente.</li>
              <li>▼</li>
            </ul>
          </aside>
        </section>

        <!-- Slide - En que consiste la solución -->
        <section data-timing="120">
          <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
          viewbox="0 0 1150 400" style="enable-background:new 0 0 1150 400;" xml:space="preserve">
            <style type="text/css">
              .svg-e-rule0{fill:#F68E48;fill-opacity:0.2;}
              .svg-e-rule1{fill:#00D4EC;fill-opacity:0.2;}
              .svg-e-rule2{fill:#B4B4B4;}
              .svg-e-rule3{font-family:'Montserrat';}
              .svg-e-rule4{font-size:32px;}
              .svg-e-rule5{fill:#FFFFFF;}
              .svg-e-rule6{font-size:38px;}
              .svg-e-rule7{fill:none;stroke:#AAAAAA;stroke-width:3;stroke-miterlimit:10;stroke-dasharray:11.829,11.8286;}
              .svg-e-rule8{fill:none;stroke:#F68E48;stroke-miterlimit:10;}
              .svg-e-rule9{fill:#7F7F7F;stroke:#7F7F7F;stroke-width:3;stroke-miterlimit:10;}
              .svg-e-rule10{fill:none;stroke:#7F7F7F;stroke-width:5;stroke-miterlimit:10;}
              .svg-e-rule11{fill:#00D4EC;stroke:#00D4EC;stroke-width:3;stroke-miterlimit:10;}
              .svg-e-rule12{fill:none;stroke:#00D4EC;stroke-width:5;stroke-miterlimit:10;}
              .svg-e-rule13{font-size:21px;}
              .svg-e-rule14{fill:#FFFFFF;stroke:#7F7F7F;stroke-width:5;stroke-miterlimit:10;}
              .svg-e-rule15{fill:#FFFFFF;stroke:#00D4EC;stroke-width:5;stroke-miterlimit:10;}
              .svg-e-rule16{fill:#F68E48;stroke:#F68E48;stroke-width:3;stroke-miterlimit:10;}
              .svg-e-rule17{fill:#F68E48;stroke:#F68E48;stroke-width:5;stroke-miterlimit:10;}
              .svg-e-rule18{fill:#00ECCC;fill-opacity:0.2;}
              .svg-e-rule19{font-size:26px;}
              .svg-e-rule20{fill:none;stroke:#00ECCC;stroke-width:5;stroke-miterlimit:10;stroke-dasharray:6,6;}
              .svg-e-rule21{fill:#00ECCC;}
            </style>
            <rect x="31.1" y="72.7" class="svg-e-rule0" width="234.8" height="224.3"/>
            <polygon class="svg-e-rule1" points="1117.2,366.5 1117.2,72.7 294.7,72.7 294.7,366.5 "/>
            <text transform="matrix(1 0 0 1 386.8523 50.6566)" class="svg-e-rule2 svg-e-rule3 svg-e-rule4">DOM Virtual</text>
            <text transform="matrix(1 0 0 1 815.519 50.6566)" class="svg-e-rule2 svg-e-rule3 svg-e-rule4">DOM Real</text>
            <text transform="matrix(1 0 0 1 108.1958 135.7946)" class="svg-e-rule5 svg-e-rule3 svg-e-rule6">D3.js</text>
            <g>
              <path class="svg-e-rule5" d="M729.2,167.3v-8.6c0-3.8-3.1-6.9-6.9-6.9l-9.5-0.1c-3.8-0.1-6.9,3-6.9,6.8l5.4,0.1c0.5-1.1,1.9-1.8,3.2-1.7
                l6,0.1c1.9,0.1,3.5,1.6,3.5,3.5v5.1c0,1.9-1.5,3.4-3.4,3.4l-6-0.1c-1.3,0-2.7-0.8-3.3-1.8L706,167c0,3.8,3.1,6.9,6.9,6.9l9.5,0.1
                C726.2,174.1,729.2,171.1,729.2,167.3z"/>
              <path class="svg-e-rule5" d="M694.5,166.8c-0.6,1.1-2,1.8-3.3,1.8l-5.6-0.1c-2,0-3.5-1.6-3.5-3.6v-5.3c0-1.9,1.5-3.5,3.5-3.4l5.6,0.1
                c1.4,0,2.7,0.7,3.3,1.9l5.5,0.1c0-3.9-3.2-7.1-7-7.1l-9.1-0.1c-3.9-0.1-7,3.1-7,6.9v8.8c0,3.9,3.2,7.1,7,7.1l9.1,0.1
                c3.9,0.1,7-3.1,7-6.9L694.5,166.8z"/>
              <path class="svg-e-rule5" d="M692.7,162.6c0,1.3,1,2.4,2.4,2.4l15.8,0.1c1.3,0,2.4-1.1,2.4-2.4s-1-2.4-2.4-2.4l-15.8-0.1
                C693.8,160.2,692.7,161.3,692.7,162.6z"/>
            </g>
            <path class="svg-e-rule7" d="M871.6-25.5"/>
            <path class="svg-e-rule7" d="M232.1,220"/>
            <path class="svg-e-rule7" d="M922,216.9"/>
            <text transform="matrix(1 0 0 1 650.5501 135.6836)" class="svg-e-rule5 svg-e-rule3 svg-e-rule6">React</text>
            <path class="svg-e-rule8" d="M906.7,266.2"/>
            <path class="svg-e-rule8" d="M1033.5,393"/>
            <ellipse transform="matrix(0.3417 -0.9398 0.9398 0.3417 463.4136 913.1752)" class="svg-e-rule9" cx="883.5" cy="125.8" rx="23.9" ry="23.9"/>
            <circle class="svg-e-rule9" cx="818.9" cy="190.5" r="23.9"/>
            <line class="svg-e-rule10" x1="883.6" y1="125.8" x2="948.3" y2="190.5"/>
            <line class="svg-e-rule10" x1="883.6" y1="125.8" x2="818" y2="191.3"/>
            <circle class="svg-e-rule9" cx="754.1" cy="254.4" r="23.9"/>
            <ellipse transform="matrix(0.3162 -0.9487 0.9487 0.3162 362.8625 1012.2014)" class="svg-e-rule9" cx="883.6" cy="254.4" rx="23.9" ry="23.9"/>
            <line class="svg-e-rule10" x1="818.9" y1="189.7" x2="883.6" y2="254.4"/>
            <line class="svg-e-rule10" x1="818.9" y1="189.7" x2="753.3" y2="255.3"/>
            <ellipse class="svg-e-rule11" cx="473.6" cy="125.8" rx="23.9" ry="23.9"/>
            <circle class="svg-e-rule11" cx="408.9" cy="190.5" r="23.9"/>
            <line class="svg-e-rule12" x1="473.6" y1="125.8" x2="538.3" y2="190.5"/>
            <line class="svg-e-rule12" x1="473.6" y1="125.8" x2="408" y2="191.3"/>
            <circle class="svg-e-rule11" cx="344.1" cy="254.4" r="23.9"/>
            <ellipse class="svg-e-rule11" cx="473.6" cy="254.4" rx="23.9" ry="23.9"/>
            <line class="svg-e-rule12" x1="408.9" y1="189.7" x2="473.6" y2="254.4"/>
            <line class="svg-e-rule12" x1="408.9" y1="189.7" x2="343.3" y2="255.3"/>
            <g class="fragment" data-fragment-index="2">
              <g>
                <circle class="svg-e-rule9" cx="1013.1" cy="255.1" r="23.9"/>
                <circle class="svg-e-rule9" cx="948.4" cy="319.8" r="23.9"/>
                <circle class="svg-e-rule9" cx="1077.8" cy="319.8" r="23.9"/>
                <line class="svg-e-rule10" x1="1013.1" y1="255.1" x2="1077.8" y2="319.8"/>
                <line class="svg-e-rule10" x1="1013.1" y1="255.1" x2="947.5" y2="320.7"/>
                <line class="svg-e-rule10" x1="948.4" y1="190.4" x2="1013.1" y2="255.2"/>
                <text transform="matrix(1 0 0 1 992.1623 263.0831)" class="svg-e-rule5 svg-e-rule3 svg-e-rule13">SVG</text>
              </g>
              <g>
                <circle class="svg-e-rule11" cx="603.1" cy="255.1" r="23.9"/>
                <circle class="svg-e-rule11" cx="538.4" cy="319.8" r="23.9"/>
                <circle class="svg-e-rule11" cx="667.8" cy="319.8" r="23.9"/>
                <line class="svg-e-rule12" x1="603.1" y1="255.1" x2="667.8" y2="319.8"/>
                <line class="svg-e-rule12" x1="603.1" y1="255.1" x2="537.5" y2="320.7"/>
                <line class="svg-e-rule12" x1="538.4" y1="190.4" x2="603.1" y2="255.2"/>
                <text transform="matrix(1 0 0 1 582.1623 263.0831)" class="svg-e-rule5 svg-e-rule3 svg-e-rule13">SVG</text>
              </g>
            </g>
            <circle class="svg-e-rule14" cx="948.3" cy="190.5" r="23.9"/>
            <circle class="svg-e-rule15" cx="538.3" cy="190.5" r="23.9"/>
            <g>
              <circle class="svg-e-rule16" cx="148" cy="190.5" r="23.9"/>
              <circle class="svg-e-rule16" cx="83.3" cy="255.1" r="23.9"/>
              <circle class="svg-e-rule16" cx="212.7" cy="255.1" r="23.9"/>
              <line class="svg-e-rule17" x1="148" y1="190.5" x2="212.7" y2="255.1"/>
              <line class="svg-e-rule17" x1="148" y1="190.5" x2="82.4" y2="256.1"/>
              <text transform="matrix(1 0 0 1 127.0623 198.4331)" class="svg-e-rule5 svg-e-rule3 svg-e-rule13">SVG</text>
            </g>
            <text transform="matrix(1 0 0 1 74.8523 50.6566)" class="svg-e-rule2 svg-e-rule3 svg-e-rule4">Faux DOM</text>
            <g class="fragment" data-fragment-index="1">
              <rect x="31.1" y="297" class="svg-e-rule18" width="234.8" height="69.5"/>
              <text transform="matrix(1 0 0 1 46.8622 340.6999)" class="svg-e-rule5 svg-e-rule3 svg-e-rule19">react-faux-dom</text>
              <polyline class="svg-e-rule20" points="265.9,336.3 458,336.3 539.1,255.2 539.1,220.1"/>
              <polygon class="svg-e-rule21" points="547.6,230.1 539.1,221.6 530.6,230.1 530.6,222.9 539.1,214.4 547.6,222.9"/>
              <line class="svg-e-rule20" x1="148.5" y1="246.1" x2="148.5" y2="290.3"/>
              <polygon class="svg-e-rule21" points="140,280.3 148.5,288.8 157,280.3 157,287.5 148.5,296 140,287.5"/>
            </g>
          </svg>

          <a class="fragment" data-fragment-index="1" target="_blank" href="https://github.com/Olical/react-faux-dom" style="font-size:1.75rem;">
            react-faux-dom
          </a>

          <aside class="notes">
            <ul>
              <li>2 islas completamente separadas, cada una con su propio DOM.</li>
              <li>A D3 le proporcionamos un faux DOM, un DOM de mentira.</li>
              <li>A efectos prácticos es un DOM igual que el DOM real pero NO ATACHEADO.</li>
              <li>Cada librería trabaja en DOM independientes, solo que el gráfico de D3 no se ve en ningún sitio. ¿Como lo inyectamos?</li>
              <li>▼ Gracias a react-faux-dom, hace de intermediario: traduce el faux DOM a una salida que React entienda: ReactElements.</li>
              <li>Como si react-faux-dom escupiese JSX con cada cambio que se produzca en el fauxDOM, para inyectarlo en React.</li>
              <li>▼ De este modo acabará en el DOM virtual y propocionará al DOM real.</li>
              <li>SE INTUYE: solución con lo mejor de ambos mundos (ya que son 100% independientes) a costa de una nueva pieza en el puzle.</li>
            </ul>
          </aside>
        </section>

        <!-- Slide - Código Variante Estática -->
        <section data-timing="120">
          <h4>Versión Estática</h4>
          <pre><code class="code-area jsx" data-trim="true" data-noescape="true">
            interface Props extends ReactFauxDomProps {
              data: any[];
            }

            class InnerChartComponent extends React.Component&lt;Props, {}&gt; {
              constructor(props) {
                super(props);
              }

              public componentDidMount() {
                // Creamos un Faux DOM para D3
                const fauxDom = this.props.connectFauxDOM("div", "chart");
                createChart(fauxDom, this.props.data);
              }

              public render() {
                return (
                  &lt;div className="container"&gt;
                    {this.props.chart}
                  &lt;/div&gt;
                );
              }
            }

            const ChartComponent = withFauxDOM(InnerChartComponent);
          </code></pre>

          <aside class="notes">
            <ul>
              <li>Como siempre, DATA como propiedad, array de elementos.</li>
              <li>Versión estática: premisa -&gt; los datos no van a cambiar</li>
              <li>RENDER: un div como container y un hijo que objetemos via propiedad. ¿Que propiedad es esta? Ahora lo veremos.</li>
              <li>Al montar el componente:
                <ul>
                  <li>Creamos el faux DOM con connectFauxDOM.</li>
                  <li>Asignamos nombre y tipo. Nombre muy importante.</li>
                  <li>Llamamos a D3 (patron enter()) pasandole el faux dom y los datos.</li>
                </ul>
              </li>
              <li>Por tanto, el gráfico se renderiza en el faux DOM.</li>
              <li>SECRETO: HOC que inyecta via props lo que necesitamos:
                <ul>
                  <li>connectFauxDOM para generar el faux DOM.</li>
                  <li>props.chart: fauxDOM traducido a elementos de React.</li>
                </ul>
              </li>
              <li>Con cada cambio en fauxDOM -&gt; props.chart cambia -&gt; nuevo render</li>
              <li>▼</li>
            </ul>
          </aside>
        </section>

        <!-- Slide - Código Variante Dinámica -->
        <section data-timing="120">
          <h4>Versión Dinámica</h4>
          <pre><code class="code-area jsx" data-trim="true" data-noescape="true">
            interface Props extends ReactFauxDomProps {
              data: any[];
            }

            class InnerChartComponent extends React.Component&lt;Props, {}&gt; {
              constructor(props) {
                super(props);
              }

              public componentDidMount() {
                // Creamos un Faux DOM para D3
                const fauxDom = this.props.connectFauxDOM("div", "chart");
                createChart(fauxDom, this.props.data);
              }

              public componentDidUpdate(prevProps) {
                if (prevProps.data !== this.props.data) {
                  // Obtenemos el FauxDOM
                  const fauxDom = this.props.connectFauxDOM("div", "chart");
                  updateChart(fauxDom, this.props.data);
                  this.props.animateFauxDOM(1000);
                }
              }

              public render() {
                return (
                  &lt;div className="container"&gt;
                    {this.props.chart}
                  &lt;/div&gt;
                );
              }
            }

            const ChartComponent = withFauxDOM(InnerChartComponent);
          </code></pre>

          <aside class="notes">
            <ul>
              <li>Versión Dinámica prácticamente igual.</li>
              <li>Sólamente añadimos un psao en el ciclo de vida.</li>
              <li>Seguimos llamando a D3 al montarse, para crear el gráfico la primera vez (patron ENTER())</li>
              <li>DIFERENCIA, en componentDidUpdate, capturamos cambio en los datos.
                <ul>
                  <li>Volvemos a obeter el fauxDOM via connect. Hay que hacerlo asi. No vale guardarse la referencia.</li>
                  <li>LLamamos al patron update de D3 con los nuevos datos.</li>
                  <li>Por ultimo, muy importante, activamos período de animación.</li>
                  <li>Con esto indicamos a react-faux-dom que se va a producir una animación en el DOM, y que haga muestreo.</li>
                  <li>Envía el estado del faux DOM cada 16ms (60fps). Estamos simulando una animación.</li>
                  <li>La animación real ocurre en fauxDOM, nosotros la simulamos en React haciendo muestreo.</li>
                </ul>
              </li>
              <li>▼</li>
            </ul>
          </aside>
        </section>

        <!-- Slide - Ejemplo -->
        <section data-timing="120">
          <div class="flex row center">
            <div id="sample-faux-dom"></div>
          </div>

          <aside class="notes">
            <ul>
              <li>D3 no solo son gráficos estadísticos, se puede hacer algo más artístico.</li>
              <li>EJEMPLO: representación de arbol binario pero con dirección de los nodos hijos aleatorizada.</li>
              <li>Los nodos hijos salen en direcciones pseudo aleatorias, con rango acotado y con peso gausiano.</li>
              <li>Longitud segmentos sigue un decrecimiento exponencial según la profundidad</li>
              <li>Imitamos naturaleza para dibujar árboles.</li>
              <li>REFRESH: Generamos un nuevo set aleatorio de datos. Patrón UPDATE con transiciones.</li>
              <li>Las animaciones de transición son simuladas en react gracias al muestreo de 16ms.</li>
              <li>Si desactivamos FauxDOM y cambiamos a solución 1, las transiciones son mas suaves ya que son reales, mutaciones en el DOM real via CSS.</li>
              <li>Podemos activar datos aletorios cada intervalo de 1s.</li>
              <li>Pincelada de color para Anémonas o Brocoli marciano.</li>
              <li>▼</li>
            </ul>
          </aside>
        </section>

        <!-- Slide - Resumen Pros & Cons -->
        <section data-timing="120">
          <div class="flex column center">
            <div>
              <div class="flex row top-align">
                <h4>PROS</h4>
                <ul class="no-bullet">
                  <li class="fragment"><strong class="positive">✓ </strong>Funcionalidad completa D3</li>
                  <li class="fragment"><strong class="positive">✓ </strong>Código nativo D3 y ejemplos</li>
                  <li class="fragment"><strong class="positive">✓ </strong>DOM Virtual / Reconciliación</li>
                  <li class="fragment"><strong class="positive">✓ </strong><i>Server Side Rendering</i></li>
                  <li class="fragment"><strong class="positive">✓ </strong>Transiciones</li>
                </ul>
              </div>
              <div class="flex row top-align">
                <h4>CONS</h4>
                <ul class="no-bullet">
                  <li class="fragment"><strong class="negative">✗ </strong>Nueva entidad en flujo renderizado</li>
                  <li class="fragment"><strong class="negative">✗ </strong>Rendimiento en gráficos complejos</li>
                  <li class="fragment"><strong class="negative">✗ </strong>Pseudo transiciones via muestreo</li>
                  <li class="fragment"><strong class="negative">✗ </strong>Toda la responsabilidad</li>
                  <li class="fragment"><strong class="negative">✗ </strong>¿Mantenimiento? ¿Proyecto desactualizado?</li>
                </ul>
              </div>
            </div>
          </div>

          <aside class="notes">
            <ul>
              <li>▼ ✓ API D3 completa disponible.</li>
              <li>▼ ✓ Miles de ejemplos, copy paste, código nativo.</li>
              <li>▼ ✓ Lo mejor de React, todo dentro de DOM virtual.</li>
              <li>▼ ✓ Soporta SSR.</li>
              <li>▼ ✓ Soporta transiciones.</li>
              <li>▼ ✗ Nueva pieza en el puzle, cada cambio pasa por un flujo más largo.</li>
              <li>▼ ✗ Eso implica más penalización en rendimiento. Gráficos complejos sufrirían con esta solución.</li>
              <li>▼ ✗ Transiciones creadas artificialmente con muestreo, no son nativas.</li>
              <li>▼ ✗ Toda la responsabilidad recaes sobre esta pequeña librería.</li>
              <li>▼ ✗ RIESGO: Está mantenida? Soportará futuras versiones React? Quedará obsoleta?</li>
            </ul>
            <ul>CONSEJO
              <li>Comenzad siempre por la Solución 1.</li>
              <li>Id promocionando a otras soluciones o versiones a medida que lo necesitéis.</li>
            </ul>
            <li>▶</li>
          </aside>
        </section>

      </section>


      <!-- |GRUPO| Despedida -->
      <section>

        <!-- Slide - Enlaces -->
        <section data-timing="20">
          <h3 style="margin:2rem 0;">Enlaces</h3>
          <div class="flex column center">
            <a target="_blank" href="https://github.com/fjcalzado/react_d3_trabajando_juntos/tree/master/samples">Ejemplos D3.js</a>
            <a target="_blank" href="https://github.com/fjcalzado/react_d3_trabajando_juntos">Presentación</a>
          </div>
          <h4 style="margin-top:5rem;margin-bottom:2rem;">Contacto</h4>
          <div class="flex row center">
            <a class="svg-button" target="_blank" href="mailto:javi.calzado@lemoncode.net">
              <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" height="50">
                <path d="M24 4.5v15c0 .85-.65 1.5-1.5 1.5H21V7.387l-9 6.463-9-6.463V21H1.5C.649 21 0 20.35 0 19.5v-15c0-.425.162-.8.431-1.068C.7 3.16 1.076 3 1.5 3H2l10 7.25L22 3h.5c.425 0 .8.162 1.069.432.27.268.431.643.431 1.068z"/>
              </svg>
            </a>
            <a class="svg-button" target="_blank" href="https://github.com/fjcalzado">
              <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" height="40">
                <path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/>
              </svg>
            </a>
            <a class="svg-button" target="_blank" href="https://twitter.com/fjcalzadosp">
              <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" height="50">
                <path d="M23.954 4.569c-.885.389-1.83.654-2.825.775 1.014-.611 1.794-1.574 2.163-2.723-.951.555-2.005.959-3.127 1.184-.896-.959-2.173-1.559-3.591-1.559-2.717 0-4.92 2.203-4.92 4.917 0 .39.045.765.127 1.124C7.691 8.094 4.066 6.13 1.64 3.161c-.427.722-.666 1.561-.666 2.475 0 1.71.87 3.213 2.188 4.096-.807-.026-1.566-.248-2.228-.616v.061c0 2.385 1.693 4.374 3.946 4.827-.413.111-.849.171-1.296.171-.314 0-.615-.03-.916-.086.631 1.953 2.445 3.377 4.604 3.417-1.68 1.319-3.809 2.105-6.102 2.105-.39 0-.779-.023-1.17-.067 2.189 1.394 4.768 2.209 7.557 2.209 9.054 0 13.999-7.496 13.999-13.986 0-.209 0-.42-.015-.63.961-.689 1.8-1.56 2.46-2.548l-.047-.02z"/>
              </svg>
            </a>
            <a class="svg-button" target="_blank" href="https://facebook.com/fjcalzado">
              <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" height="40">
                <path d="M22.676 0H1.324C.593 0 0 .593 0 1.324v21.352C0 23.408.593 24 1.324 24h11.494v-9.294H9.689v-3.621h3.129V8.41c0-3.099 1.894-4.785 4.659-4.785 1.325 0 2.464.097 2.796.141v3.24h-1.921c-1.5 0-1.792.721-1.792 1.771v2.311h3.584l-.465 3.63H16.56V24h6.115c.733 0 1.325-.592 1.325-1.324V1.324C24 .593 23.408 0 22.676 0"/>
              </svg>
            </a>
          </div>

          <aside class="notes">
            <ul>
              <li>Todo el material que habéis visto está disponible en Github, tanto la propia presentación como los ejemplos</li>
            </ul>
          </aside>

        </section>

        <!-- Slide - Cierre Lemoncode -->
        <section data-timing="20">
          <div class="flex column center">
            <object type="image/svg+xml" data="media/lemoncode_logo.svg" width="250" height="200">Lemoncode Logo</object>
            <div class="flex column center" style="font-size:2rem;">
              <a style="margin-top:1.5rem;" target="_blank" href="https://github.com/lemoncode">Repositorios Lemoncode</a>
              <ul class="flex column center no-bullet" style="font-size:1.5rem">
                <li><a target="_blank" href="https://github.com/Lemoncode/react-by-sample">react-by-sample</a></li>
                <li><a target="_blank" href="https://github.com/Lemoncode/react-typescript-samples">react-typescript-by-sample</a></li>
                <li><a target="_blank" href="https://github.com/Lemoncode/webpack-by-sample">webpack-by-sample</a></li>
                <li><a target="_blank" href="https://github.com/Lemoncode/redux-by-sample">redux-by-sample</a></li>
              </ul>
              <a target="_blank" href="http://lemoncode.net/">Lemoncode.net</a>
            </div>
          </div>

          <aside class="notes">
            <ul>
              <li>Además os recomiendo que consultéis las guías Lemoncode donde tratamos paso a paso y con ejemplos muchas tecnologías como React, Redux, Webpack, etc. Se agradecen estrellitas :)</li>
            </ul>
          </aside>
        </section>

      </section>

      <div id="reveal-scale-node-id" />
    </div>
  </div>



  <!-- RECURSOS y CONFIGURACIÓN REVEAL.js -->
  <script src="lib/js/head.min.js"></script>
  <script src="js/reveal.js"></script>
  <script>
    // Detectamos si es master/client y extrae la clave (key/secret) mediante el parámetro K de la URL.
    const master = Boolean(Reveal.getQueryHash().k);
    const masterKey = master ? Reveal.getQueryHash().k : null;
    if (master) console.log("Master Enabled");
    const notes = Boolean(Reveal.getQueryHash().n);
    if (notes) console.log("Notes Enabled");

    Reveal.initialize({
      width: 960,
	    height: 700,
      controls: true,
      controlsTutorial: true,
      progress: true,
      history: true, // Intersante para desarrollo. Mantiene histórico de URLs con #
      center: true,
      maxScale: 4.0,
      viewDistance: 3,  // Distancia de Lazy loading medida en slides, (contenido/recursos a cargar de las x slides por delante de la actual).
      transition: 'slide', // Opciones: none/fade/slide/convex/concave/zoom.
      defaultTiming: '100',

      multiplex: {
        secret: masterKey, // null o la clave/secreto, según sea el cliente o master el que se haya conectado.
        id: 'a45de79095c017f5', // id, obtenida del servidor socket.io.
        url: 'https://reveal-multiplex-fjcalzado.herokuapp.com/' // Ubicación de nuestro servidor socket.io.
      },

      dependencies: [
        { src: 'lib/js/socket.io.slim.js', async: true },
        { src: master ? 'plugin/multiplex/master.js' : 'plugin/multiplex/client.js', async: true }, // Añadimos el script para el multiplex que corresponda (master vs client).
        { src: 'lib/js/classList.js', condition: function () { return !document.body.classList; } },
        { src: 'plugin/markdown/marked.js', condition: function () { return !!document.querySelector('[data-markdown]'); } },
        { src: 'plugin/markdown/markdown.js', condition: function () { return !!document.querySelector('[data-markdown]'); } },
        { src: 'plugin/highlight/highlight.js', async: true, callback: function () { hljs.initHighlightingOnLoad(); } },
        { src: 'plugin/search/search.js', async: true },
        { src: 'plugin/zoom-js/zoom.js', async: true },
        { src: master || notes ? 'plugin/notes/notes.js' : '', async: true } // Permitir notas de presentador.
      ]
    });

    // Almacenamos escala de reveal para aplicar un fix en los ejemplos.
    const revealScaleNode = document.getElementById("reveal-scale-node-id");
    const setScale = () => {
      console.log(Reveal.getScale())
      revealScaleNode.setAttribute("data-reveal-scale", Reveal.getScale());
    };
    window.onload = setScale;
    window.addEventListener("resize", setScale);

  </script>

  <!-- RECURSOS Para ejemplos empotrados React + D3.js -->
  <script type="text/javascript" src="samples/dist/manifest.js"></script>
  <script type="text/javascript" src="samples/dist/vendor.js"></script>
  <script type="text/javascript" src="samples/dist/reactD3Samples.js"></script>

</body>

</html>
