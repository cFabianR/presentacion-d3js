<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <title>D3.js y React, trabajando juntos</title>
  <meta name="description" content="Presentación para la charla 'D3.js y React, trabajando juntos'">
  <meta name="author" content="Javier Calzado">

  <!-- Config -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

  <!-- Temas Reveal y custom -->
  <link rel="stylesheet" href="css/reveal.css">
  <link rel="stylesheet" href="css/theme/fjcalzado.css" id="theme">

  <!-- Tema para sintaxis de código -->
  <link rel="stylesheet" href="lib/css/vs2015.css">

  <!-- Printing and PDF exports -->
  <script>
    const link = document.createElement('link');
    link.rel = 'stylesheet';
    link.type = 'text/css';
    link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
    document.getElementsByTagName('head')[0].appendChild(link);
  </script>

  <!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
</head>

<body>

  <div class="reveal">
    <div class="slides">

      <!-- Slide - Apertura -->
      <section>

        <object type="image/svg+xml" data="media/osc_logo.svg" height="120">Open South Code Logo</object>
        <h1 class="space-up-down">
          React y D3.js, trabajando juntos
        </h1>
        <div class="pulse-glow">
          <a target="_blank" class="bottom" href="https://fjcalzado.surge.sh">fjcalzado.surge.sh</a>
        </div>

        <!-- Notas -->
        <aside class="notes">
          Notas Aqui:
        </aside>

      </section>



      <!-- |GRUPO| Resumen Contenido -->
      <section>

        <!-- Slide - Introducción -->
        <section>
          <object class="fragment" data-fragment-index="1" data-autoslide="2000"
            type="image/svg+xml" data="media/react_logo.svg" height="180">React Logo</object>
          <svg class="fragment pulse-size" data-fragment-index="3" style="margin: 0 50px"
            height="160" viewbox="0 0 16 16">
            <path d="m417.59 527.35c-.653-.644-1.555-.965-2.707-.965-.319 0-.644.056-.976.167-.332.112-.64.262-.926.452-.285.189-.531.367-.737.533-.206.166-.401.343-.586.529-.185-.187-.381-.363-.586-.529-.206-.166-.451-.344-.737-.533-.285-.189-.594-.34-.926-.452-.332-.112-.657-.167-.976-.167-1.152 0-2.054.322-2.707.965-.653.644-.98 1.536-.98 2.678 0 .348.06.706.181 1.074.121.369.258.683.413.942.154.259.329.513.524.759.195.247.338.416.428.51.09.093.161.161.212.202l4.813 4.687c.093.094.206.14.339.14.134 0 .247-.047.339-.14l4.805-4.672c1.178-1.189 1.766-2.356 1.766-3.504 0-1.142-.327-2.035-.98-2.678" fill="#f11" transform="translate(-403.7-524.37)"/>
          </svg>
          <object class="fragment" data-fragment-index="2" data-autoslide="2000"
            type="image/svg+xml" data="media/d3_logo.svg" height="180">React Logo</object>

          <!-- Notas -->
          <aside class="notes">
              Notas Aqui:
          </aside>
        </section>

        <!-- Slide - Contenido -->
        <section>
          <h2>Contenido</h2>
          <ul>
            <li class="fragment"><a target="_blank" href="https://reactjs.org/">React</a></li>
            <li class="fragment"><a target="_blank" href="https://d3js.org/">D3.js</a></li>
            <li class="fragment">Problemática React + D3.js</li>
            <li class="fragment">Soluciones y ejemplos</li>
          </ul>

          <!-- Notas -->
          <aside class="notes">
              Notas Aqui:
          </aside>
        </section>

      </section>



      <!-- |GRUPO| React -->
      <section>

        <!-- Slide - React Intro -->
        <section>
          <div class="flex row center">
            <object type="image/svg+xml" data="media/react_logo.svg" height="75">React Logo</object>
            <h2 class="header-in-row">React</h2>
          </div>
          <ul>
            <li class="fragment">Construcción de Interfaces de Usuario</li>
            <li class="fragment">Componentes reusables</li>
            <li class="fragment">Declarativo, nos abstrae de modificar el DOM</li>
            <li class="fragment"><i>DOM Virtual</i></li>
          </ul>

          <!-- Notas -->
          <aside class="notes">
            <ul>
              <li>Librería tremendamente popular que nos permite construir interfaces de usuario.</li>
              <li>Basado en componentes: pequeños elementos funcionales (un botón, un input, etc) que gracias a la composición forman componentes más complejos.</li>
              <li>Declarativo, le decimos QUE queremos representar pero no COMO hacerlo, no hay que especificar cómo cambiar el DOM, React se encarga de eso por nosotros, nos abstrae de esa tarea.</li>
              <li>Una de sus claves de éxito (inmutabilidad, one way, etc), la que nos interesa, es el manejo eficiente del DOM que realiza gracias al DOM VIRTUAL. Mutaciones eficientes en el DOM Real.</li>
            </ul>
          </aside>
        </section>

        <!-- Slide - DOM Real vs DOM Virtual -->
        <section>
          <div class="flex row spaced">
            <div>
              <h3>DOM Real</h3>
              <ul>
                <li class="fragment">Navegador</li>
                <li class="fragment">Pesado</li>
                <li class="fragment">Cambios Costosos</li>
              </ul>
            </div>
            <div>
              <h3>DOM Virtual</h3>
              <ul>
                <li class="fragment">En Memoria</li>
                <li class="fragment">Ligero</li>
                <li class="fragment">Cambios Baratos</li>
              </ul>
            </div>
          </div>

          <!-- Notas -->
          <aside class="notes">
            <ul>
              <li>El DOM real esta ligado al navegador, es el documento que representa la página o aplicación que vemos en nuestro navegador.</li>
              <li>Es una entidad pesada, con una API grande a su alrededor</li>
              <li>Las actualizaciones del DOM son operaciones costosas para el navegador. Por tanto, mutar el DOM cada vez que el usuario interactúa con la UI puede ser ineficiente.</li>
              <li>En cambio el DOM virtual es una representación en memoria del DOM real.</li>
              <li>Es una entidad ligera y rápida</li>
              <li>Y los cambio son por tanto mucho más baratos</li>
            </ul>
          </aside>
        </section>

        <!-- Slide - Reconciliación -->
        <section>
          <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
            viewbox="0 0 960 560.5" style="enable-background:new 0 0 960 560.5;" xml:space="preserve">
            <style type="text/css">
              .svg-a-rule2{fill:#FCFCFD;}
              .svg-a-rule3{fill:#4F5565;}
              .svg-a-rule4{fill:#FFFFFF;}
              .svg-a-rule5{fill:#333842;}
              .svg-a-rule6{fill:#00D4EC;}
              .svg-a-rule7{font-family:'Montserrat';}
              .svg-a-rule8{font-size:38px;}
              .svg-a-rule10{fill:none;stroke:#FFFFFF;stroke-width:3;stroke-miterlimit:10;}
              .svg-a-rule11{fill:none;stroke:#FFFFFF;stroke-width:3;stroke-miterlimit:10;stroke-dasharray:11.8286,11.8286;}
              .svg-a-rule12{opacity:0.2!important;}
              .svg-a-rule13{fill:#00D4EC;stroke:#00D4EC;stroke-width:3;stroke-miterlimit:10;}
              .svg-a-rule14{fill:none;stroke:#00D4EC;stroke-width:5;stroke-miterlimit:10;}
              .svg-a-rule15{fill:#FF55F7;stroke:#FF55F7;stroke-width:5;stroke-miterlimit:10;}
              .svg-a-rule16{fill:#FF55F7;stroke:#FF55F7;stroke-width:3;stroke-miterlimit:10;}
              .svg-a-rule17{font-size:32px;}
              .svg-a-rule18{fill:#808080;stroke:#808080;stroke-width:3;stroke-miterlimit:10;}
              .svg-a-rule19{fill:#808080;stroke:#808080;stroke-width:5;stroke-miterlimit:10;}
            </style>
            <g id="UI">
              <g>
                <path class="svg-a-rule2" d="M26.2,233.3V362c0,3.5,2.8,6.3,6.3,6.3h174.7c3.5,0,6.3-2.8,6.3-6.3V233.3H26.2z"/>
                <path class="svg-a-rule3" d="M213.4,211.6c0-3.5-2.8-6.3-6.3-6.3H32.6c-3.5,0-6.3,2.8-6.3,6.3v21.5h187.2L213.4,211.6L213.4,211.6z"/>
                <circle class="svg-a-rule4" cx="44.8" cy="219.3" r="4.6"/>
                <circle class="svg-a-rule4" cx="60" cy="219.3" r="4.6"/>
                <circle class="svg-a-rule4" cx="75.1" cy="219.3" r="4.6"/>
                <path class="svg-a-rule5" d="M181,214.7H97.8c-2.4,0-4.6,2.1-4.6,4.6c0,2.4,2.1,4.6,4.6,4.6h83.4c2.4,0,4.6-2.1,4.6-4.6
                  C185.6,216.8,183.5,214.7,181,214.7z"/>
                <rect x="46.1" y="250.6" class="svg-a-rule6" width="48.3" height="100.1"/>
                <rect x="107.1" y="292.4" class="svg-a-rule6" width="86.6" height="58.4"/>
                <rect x="107.1" y="250.6" class="svg-a-rule6" width="86.6" height="27.3"/>
              </g>
            </g>
            <g id="Reconciliacion" class="fragment" data-fragment-index="2">
              <text transform="matrix(1 0 0 1 437.0545 538.8836)" class="svg-a-rule4 svg-a-rule7 svg-a-rule8">RECONCILIACIÓN</text>
              <g class="fragment" data-fragment-index="6">
                <path class="svg-a-rule4" d="M656.5,481.4l-0.1-17.2c-0.1-7.6-6.3-13.8-13.8-13.9l-19-0.2c-7.6-0.1-13.7,6-13.7,13.6l10.8,0.2
                  c1.1-2.2,3.7-3.5,6.4-3.4l12.1,0.2c3.8,0.1,6.9,3.2,6.9,7l0.1,10.3c0,3.8-3,6.8-6.8,6.8l-12.1-0.1c-2.6,0-5.4-1.5-6.6-3.6
                  l-10.6-0.1c0,7.6,6.2,13.8,13.8,13.9l18.9,0.2C650.4,495.1,656.5,489,656.5,481.4z"/>
                <path class="svg-a-rule4" d="M587.1,480.5c-1.2,2.1-4,3.5-6.6,3.5l-11.3-0.1c-3.9,0-7-3.2-7-7.1l-0.1-10.5c0-3.9,3.1-7,7-6.9l11.3,0.1
                  c2.7,0,5.4,1.4,6.6,3.7l11,0.1c-0.1-7.7-6.4-14.1-14.1-14.2l-18.3-0.2c-7.7-0.1-14,6.1-13.9,13.9l0.1,17.5
                  c0.1,7.7,6.4,14.1,14.1,14.2l18.3,0.2c7.7,0.1,14-6.1,13.9-13.8L587.1,480.5z"/>
                <path class="svg-a-rule4" d="M583.5,472c0,2.6,2.1,4.7,4.7,4.8l31.5,0.1c2.6,0,4.8-2.1,4.8-4.7s-2.1-4.7-4.7-4.7l-31.5-0.1
                  C585.7,467.3,583.5,469.4,583.5,472z"/>
              </g>
              <g>
                <g>
                  <line class="svg-a-rule10" x1="604" y1="439.9" x2="604" y2="433.9"/>
                  <line class="svg-a-rule11" x1="604" y1="422" x2="604" y2="25.8"/>
                  <line class="svg-a-rule10" x1="604" y1="19.9" x2="604" y2="13.9"/>
                </g>
              </g>
            </g>
            <g id="DOMVirtual">
              <g id="DOMVirtualPrevious" class="fragment svg-a-rule12" data-fragment-index="3">
                <circle class="svg-a-rule13" cx="429.3" cy="218.7" r="23.9"/>
                <circle class="svg-a-rule13" cx="364.6" cy="283.4" r="23.9"/>
                <line class="svg-a-rule14" x1="429.3" y1="218.7" x2="494" y2="283.4"/>
                <line class="svg-a-rule14" x1="429.3" y1="218.7" x2="363.7" y2="284.2"/>
                <circle class="svg-a-rule13" cx="299.8" cy="347.3" r="23.9"/>
                <circle class="svg-a-rule13" cx="429.3" cy="347.3" r="23.9"/>
                <line class="svg-a-rule14" x1="364.6" y1="282.6" x2="429.3" y2="347.3"/>
                <line class="svg-a-rule14" x1="364.6" y1="282.6" x2="299" y2="348.2"/>
                <circle class="svg-a-rule13" cx="494" cy="283.4" r="23.9"/>
                <path class="svg-a-rule14" d="M558.7,347.3"/>
                <path class="svg-a-rule14" d="M494,282.6"/>
              </g>
              <g id="DOMVirtualChange" class="fragment" data-fragment-index="1">
                <line class="svg-a-rule14" x1="475.2" y1="283.5" x2="539.9" y2="348.2"/>
                <circle class="svg-a-rule13" cx="539.9" cy="348.2" r="23.9"/>
              </g>
              <g id="DOMVirtualDelta" class="fragment" data-fragment-index="4">
                <line class="svg-a-rule15" x1="475.2" y1="283.5" x2="539.9" y2="348.2"/>
                <circle class="svg-a-rule16" cx="539.9" cy="348.2" r="23.9"/>
              </g>
              <g id="DOMVirtualCurrent">
                <circle class="svg-a-rule13" cx="410.5" cy="219.6" r="23.9"/>
                <circle class="svg-a-rule13" cx="345.8" cy="284.3" r="23.9"/>
                <line class="svg-a-rule14" x1="410.5" y1="219.6" x2="475.2" y2="284.3"/>
                <line class="svg-a-rule14" x1="410.5" y1="219.6" x2="344.9" y2="285.1"/>
                <circle class="svg-a-rule13" cx="281" cy="348.2" r="23.9"/>
                <circle class="svg-a-rule13" cx="410.5" cy="348.2" r="23.9"/>
                <line class="svg-a-rule14" x1="345.8" y1="283.5" x2="410.5" y2="348.2"/>
                <line class="svg-a-rule14" x1="345.8" y1="283.5" x2="280.2" y2="349.1"/>
                <circle class="svg-a-rule13" cx="475.2" cy="284.3" r="23.9"/>
              </g>
              <text id="DOMVirtualText" transform="matrix(1 0 0 1 315.8565 108.3565)" class="svg-a-rule4 svg-a-rule7 svg-a-rule17">DOM Virtual</text>
            </g>
            <g id="DOMReal">
              <g id="DOMRealChange" class="fragment" data-fragment-index="5">
                <line class="svg-a-rule15" x1="855.5" y1="286.3" x2="920.2" y2="351"/>
                <circle class="svg-a-rule16" cx="920.2" cy="351" r="23.9"/>
              </g>
              <g id="DOMRealTree">
                <circle class="svg-a-rule18" cx="790.8" cy="220.8" r="23.9"/>
                <circle class="svg-a-rule18" cx="726.1" cy="285.5" r="23.9"/>
                <line class="svg-a-rule19" x1="790.8" y1="220.8" x2="855.5" y2="285.5"/>
                <line class="svg-a-rule19" x1="790.8" y1="220.8" x2="725.2" y2="286.3"/>
                <circle class="svg-a-rule18" cx="661.3" cy="349.4" r="23.9"/>
                <circle class="svg-a-rule18" cx="790.8" cy="349.4" r="23.9"/>
                <line class="svg-a-rule19" x1="726.1" y1="284.7" x2="790.8" y2="349.4"/>
                <line class="svg-a-rule19" x1="726.1" y1="284.7" x2="660.5" y2="350.3"/>
                <circle class="svg-a-rule18" cx="855.5" cy="285.5" r="23.9"/>
              </g>
              <text id="DOMRealText" transform="matrix(1 0 0 1 706.8565 108.3565)" class="svg-a-rule4 svg-a-rule7 svg-a-rule17">DOM Real</text>
            </g>
          </svg>

          <!-- Notas -->
          <aside class="notes">
            <ul>
              <li>Todos los cambios que generan nuestros componentes react, ya sea por cambios de propiedades o de estado, van a parar al DOM Virtual</li>
              <li>Los cambios se aglutinan en el DOM virtual, se consolidan allí ya que es rápido y barato. Pero no promocionan directamente al DOM real.</li>
              <li>Es React quien determina cuando se debe actualizar el DOM Real y en un proceso llamado <b>reconciliación</b>, un algoritmo DIFF evalúa la diferencia entre el árbol virtual actual y una versión anterior, y también la compara con el DOM real.</li>
              <li>De este modo, se genera una delta que determina con precisión qué debe modificarse en el DOM real, con una granularidad muy fina</li>
              <li>Gracias a la reconciliación, los cambios se propagan al DOM real de manera eficiente, ya que se hacen en 'batch', con el mínimo número de operaciones posible.</li>
              <li>Este proceso de reconciliación, por tanto, sirve como mecanismo de sincronización entre ambos mundos.</li>
              <li>En RESUMEN: <b>React gestiona los cambios en el DOM y lo mantiene actualizado por nosotros de forma eficiente</b></li>
            </ul>
          </aside>
        </section>

      </section>



      <!-- |GRUPO| D3.js -->
      <section>

        <!-- Slide - D3.js Intro -->
        <section>
          <div class="flex row center">
            <object type="image/svg+xml" data="media/d3_logo.svg" height="75">D3.js Logo</object>
            <h2 class="header-in-row">D3.js</h2>
          </div>
          <ul>
            <li class="fragment">Visualización de datos</li>
            <li class="fragment">API de bajo nivel. Potencia. Flexibilidad.</li>
            <li class="fragment">Declarativo, nos abstrae de modificar el DOM</li>
            <li class="fragment"><i>Data Joins</i>, uniones entre datos y elementos</li>
            <li class="fragment">Tiempo real | Animaciones | Interactividad</li>
          </ul>

          <!-- Notas -->
          <aside class="notes">
            <ul>
              <li>D3.js es un framework, o librería, para la visualización interactiva de datos. Data-Drive-Documents. Al igual que React, es tremendamente popular y se ha convertido en la referencia de facto en este terreno.</li>
              <li>Está conformado por una API de bajo nivel lo que lo hace tremendamente potente y flexible. Es el secreto de su éxito. No es una librería de gráficos pre-hechos, enlatados. Aqui hay que picar, en cambio el límite es la creatividad de cada uno.</li>
              <li>También es declarativo, nos abstrae del DOM. El se encargará de los cambios pertinentes, nosotros le indicamos QUE queremos representar. ¿Nos suena, verdad?</li>
              <li>El mecanismo principal de D3, su core, son las uniones de datos o DATA JOINS. Nos permite establecer literalmente vinculos entre los datos que queremos representar y los elementos gráficos que van a representarlos.</li>
              <li>Al estar datos y elementos vinculado, la visualización no tiene porque ser estática sino que puede responder a los cambios en los datos. Además, admite animaciones, interactividad, etc.</li>
            </ul>
          </aside>
        </section>

        <!-- Slide - Data Joins -->
        <section>
          <h2><i>Data Joins</i></h2>
          <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
           height="600" viewbox="0 0 960 700" style="enable-background:new 0 0 960 700;" xml:space="preserve">
          <defs>
            <style type="text/css">
              .svg-b-rule2{fill:#20232A;}
              .svg-b-rule3{fill:#4F5565;}
              .svg-b-rule4{fill:#FFFFFF;}
              .svg-b-rule5{fill:#22B573;}
              .svg-b-rule6{fill:#006837;}
              .svg-b-rule7{fill:none;stroke:#006837;stroke-width:8;stroke-miterlimit:10;}
              .svg-b-rule8{fill:none;stroke:#B7B7B7;stroke-width:4;stroke-linecap:round;stroke-miterlimit:10;}
              .svg-b-rule9{fill:#00D4EC;stroke:#007E84;stroke-width:4;stroke-linecap:round;stroke-miterlimit:10;}
              .svg-b-rule10{font-family:'Montserrat';}
              .svg-b-rule11{font-size:38px;}
              .svg-b-rule12{fill:#F7D9B0;}
              .svg-b-rule13{fill:#FBB03B;}
              .svg-b-rule14{fill:none;stroke:#F7931E;stroke-width:5;stroke-miterlimit:10;}
              .svg-b-rule15{fill:#FF55F7;stroke:#913391;stroke-width:4;stroke-linecap:round;stroke-miterlimit:10;}
              .svg-b-rule16{fill:#EA6A73;}
              .svg-b-rule17{fill:#C1272D;}
              .svg-b-rule18{fill:none;stroke:#C1272D;stroke-width:8;stroke-miterlimit:10;}
              .svg-b-rule19{fill:none;stroke:#9BAAC9;stroke-width:4;stroke-linecap:round;stroke-miterlimit:10;stroke-dasharray:12.1659,12.1659;}
            </style>
          </defs>
          <g id="Enter" class="fragment" data-fragment-index="1">
            <g id="Tabla_1">
              <path class="svg-b-rule3" d="M281.7,67.3c0-3.3-2.7-5.9-6-5.9H109.9c-3.3,0-5.9,2.7-5.9,5.9v20.4h177.8L281.7,67.3L281.7,67.3z"/>
              <g>
                <rect x="104.4" y="88.4" class="svg-b-rule4" width="176.9" height="28.3"/>
                <path class="svg-b-rule3" d="M280.8,88.9v27.3H104.9V88.9H280.8 M281.8,87.9H103.9v29.3h177.9V87.9L281.8,87.9z"/>
              </g>
              <g>
                <path class="svg-b-rule4" d="M109.9,171.6c-3,0-5.5-2.5-5.5-5.5v-22.8h176.9v22.8c0,3-2.5,5.5-5.5,5.5H109.9z"/>
                <path class="svg-b-rule3" d="M280.8,143.9v22.3c0,2.8-2.2,5-5,5H109.9c-2.8,0-5-2.2-5-5v-22.3H280.8 M281.8,142.9H103.9v23.3
                  c0,3.3,2.7,6,6,6h165.9c3.3,0,6-2.7,6-6V142.9L281.8,142.9z"/>
              </g>
              <g>
                <rect x="118.6" y="112.6" class="svg-b-rule5" width="173.9" height="34"/>
                <path class="svg-b-rule6" d="M290.5,114.6v30H120.6v-30H290.5 M294.5,110.6H116.6v38h177.9V110.6L294.5,110.6z"/>
              </g>
              <g>
                <g>
                  <line class="svg-b-rule7" x1="89.7" y1="118.5" x2="89.7" y2="142.3"/>
                </g>
                <line class="svg-b-rule7" x1="77.7" y1="130.4" x2="101.7" y2="130.4"/>
              </g>
            </g>
            <g id="Flecha_1">
              <line class="svg-b-rule8" x1="384.7" y1="118.5" x2="632.7" y2="118.5"/>
              <line class="svg-b-rule8" x1="632.7" y1="118.5" x2="614.9" y2="100.7"/>
              <line class="svg-b-rule8" x1="614.9" y1="136.3" x2="632.7" y2="118.5"/>
            </g>
            <circle id="Circulo_1" class="svg-b-rule9" cx="786.3" cy="118.5" r="42.5"/>
          </g>
          <g id="Update" class="fragment" data-fragment-index="2">
            <g id="Tabla_2">
              <path class="svg-b-rule3" d="M281.7,289.8c0-3.3-2.7-5.9-6-5.9H109.9c-3.3,0-5.9,2.7-5.9,5.9v20.4h177.8L281.7,289.8L281.7,289.8z"/>
              <g>
                <rect x="104.4" y="310.9" class="svg-b-rule4" width="176.9" height="28.3"/>
                <path class="svg-b-rule3" d="M280.8,311.4v27.3H104.9v-27.3H280.8 M281.8,310.4H103.9v29.3h177.9V310.4L281.8,310.4z"/>
              </g>
              <g>
                <path class="svg-b-rule4" d="M109.9,394.1c-3,0-5.5-2.5-5.5-5.5v-22.8h176.9v22.8c0,3-2.5,5.5-5.5,5.5H109.9z"/>
                <path class="svg-b-rule3" d="M280.8,366.4v22.3c0,2.8-2.2,5-5,5H109.9c-2.8,0-5-2.2-5-5v-22.3H280.8 M281.8,365.4H103.9v23.3
                  c0,3.3,2.7,6,6,6h165.9c3.3,0,6-2.7,6-6V365.4L281.8,365.4z"/>
              </g>
              <g>
                <rect x="96.5" y="335.1" class="svg-b-rule12" width="190" height="34"/>
                <path class="svg-b-rule13" d="M284.5,337.1v30h-186v-30H284.5 M288.5,333.1h-194v38h194V333.1L288.5,333.1z"/>
              </g>
              <g>
                <line class="svg-b-rule14" x1="110.7" y1="351.9" x2="134.7" y2="351.9"/>
                <line class="svg-b-rule14" x1="114" y1="360.5" x2="131" y2="343.5"/>
                <line class="svg-b-rule14" x1="122.8" y1="364.1" x2="122.8" y2="340.1"/>
                <line class="svg-b-rule14" x1="131.2" y1="360.5" x2="114.3" y2="343.6"/>
              </g>
            </g>
            <g id="Flecha_2">
              <line class="svg-b-rule8" x1="384.7" y1="341" x2="632.7" y2="341"/>
              <line class="svg-b-rule8" x1="632.7" y1="341" x2="614.9" y2="323.2"/>
              <line class="svg-b-rule8" x1="614.9" y1="358.8" x2="632.7" y2="341"/>
            </g>
            <circle id="Circulo_2" class="svg-b-rule15" cx="786.3" cy="341" r="65.8"/>
          </g>
          <g id="Exit" class="fragment" data-fragment-index="3">
            <g id="Tabla_3">
              <path class="svg-b-rule3" d="M281.7,510.8c0-3.3-2.7-5.9-6-5.9H109.9c-3.3,0-5.9,2.7-5.9,5.9v20.4h177.8L281.7,510.8L281.7,510.8z"/>
              <g>
                <rect x="104.4" y="531.9" class="svg-b-rule4" width="176.9" height="28.3"/>
                <path class="svg-b-rule3" d="M280.8,532.4v27.3H104.9v-27.3H280.8 M281.8,531.4H103.9v29.3h177.9V531.4L281.8,531.4z"/>
              </g>
              <g>
                <path class="svg-b-rule4" d="M109.9,615.1c-3,0-5.5-2.5-5.5-5.5v-22.8h176.9v22.8c0,3-2.5,5.5-5.5,5.5H109.9z"/>
                <path class="svg-b-rule3" d="M280.8,587.4v22.3c0,2.8-2.2,5-5,5H109.9c-2.8,0-5-2.2-5-5v-22.3H280.8 M281.8,586.4H103.9v23.3
                  c0,3.3,2.7,6,6,6h165.9c3.3,0,6-2.7,6-6V586.4L281.8,586.4z"/>
              </g>
              <g>
                <rect x="90.6" y="556.1" class="svg-b-rule16" width="173.9" height="34"/>
                <path class="svg-b-rule17" d="M262.5,558.1v30H92.6v-30H262.5 M266.5,554.1H88.6v38h177.9V554.1L266.5,554.1z"/>
              </g>
              <g>
                <line class="svg-b-rule18" x1="279.7" y1="573.9" x2="303.7" y2="573.9"/>
              </g>
            </g>
            <g id="Flecha_3">
              <line class="svg-b-rule8" x1="384.7" y1="562" x2="632.7" y2="562"/>
              <line class="svg-b-rule8" x1="632.7" y1="562" x2="614.9" y2="544.2"/>
              <line class="svg-b-rule8" x1="614.9" y1="579.8" x2="632.7" y2="562"/>
            </g>
            <g id="Circulo_3">
                <ellipse transform="matrix(0.7071 -0.7071 0.7071 0.7071 -167.0898 720.6096)" class="svg-b-rule19" cx="786.3" cy="562" rx="65.8" ry="65.8"/>
            </g>
          </g>
          <g id="Textos" class="fragment" data-fragment-index="4">
            <text transform="matrix(1 0 0 1 458.5232 198.0232)" class="svg-b-rule4 svg-b-rule10 svg-b-rule11">Enter</text>
            <text transform="matrix(1 0 0 1 436.8565 422.6898)" class="svg-b-rule4 svg-b-rule10 svg-b-rule11">Update</text>
            <text transform="matrix(1 0 0 1 465.5233 641.3565)" class="svg-b-rule4 svg-b-rule10 svg-b-rule11">Exit</text>
          </g>
          </svg>

          <!-- Notas -->
          <aside class="notes">
            <ul>
              <li>Vamos a hacer un ejercicio mental muy sencillo para entender rápidamente las uniones de datos.</li>
              <li>Imaginemos que tenemos una tabla de paises con datos como por ejemplo, número de habitantes, renta per cápita, esperanza de vida, etc.</li>
              <li>Si quisieramos representar estos datos gráficamente, lo primero que pensaríamos sería: por cada fila, es decir por cada pais, voy a pintar un círculo por ejemplo.</li>
              <li>El tamaño de ese círculo vendrá dado por el número de habitantes. El color, por el continente al que pertenece.</li>
              <li>Finalmente su posición vendrá dada por su riqueza, los paises más ricos hacia la derecha, los más saludables (esperanza de vida) hacia arriba.</li>
              <li>COROLARIO: Hemos asociado cada fila de la tabla, cada pais, a un círculo (que es el elemento que va a representarlo en el gráfico). Y hemos dado forma, color y posición a ese círculo según los datos.</li>
              <li>
                Esta es la forma en la que se trabaja en D3.js, y los 3 escenarios representados son intencionados ya que D3 distingue entre estas 3 circunstancias entro de un data join:
                <ul>
                  <li>Nuevos datos se vinculan a nuevos elementos. Se le conoce como sub-grupo ENTER.</li>
                  <li>Cuando un dato se modifica, también lo hará el elemento asociado. Sub-grupo UPDATE.</li>
                  <li>Datos eliminados generan elementos huérfanos, que por lo general acaban siendo borrados del gráfico. Sub-grupo EXIT.</li>
                </ul>
              </li>
              <li>A esto se le conoce como patrón ENTER-UPDATE-EXIT.</li>

            </ul>
          </aside>
        </section>

        <!-- Slide - Selecciones -->
        <section>
          <h2>Selecciones</h2>
            <pre><code class="code-area js" data-trim="true" data-noescape="true">
              const paises = [...];
              const circulos = chart.selectAll("circle")
                .data(paises)
                .enter()
                .append("circle")
                  .attr("cx", pais => xScale(pais.poderAdquisitivo))
                  .attr("cy", pais => yScale(pais.esperanzaVida))
                  .attr("r", pais => areaScale(pais.habitantes))
                  .attr("fill", pais => color(pais.continente));
            </code></pre>

            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="800" height="120"
              class="fragment smallfont" style="margin-top: 2rem;">
              <defs>
                <style>
                  .smallfont {font: 10px sans-serif;}
                  .join,.link,.node rect {fill: none;stroke-width: 1.5px;}
                  .link {stroke: #969696;}
                  .node rect {fill: white;}
                  .node .element rect {fill: #bdbdbd;stroke: none;}
                  .node .datum rect {fill: #d9d9d9;stroke: none;}
                  .node .key rect {fill: #00eccc;stroke: none;}
                  .node .key rect:hover {fill: #ff55f7;}
                  .link .to-key,.join {stroke: #00eccc;}
                  .join {stroke-dasharray: 2, 2;}
                  .link .from-data {stroke: #ff55f7;}
                  .link .from-selection {stroke: #ff55f7;}
                </style>
              </defs>
              <g class="left" transform="translate(40,0)">
                <g class="link">
                  <path class="to-array from-selection" d="M51.4677734375,60C75.73388671875,60 75.73388671875,60 100,60"></path>
                  <path class="to-element from-array" d="M137.576171875,60C168.7880859375,60 168.7880859375,12 200,12"></path>
                  <path class="to-element from-array" d="M137.576171875,60C168.7880859375,60 168.7880859375,36 200,36"></path>
                  <path class="to-element from-array" d="M137.576171875,60C168.7880859375,60 168.7880859375,60 200,60"></path>
                  <path class="to-element from-array" d="M137.576171875,60C168.7880859375,60 168.7880859375,84 200,84"></path>
                  <path class="to-element from-array" d="M137.576171875,60C168.7880859375,60 168.7880859375,108 200,108"></path>
                  <path class="to-key from-element" d="M247.576171875,12C273.7880859375,12 273.7880859375,12 300,12"></path>
                  <path class="to-key from-element" d="M247.576171875,36C273.7880859375,36 273.7880859375,36 300,36"></path>
                  <path class="to-key from-element" d="M247.576171875,60C273.7880859375,60 273.7880859375,60 300,60"></path>
                  <path class="to-key from-element" d="M247.576171875,84C273.7880859375,84 273.7880859375,84 300,84"></path>
                  <path class="to-key from-element" d="M247.576171875,108C273.7880859375,108 273.7880859375,108 300,108"></path>
                </g>
                <g class="node">
                  <g class="selection" transform="translate(0,60)">
                    <rect ry="6" rx="6" y="-10" height="20" width="51.4677734375"></rect>
                    <text dy=".35em" x="6">selection</text>
                  </g>
                  <g class="array" transform="translate(100,60)">
                    <rect ry="6" rx="6" y="-10" height="20" width="37.576171875"></rect>
                    <text dy=".35em" x="6">group</text>
                  </g>
                  <g class="element" transform="translate(200,12)">
                    <rect ry="6" rx="6" y="-10" height="20" width="47.576171875"></rect>
                    <text dy=".35em" x="6">element</text>
                  </g>
                  <g class="key" transform="translate(300,12)">
                    <rect ry="6" rx="6" y="-10" height="20" width="32"></rect>
                    <path class="join" d="M32,0C60,0 60,48 88,48"></path>
                    <text dy=".35em" x="6">A</text>
                  </g>
                  <g class="element" transform="translate(200,36)">
                    <rect ry="6" rx="6" y="-10" height="20" width="47.576171875"></rect>
                    <text dy=".35em" x="6">element</text>
                  </g>
                  <g class="key" transform="translate(300,36)">
                    <rect ry="6" rx="6" y="-10" height="20" width="32"></rect>
                    <text dy=".35em" x="6">B</text>
                  </g>
                  <g class="element" transform="translate(200,60)">
                    <rect ry="6" rx="6" y="-10" height="20" width="47.576171875"></rect>
                    <text dy=".35em" x="6">element</text>
                  </g>
                  <g class="key" transform="translate(300,60)">
                    <rect ry="6" rx="6" y="-10" height="20" width="32"></rect>
                    <text dy=".35em" x="6">C</text>
                  </g>
                  <g class="element" transform="translate(200,84)">
                    <rect ry="6" rx="6" y="-10" height="20" width="47.576171875"></rect>
                    <text dy=".35em" x="6">element</text>
                  </g>
                  <g class="key" transform="translate(300,84)">
                    <rect ry="6" rx="6" y="-10" height="20" width="32"></rect>
                    <text dy=".35em" x="6">D</text>
                  </g>
                  <g class="element" transform="translate(200,108)">
                    <rect ry="6" rx="6" y="-10" height="20" width="47.576171875"></rect>
                    <text dy=".35em" x="6">element</text>
                  </g>
                  <g class="key" transform="translate(300,108)">
                    <rect ry="6" rx="6" y="-10" height="20" width="32"></rect>
                    <path class="join" d="M32,0C60,0 60,-72 88,-72"></path>
                    <text dy=".35em" x="6">E</text>
                  </g>
                </g>
              </g>
              <g class="right" transform="translate(760,0)">
                <g class="link">
                  <path class="to-array from-data" d="M-32,60C-66,60 -66,60 -100,60"></path>
                  <path class="to-datum from-array" d="M-134.783203125,60C-167.3916015625,60 -167.3916015625,12 -200,12"></path>
                  <path class="to-datum from-array" d="M-134.783203125,60C-167.3916015625,60 -167.3916015625,36 -200,36"></path>
                  <path class="to-datum from-array" d="M-134.783203125,60C-167.3916015625,60 -167.3916015625,60 -200,60"></path>
                  <path class="to-datum from-array" d="M-134.783203125,60C-167.3916015625,60 -167.3916015625,84 -200,84"></path>
                  <path class="to-datum from-array" d="M-134.783203125,60C-167.3916015625,60 -167.3916015625,108 -200,108"></path>
                  <path class="to-key from-datum" d="M-232,12C-266,12 -266,12 -300,12"></path>
                  <path class="to-key from-datum" d="M-232,36C-266,36 -266,36 -300,36"></path>
                  <path class="to-key from-datum" d="M-232,60C-266,60 -266,60 -300,60"></path>
                  <path class="to-key from-datum" d="M-232,84C-266,84 -266,84 -300,84"></path>
                  <path class="to-key from-datum" d="M-232,108C-266,108 -266,108 -300,108"></path>
                </g>
                <g class="node">
                  <g class="data" transform="translate(0,60)">
                    <rect ry="6" rx="6" y="-10" height="20" width="32" x="-32"></rect>
                    <text dy=".35em" x="-26">data</text>
                  </g>
                  <g class="array" transform="translate(-100,60)">
                    <rect ry="6" rx="6" y="-10" height="20" width="34.783203125" x="-34.783203125"></rect>
                    <text dy=".35em" x="-28.783203125">array</text>
                  </g>
                  <g class="datum" transform="translate(-200,12)">
                    <rect ry="6" rx="6" y="-10" height="20" width="32" x="-32"></rect>
                    <text dy=".35em" x="-26">Y</text>
                  </g>
                  <g class="key" transform="translate(-300,12)">
                    <rect ry="6" rx="6" y="-10" height="20" width="32" x="-32"></rect>
                    <text dy=".35em" x="-26">Y</text>
                  </g>
                  <g class="datum" transform="translate(-200,36)">
                    <rect ry="6" rx="6" y="-10" height="20" width="32" x="-32"></rect>
                    <text dy=".35em" x="-26">E</text>
                  </g>
                  <g class="key" transform="translate(-300,36)">
                    <rect ry="6" rx="6" y="-10" height="20" width="32" x="-32"></rect>
                    <text dy=".35em" x="-26">E</text>
                  </g>
                  <g class="datum" transform="translate(-200,60)">
                    <rect ry="6" rx="6" y="-10" height="20" width="32" x="-32"></rect>
                    <text dy=".35em" x="-26">A</text>
                  </g>
                  <g class="key" transform="translate(-300,60)">
                    <rect ry="6" rx="6" y="-10" height="20" width="32" x="-32"></rect>
                    <text dy=".35em" x="-26">A</text>
                  </g>
                  <g class="datum" transform="translate(-200,84)">
                    <rect ry="6" rx="6" y="-10" height="20" width="32" x="-32"></rect>
                    <text dy=".35em" x="-26">O</text>
                  </g>
                  <g class="key" transform="translate(-300,84)">
                    <rect ry="6" rx="6" y="-10" height="20" width="32" x="-32"></rect>
                    <text dy=".35em" x="-26">O</text>
                  </g>
                  <g class="datum" transform="translate(-200,108)">
                    <rect ry="6" rx="6" y="-10" height="20" width="32" x="-32"></rect>
                    <text dy=".35em" x="-26">I</text>
                  </g>
                  <g class="key" transform="translate(-300,108)">
                    <rect ry="6" rx="6" y="-10" height="20" width="32" x="-32"></rect>
                    <text dy=".35em" x="-26">I</text>
                  </g>
                </g>
              </g>
            </svg>

          <!-- Notas -->
          <aside class="notes">
            <ul>
              <li>¿Cómo se expresan o aplican las uniones de datos en código? Mediantes las selecciones. El core de D3.js incorpora funcionalidad para seleccionar elementos del DOM, muy al estilo de JQuery.</li>
              <li>En primer lugar, seleccionamos todos los elementos de tipo círculo. D3 es compatible con los selectores de css que conocemos.</li>
              <li>A continuación establecemos el data join, vinculamos los datos a nuestros elementos seleccionados. Se hace con el método data(). Los datos siempre serán un array, cada item del array se vincula a un elemento mediante una función de mapeo que por defecto es el índice.</li>
              <li>Por último operamos sobre el sub-grupo que nos interesa, enter, exit o update. En nuestro caso, añadimos (append) un elemento círculo por cada pais.</li>
              <li>A la selección establecida vamos aplicando las propiedades para darle una posición, tamaño y color en función de los datos del pais.</li>
              <li>COROLARIO: (gráfico bostock) Con este ejemplo lo que pretendía ilustrar es que D3 cuenta con un potente mecanismo, los data joins, para gestionar el DOM por nosotros. ¿nos suena verdad?</li>
              <li>En el fondo, estas uniones entre datos y elementos sirven como algoritmo diff mediante el cual evaluar que parte del DOM hay que mutar, y gracias al patrón enter-update-exit, actuar de un modo u otro. Asi se puede ser mucho más preciso y eficiente.</li>
            </ul>
          </aside>
        </section>

        <!-- Slide - Sample -->
        <section>
          <div id="sample-countries" class="flex row center"></div>
          <a style="font-size:1.8rem" target="_blank" href="https://github.com/fjcalzado/DemoSeries-D3JS-Bubble-Chart">Github</a>

          <!-- Notas -->
          <aside class="notes">
            <ul>
              <li>Por si teníais curiosidad, aqui tenéis el ejemplo anterior implementado con D3 de verdad.</li>
              <li>En este caso sólo se ha operado sobre el sub-grupo ENTER, es decir, sólo se añaden nuevos círculos con cada pais en la lista, ya que los datos son estáticos, no van a cambiar.</li>
              <li>No obstante si que se han añadido eventos para mostrar un popup animado, etc, para que veáis que D3 permite interacción con los elementos.</li>
            </ul>
          </aside>
        </section>

      </section>



      <!-- |GRUPO| Pugna por el DOM -->
      <section>

        <!-- Slide - Qué Sucederá -->
        <section>
          <div class="flex row spaced">
            <object type="image/svg+xml" data="media/react_logo.svg" height="100">React Logo</object>
            <svg class="fragment" data-fragment-index="1" width="100" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 252 39.51">
              <defs>
                <style>
                  .flecha{fill:none;stroke:#b7b7b7;stroke-linecap:round;stroke-miterlimit:10;stroke-width:4px;}
                </style>
              </defs>
              <g id="Flecha_4">
                <line class="flecha" x1="2" y1="19.76" x2="250" y2="19.76"/>
                <line class="flecha" x1="250" y1="19.76" x2="232.24" y2="2"/>
                <line class="flecha" x1="232.24" y1="37.51" x2="250" y2="19.76"/>
              </g>
            </svg>
            <h2 style="margin:0;padding:15px;border:2px solid white;border-radius:10px;">DOM</h2>
            <svg class="fragment" data-fragment-index="1" style="transform:rotate(180deg)" width="100" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 252 39.51">
              <defs>
                <style>
                  .flecha{fill:none;stroke:#b7b7b7;stroke-linecap:round;stroke-miterlimit:10;stroke-width:4px;}
                </style>
              </defs>
              <g id="Flecha_5">
                <line class="flecha" x1="2" y1="19.76" x2="250" y2="19.76"/>
                <line class="flecha" x1="250" y1="19.76" x2="232.24" y2="2"/>
                <line class="flecha" x1="232.24" y1="37.51" x2="250" y2="19.76"/>
              </g>
            </svg>
            <object type="image/svg+xml" data="media/d3_logo.svg" height="100">React Logo</object>
          </div>

          <!-- Notas -->
          <aside class="notes">
            <ul>
              <li>Resumen de lo visto hasta ahora en 1 frase: Tanto React como D3 tienen en común la gestión eficiente del DOM. En el caso de React mediante el DOM virtual, y en el caso de D3 gracias a las selecciones, los data joins y el patrón enter-update-exit.</li>
              <li>Pero ambos van a controlar el DOM real por nosotros.</li>
              <li>¿Qué pensáis que sucederá entonces si los ponemos a trabajar juntos? ¿Lo adivináis? Ya os lo digo yo ...</li>
            </ul>
          </aside>
        </section>

        <!-- Slide - A tortas -->
        <section data-background="./media/fight.gif">
          <h2 class="text-shadow">¡A tortas por el DOM!</h2>

          <aside class="notes">
            <ul>
              <li>Vale si, he dramatizado un poco. Igual no es tan violento. Pero desde luego vamos a tener problemas, y para ilustrarlo veamos el siguiente ejemplo.</li>
            </ul>
          </aside>
        </section>

        <!-- Slide - Test de colisión -->
        <section>
          <h2 style="margin-bottom:40px">Test de colisión</h2>
          <div id="sample-collision" class="flex row center"></div>

          <aside class="notes">
            <ul>
              <li>Simple aplicación (real, no es un mock ni nada de eso) que reproduce el problema</li>
              <li>Consiste en un contenedor de React con 3 componentes, 2 botones y un div</li>
              <li>Cada botón modificará el DIV</li>
              <li>El de la izquierda lo hará siguiendo el flujo habitual de React, via cambio de propiedades.</li>
              <li>El de la derecha, sin embargo, instancia a D3 para que modifique el nodo target, mutando directamente el DOM.</li>
              <li>Veamos que sucede:
                <ul>
                  <li>Primero React, todo funciona como esperamos</li>
                  <li>Ahora el turno de D3. Funciona también, hemos cambiado el color y texto del target como era esperable. Pero este cambio tiene consecuencias. Hemos mutado el DOM.</li>
                  <li>¿Que pasará si clico de nuevo en React? Ha dejado de funcionar.</li>
                  <li><b>Hemos perdido la sincronicidad entre DOM virtual y real</b></li>
                  <li>El cambio ha podido propagarse hasta el DOM virtual pero al aplicar el DIFF se comparará con la versión anterior del DOM virtual y también con el propio DOM real, que sin embargo ha mutado. El nodo que React esperaba encontrarse en el DOM real ya no es el mismo</li>
                </ul>
              </li>
            </ul>
          </aside>
        </section>

      </section>



      <!-- Slide - Soluciones -->
      <section>
        <h2>Soluciones</h2>

        <aside class="notes">
          <ul>
            <li>Ya conocemos el problema, veamos las soluciones que tenemos.</li>
            <li>A continuación os mostraré distintas alternativas y algunas de sus variantes.</li>
            <li>Plantearemos en qué consiste cada solución, veremos código en React a modo de plantilla para cada solución y también os enseñaré ejemplos reales implementados de esa manera.</li>
          </ul>
        </aside>
      </section>


      <!-- |GRUPO| 1 DOM compartido pero no solapado -->
      <section>

        <!-- Slide - Titulo Intro -->
        <section>
          <h3>DOM compartido</h3>
          <p>Juntos pero no revueltos</p>

          <aside class="notes">
            <ul>
              <li>Primera solución, DOM compartido</li>
              <li>Consiste compartir el DOM de modo que las 2 librerías tengan su espacio para trabajar pero sin solaparse, marcando la frontera clara entre una y otra.</li>
              <li>Por eso lo he llamado Juntos pero no Revueltos. React renderizará la mayor parte de nuestra app excepto la visualización de datos o gráficos que será cosa de D3.js</li>
              <li>¿Cómo conseguimos esto?</li>
            </ul>
          </aside>
        </section>

        <!-- Slide - En que consiste la solución -->
        <section>
          <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
           viewbox="0 0 900 425.8" style="enable-background:new 0 0 900 425.8;" xml:space="preserve">
            <style type="text/css">
              .svg-c-rule0{fill:none;}
              .svg-c-rule1{fill:none;stroke:#20232A;stroke-width:6;}
              .svg-c-rule2{display:none;}
              .svg-c-rule3{display:inline;fill:#20232A;}
              .svg-c-rule4{fill:#00D4EC;fill-opacity:0.2;}
              .svg-c-rule5{opacity:0.2;fill:#F68E48;}
              .svg-c-rule6{fill:#b4b4b4;}
              .svg-c-rule7{font-family:'Montserrat';}
              .svg-c-rule8{font-size:32px;}
              .svg-c-rule9{fill:#F68E48;stroke:#F68E48;stroke-width:3;stroke-miterlimit:10;}
              .svg-c-rule10{font-size:38px;}
              .svg-c-rule11{fill:none;stroke:#AAAAAA;stroke-width:3;stroke-miterlimit:10;stroke-dasharray:11.829,11.8286;}
              .svg-c-rule12{fill:none;stroke:#F68E48;stroke-miterlimit:10;}
              .svg-c-rule13{fill:none;stroke:#F68E48;stroke-width:5;stroke-miterlimit:10;}
              .svg-c-rule14{fill:#7F7F7F;stroke:#7F7F7F;stroke-width:3;stroke-miterlimit:10;}
              .svg-c-rule15{fill:#7F7F7F;stroke:#7F7F7F;stroke-width:5;stroke-miterlimit:10;}
              .svg-c-rule16{fill:#FFFFFF;}
              .svg-c-rule18{fill:white;stroke:#7F7F7F;stroke-width:5;stroke-miterlimit:10;}
              .svg-c-rule19{fill:#00D4EC;stroke:#00D4EC;stroke-width:3;stroke-miterlimit:10;}
              .svg-c-rule20{fill:#00D4EC;stroke:#00D4EC;stroke-width:5;stroke-miterlimit:10;}
              .svg-c-rule23{fill:white;stroke:#00D4EC;stroke-width:5;stroke-miterlimit:10;}
              .svg-c-rule24{fill:#20232A;}
              .svg-c-rule25{font-size:21px;}
            </style>
            <g>
              <polygon class="svg-c-rule4" points="658.5,207.4 658.5,85.4 48.5,85.4 48.5,323 542.9,323 	"/>
              <polygon class="svg-c-rule5" points="658.5,207.4 849.3,208.1 849.3,377.9 542.9,376.9 542.9,323 	"/>
              <text transform="matrix(1 0 0 1 112.8565 63.3566)" class="svg-c-rule6 svg-c-rule7 svg-c-rule8">DOM Virtual</text>
              <circle class="svg-c-rule9" cx="664.1" cy="267.8" r="23.9"/>
              <text transform="matrix(1 0 0 1 460.5232 63.3566)" class="svg-c-rule6 svg-c-rule7 svg-c-rule8">DOM Real</text>
              <text transform="matrix(1 0 0 1 732.8045 267.1165)" class="svg-c-rule16 svg-c-rule7 svg-c-rule10">D3.js</text>
              <g>
                <path class="svg-c-rule16" d="M405.2,180l0-8.6c0-3.8-3.1-6.9-6.9-6.9l-9.5-0.1c-3.8-0.1-6.9,3-6.9,6.8l5.4,0.1c0.5-1.1,1.9-1.8,3.2-1.7
                  l6,0.1c1.9,0.1,3.5,1.6,3.5,3.5l0,5.1c0,1.9-1.5,3.4-3.4,3.4l-6-0.1c-1.3,0-2.7-0.8-3.3-1.8l-5.3-0.1c0,3.8,3.1,6.9,6.9,6.9
                  l9.5,0.1C402.2,186.8,405.2,183.8,405.2,180z"/>
                <path class="svg-c-rule16" d="M370.5,179.5c-0.6,1.1-2,1.8-3.3,1.8l-5.6-0.1c-2,0-3.5-1.6-3.5-3.6l0-5.3c0-1.9,1.5-3.5,3.5-3.4l5.6,0.1
                  c1.4,0,2.7,0.7,3.3,1.9l5.5,0.1c0-3.9-3.2-7.1-7-7.1l-9.1-0.1c-3.9-0.1-7,3.1-7,6.9l0,8.8c0,3.9,3.2,7.1,7,7.1l9.1,0.1
                  c3.9,0.1,7-3.1,7-6.9L370.5,179.5z"/>
                <path class="svg-c-rule16" d="M368.7,175.3c0,1.3,1,2.4,2.4,2.4l15.8,0.1c1.3,0,2.4-1.1,2.4-2.4s-1-2.4-2.4-2.4l-15.8-0.1
                  C369.8,172.9,368.7,174,368.7,175.3z"/>
              </g>
              <path class="svg-c-rule11" d="M621.6-12.8"/>
              <path class="svg-c-rule11" d="M-21.9,232.7"/>
              <path class="svg-c-rule11" d="M668,229.6"/>
              <circle class="svg-c-rule9" cx="599.4" cy="332.5" r="23.9"/>
              <circle class="svg-c-rule9" cx="728.8" cy="332.5" r="23.9"/>
              <text transform="matrix(1 0 0 1 326.5543 148.3836)" class="svg-c-rule16 svg-c-rule7 svg-c-rule10">React</text>
              <path class="svg-c-rule12" d="M652.7,278.9"/>
              <path class="svg-c-rule12" d="M779.5,405.7"/>
              <line class="svg-c-rule13" x1="664.1" y1="267.8" x2="728.8" y2="332.5"/>
              <line class="svg-c-rule13" x1="664.1" y1="267.8" x2="598.5" y2="333.4"/>
              <circle class="svg-c-rule14" cx="534.6" cy="138.5" r="23.9"/>
              <circle class="svg-c-rule14" cx="469.9" cy="203.2" r="23.9"/>
              <line class="svg-c-rule15" x1="534.6" y1="138.5" x2="599.3" y2="203.2"/>
              <line class="svg-c-rule15" x1="534.6" y1="138.5" x2="469" y2="204"/>
              <line class="svg-c-rule13" x1="599.4" y1="203.1" x2="664.1" y2="267.9"/>
              <circle class="svg-c-rule14" cx="405.1" cy="267.1" r="23.9"/>
              <circle class="svg-c-rule14" cx="534.6" cy="267.1" r="23.9"/>
              <line class="svg-c-rule15" x1="469.9" y1="202.4" x2="534.6" y2="267.1"/>
              <line class="svg-c-rule15" x1="469.9" y1="202.4" x2="404.3" y2="268"/>
              <circle class="svg-c-rule18" cx="599.3" cy="203.2" r="23.9"/>
              <circle class="svg-c-rule19" cx="232.6" cy="138.5" r="23.9"/>
              <circle class="svg-c-rule19" cx="167.9" cy="203.2" r="23.9"/>
              <line class="svg-c-rule20" x1="232.6" y1="138.5" x2="297.3" y2="203.2"/>
              <line class="svg-c-rule20" x1="232.6" y1="138.5" x2="167" y2="204"/>
              <circle class="svg-c-rule19" cx="103.1" cy="267.1" r="23.9"/>
              <circle class="svg-c-rule19" cx="232.6" cy="267.1" r="23.9"/>
              <line class="svg-c-rule20" x1="167.9" y1="202.4" x2="232.6" y2="267.1"/>
              <line class="svg-c-rule20" x1="167.9" y1="202.4" x2="102.3" y2="268"/>
              <circle class="svg-c-rule23" cx="297.3" cy="203.2" r="23.9"/>
              <text transform="matrix(1 0 0 1 643.1665 275.7831)" class="svg-c-rule24 svg-c-rule7 svg-c-rule25">SVG</text>
            </g>
          </svg>

          <aside class="notes">
            <ul>
              <li>Mirad, este esquema nos suena de React, DOM Virtual vs DOM Real y la reconciliación para sincronizar cambios</li>
              <li>La idea: Crear un componente en react que sirva de contenedor.</li>
              <li>Como decía un compañero mío, su única misión es ser un cascarón en React, <b>un único nodo que sirva como punto de entrada a D3.js</b> para operar a sus anchas con el DOM.</li>
              <li>Ese contenedor lo vemos representado en blanco y el secreto está en indicarle a React que a partir de ese nodo es territorio de D3</li>
              <li>Para React, todo lo que hay desde ese nodo hacia adentro, no le incumbe. Es como una caja negra.</li>
              <li>De esta forma mantenemos dos islas conectadas pero separadas, sin solapes ni interferencias</li>
            </ul>
          </aside>
        </section>

        <!-- Slide - Código Variante Estática -->
        <section>
          <h4>Versión Estática</h4>
          <pre><code class="code-area jsx" data-trim="true" data-noescape="true">
            interface Props {
              data: any[];
            }

            class ChartComponent extends React.Component&ltProps, {}&gt {
              constructor(props) {
                super(props);
              }

              private nodeRef = null;

              private setRef = (ref) => {
                this.nodeRef = ref;
              }

              public componentDidMount() {
                // LLamada a D3
                createChart(this.nodeRef, this.props.data);
              }

              public shouldComponentUpdate() {
                return false;
              }

              public render() {
                return (
                  &ltdiv className="container" ref={this.setRef} /&gt
                );
              }
            }
          </code></pre>

          <aside class="notes">
            <ul>
              <li>Esta es la solución más sencilla de todas, pero muy efectiva, funciona.</li>
              <li>Tan fácil como hacer un componente básico, donde alimentemos los datos para ser visualizados como propiedad, y como render() un simple div a modo de contenedor.</li>
              <li>Esto nos va a proporcionar el nodo que necesitamos en el DOM.</li>
              <li>Una vez el componente se monte, el nodo DIV se creará en el DOM.</li>
              <li>Almacenaremos localmente la referencia de dicho nodo real para pasarsela a D3 y que empiece a construir su árbol de elementos.</li>
              <li>Esto se hará justo después de que el componente se haya montado, ahi es el momento de invocar a D3 para que construya el gráfico.</li>
              <li><b>El secreto: evitar que haya más actualizaciones, para lo cual ponemos shouldComponentUpdate a false</b></li>
              <li>Bloqueamos cualquier intento de renderizado por parte de React, el DIV contenedor solo se renderizará por tanto una vez, al montarse.</li>
              <li>Del resto se encarga D3.js</li>
              <li>Ahora bien, un matiz importante, aqui la premisa es que los datos no van a cambiar, serán estáticos, de ahí el título </li>
              <li>¿Por qué? Porque invocamos a D3 una sóla vez, al montarse el componente. Si los datos cambian, la propiedad data cambia, pero no se realiza ningún re-render ni se vuelve a invocar D3 en ningún momento.</li>
              <li>Por tanto esta solución es adecuada para los casos más sencillos en donde sabemos que los datos no cambian, que no necesitamos real time.</li>
            </ul>
          </aside>
        </section>

         <!-- Slide - Ejemplo Variante Estática -->
         <section>
          <div id="sample-d3-render-static" class="flex row center"></div>

          <aside class="notes">
            <ul>
              <li>Ejemplo básico y sencillo implementado con esta solución</li>
              <li>He generado un </b>vector de números random</b> que será inyectado en la propiedad DATA del componente React</li>
              <li>Ese vector random determinará la altura de las barras</li>
              <li>Cuando el componente se monta, D3.js entra en acción y genera los nodos SVG en función de los datos</li>
              <li>Como hemos comentado antes, la premisa es que los datos no cambien, ya que si lo hicieran el gráfico no se enteraría porque se pinta ¡solo al montarse!</li>
              <li>Eso si, puedo refrescar la página y que se genere un nuevo set de datos aleatorios, y al volver a montarse el componente, mi gráfico cambiaría.</li>
              <li>Pero una de las características más potentes de D3 es trabajar con datos en tiempo real, que los datos cambien y el gráfico reaccione ante esos cambios ¿verdad?</li>
              <li>No os preocupeis, tenémos la versión dinámica para eso. Veamos</li>
            </ul>
          </aside>
        </section>

        <!-- Slide - Código Variante Dinámica -->
        <section>
          <h4>Versión Dinámica</h4>
          <pre><code class="code-area jsx" data-trim="true" data-noescape="true">
            interface Props {
              data: any[];
            }

            class ChartComponent extends React.Component&ltProps, {}&gt {
              constructor(props) {
                super(props);
              }

              private nodeRef = null;

              private setRef = (ref) => {
                this.nodeRef = ref;
              }

              public componentDidMount() {
                // LLamada a D3. Enter().
                createChart(this.nodeRef, this.props.data);
              }

              public shouldComponentUpdate(prevProps) {
                return Boolean(prevProps.data !== this.props.data);
              }

              public componentDidUpdate() {
                // LLamada a D3. Update().
                updateChart(this.props.data);
              }

              public render() {
                return (
                  &ltdiv className="container" ref={this.setRef} /&gt
                );
              }
            }
          </code></pre>

          <aside class="notes">
            <ul>
              <li>Fijaos que es muy similar a la anterior:
                <ul>
                  <li>Datos como propiedad</li>
                  <li>Metodo render con un simple DIV</li>
                  <li>Extraemos la referencia del nodo DIV en el DOM real y la almacenamos para pasarsela a D3</li>
                </ul>
              </li>
              <li>Hasta ahí todo igual, la diferencia está en el ciclo de vida.</li>
              <li>LLamamos a D3 una primera vez para crear el gráfico desde cero, ¿cuando? cuando el componente se monta, en el DidMount. Aqui se implementará el patrón ENTER de D3</li>
              <li>Además, ya no bloqueamos todos los renders, sino que permitimos actualizaciones cuando los datos han cambiado.
                <ul>
                  <li>Fijaos que en este ejemplo donde sólo tenemos una propiedad  y se está haciendo una comparación shallow, se podría haber hecho esto con un PureComponente.</li>
                  <li>He decidio hacerlo en el shouldComponentUpdate y no con un PureComponente, como alternativa, y porque podría ser que los datos cambien sin seguir el paradigma inmutable, en cuyo caso necesitaríamos una comparación en profundidad.</li>
                </ul>
              </li>
              <li>Como permitimos un render cuando los datos cambian, controlamos eso en el siguiente punto del ciclo de vida, en el componentDidUpdate.</li>
              <li>Aqui volvemos a llamar a D3 con los nuevos datos e implementamos el patron Update para que D3 realice las actualizaciones pertienentes según los nuevos datos.</li>
            </ul>
          </aside>
        </section>

        <!-- Slide - Ejemplo Variante Dinámica -->
        <section>
          <div id="sample-d3-render-dynamic" class="flex row center"></div>

          <aside class="notes">
            <ul>
              <li>Este nuevo ejemplo, basado en la versión estática, tiene la peculiaridad de que los datos se vuelven a randomizar en intervalos de 1 segundo.</li>
              <li>Cada segundo un nuevo vector de datos aleatorios entra como propiedad del componente, que dispara una actualización que acaba llamando al patrón update de D3.js</li>
              <li>En ese patrón he implementado además una transición para que el efecto quede mas chulo. D3.js es muy bueno haciendo este tipo de animaciones, y como estamos mutando el DOM directamente, se puede hacer sin interferencia con React.</li>
              <li>Fijaos que aparente queda nuestro gráfico!</li>
            </ul>
          </aside>
        </section>

        <!-- Slide - Resumen Pros & Cons -->
        <section>
          <div class="flex column center">
            <div>
              <div class="flex row top-align">
                <h4>PROS</h4>
                <ul class="no-bullet">
                  <li class="fragment"><strong class="positive">✓ </strong>Muy sencilla y efectiva, funciona</li>
                  <li class="fragment"><strong class="positive">✓ </strong>Funcionalidad completa D3</li>
                  <li class="fragment"><strong class="positive">✓ </strong>Código nativo D3 y ejemplos</li>
                  <li class="fragment"><strong class="positive">✓ </strong>Transiciones</li>
                </ul>
              </div>
              <div class="flex row top-align">
                <h4>CONS</h4>
                <ul class="no-bullet">
                  <li class="fragment"><strong class="negative">✗ </strong>DOM Virtual / Reconciliación React</li>
                  <li class="fragment"><strong class="negative">✗ </strong>Porción del DOM mutable</li>
                  <li class="fragment"><strong class="negative">✗ </strong><i>Server Side Rendering</i></li>
                </ul>
              </div>
            </div>
          </div>

          <aside class="notes">
            <ul>
              <li>✓ La solución más sencilla, empezad siempre por aqui, es el caso base, después vais promocionando a otras soluciones</li>
              <li>✓ Todo el API de D3 disponible, veremos en otras soluciones que nos restringimos a ciertas funciones de D3.</li>
              <li>✓ El código que generamos es código 100% nativo de D3. Esto permite que consultemos la enorme cantidad de ejemplos disponbiles de D3. En D3 se desarrolla mucho a base de ejemplos, es la mejor manera de aprender.</li>
              <li>✓ Transiciones soportadas pq mutamos el DOM directamente, no tenemos la problemática con las animaciones que hay en React.</li>
              <li>✗ NO usamos el dom virtual / reconciliación que es un mecanismo muy eficiente de actualización del DOM. Nos salimos del paradigam de React</li>
              <li>✗ Tenemos un trozo de nuestro DOM mutable, sin reglas, con total libertad. Esto no es un problema en si, mutar no es nada malo siempre que se sepa lo que estamos haciendo.</li>
              <li>✗ No podemos generar markup de forma remota ya que D3 necesita mutar el DOM real de forma directa. D3 necesita estar en cliente mutando el DOM que el usuario ve.</li>
            </ul>
          </aside>
        </section>

      </section>



      <!-- |GRUPO| 2 React renderiza, D3 calcula -->
      <section>

        <!-- Slide - Titulo Intro -->
        <section>
          <h3>React <i>renderiza</i>, D3 calcula</h3>
          <p>D3 al servicio de React</p>

          <aside class="notes">
            <ul>
              <li>Nueva aproximación</li>
              <li>Más protagonismo para REACT</li>
              <li>REACT tiene el peso del renderizado</li>
              <li>Por eso decimos D3 al servicio de React, como esclavo</li>
            </ul>
          </aside>
        </section>

        <!-- Slide - En que consiste la solución -->
        <section>
          <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
            viewbox="0 0 900 500" style="enable-background:new 0 0 900 500;" xml:space="preserve">
            <style type="text/css">
              .svg-d-rule0{fill:#00D4EC;fill-opacity:0.2;}
              .svg-d-rule1{opacity:0.2;fill:#F68E48;enable-background:new;}
              .svg-d-rule2{fill:#B4B4B4;}
              .svg-d-rule3{font-family:'Montserrat';}
              .svg-d-rule4{font-size:32px;}
              .svg-d-rule5{fill:#FFFFFF;}
              .svg-d-rule6{font-size:38px;}
              .svg-d-rule7{fill:none;stroke:#AAAAAA;stroke-width:3;stroke-miterlimit:10;stroke-dasharray:11.829,11.8286;}
              .svg-d-rule8{fill:none;stroke:#F68E48;stroke-miterlimit:10;}
              .svg-d-rule9{fill:#7F7F7F;stroke:#7F7F7F;stroke-width:3;stroke-miterlimit:10;}
              .svg-d-rule10{fill:none;stroke:#7F7F7F;stroke-width:5;stroke-miterlimit:10;}
              .svg-d-rule11{font-size:21px;}
              .svg-d-rule12{fill:#00D4EC;stroke:#00D4EC;stroke-width:3;stroke-miterlimit:10;}
              .svg-d-rule13{fill:none;stroke:#00D4EC;stroke-width:5;stroke-miterlimit:10;}
              .svg-d-rule14{fill:#F68E48;}
              .svg-d-rule15{font-family:'Montserrat';}
              .svg-d-rule16{fill:none;stroke:#F68E48;stroke-width:3;stroke-miterlimit:10;}
              .svg-d-rule17{fill:#FFFFFF;stroke:#7F7F7F;stroke-width:5;stroke-miterlimit:10;}
              .svg-d-rule18{fill:#FFFFFF;stroke:#00D4EC;stroke-width:5;stroke-miterlimit:10;}
            </style>
            <polygon class="svg-d-rule0" points="863.2,366.5 863.2,72.7 40.7,72.7 40.7,366.5 "/>
            <polygon class="svg-d-rule1" points="219.6,393.4 605.7,394.1 605.7,470 219.6,469 "/>
            <text transform="matrix(1 0 0 1 132.8565 50.6566)" class="svg-d-rule2 svg-d-rule3 svg-d-rule4">DOM Virtual</text>
            <text transform="matrix(1 0 0 1 561.5232 50.6566)" class="svg-d-rule2 svg-d-rule3 svg-d-rule4">DOM Real</text>
            <text transform="matrix(1 0 0 1 500.5502 445.1328)" class="svg-d-rule5 svg-d-rule3 svg-d-rule6">D3.js</text>
            <g>
              <path class="svg-d-rule5" d="M475.2,167.3v-8.6c0-3.8-3.1-6.9-6.9-6.9l-9.5-0.1c-3.8-0.1-6.9,3-6.9,6.8l5.4,0.1c0.5-1.1,1.9-1.8,3.2-1.7
                l6,0.1c1.9,0.1,3.5,1.6,3.5,3.5v5.1c0,1.9-1.5,3.4-3.4,3.4l-6-0.1c-1.3,0-2.7-0.8-3.3-1.8L452,167c0,3.8,3.1,6.9,6.9,6.9l9.5,0.1
                C472.2,174.1,475.2,171.1,475.2,167.3z"/>
              <path class="svg-d-rule5" d="M440.5,166.8c-0.6,1.1-2,1.8-3.3,1.8l-5.6-0.1c-2,0-3.5-1.6-3.5-3.6v-5.3c0-1.9,1.5-3.5,3.5-3.4l5.6,0.1
                c1.4,0,2.7,0.7,3.3,1.9l5.5,0.1c0-3.9-3.2-7.1-7-7.1l-9.1-0.1c-3.9-0.1-7,3.1-7,6.9v8.8c0,3.9,3.2,7.1,7,7.1l9.1,0.1
                c3.9,0.1,7-3.1,7-6.9L440.5,166.8z"/>
              <path class="svg-d-rule5" d="M438.7,162.6c0,1.3,1,2.4,2.4,2.4l15.8,0.1c1.3,0,2.4-1.1,2.4-2.4s-1-2.4-2.4-2.4l-15.8-0.1
                C439.8,160.2,438.7,161.3,438.7,162.6z"/>
            </g>
            <path class="svg-d-rule7" d="M621.6-25.5"/>
            <path class="svg-d-rule7" d="M-21.9,220"/>
            <path class="svg-d-rule7" d="M668,216.9"/>
            <text transform="matrix(1 0 0 1 396.5543 135.6836)" class="svg-d-rule5 svg-d-rule3 svg-d-rule6">React</text>
            <path class="svg-d-rule8" d="M652.7,266.2"/>
            <path class="svg-d-rule8" d="M779.5,393"/>
            <ellipse transform="matrix(0.3417 -0.9398 0.9398 0.3417 296.2089 674.4679)" class="svg-d-rule9" cx="629.6" cy="125.8" rx="23.9" ry="23.9"/>
            <circle class="svg-d-rule9" cx="564.9" cy="190.5" r="23.9"/>
            <line class="svg-d-rule10" x1="629.6" y1="125.8" x2="694.3" y2="190.5"/>
            <line class="svg-d-rule10" x1="629.6" y1="125.8" x2="564" y2="191.3"/>
            <circle class="svg-d-rule9" cx="500.1" cy="254.4" r="23.9"/>
            <ellipse transform="matrix(0.3162 -0.9487 0.9487 0.3162 189.1797 771.2373)" class="svg-d-rule9" cx="629.6" cy="254.4" rx="23.9" ry="23.9"/>
            <line class="svg-d-rule10" x1="564.9" y1="189.7" x2="629.6" y2="254.4"/>
            <line class="svg-d-rule10" x1="564.9" y1="189.7" x2="499.3" y2="255.3"/>
            <circle class="svg-d-rule9" cx="759.1" cy="255.1" r="23.9"/>
            <circle class="svg-d-rule9" cx="694.4" cy="319.8" r="23.9"/>
            <circle class="svg-d-rule9" cx="823.8" cy="319.8" r="23.9"/>
            <line class="svg-d-rule10" x1="759.1" y1="255.1" x2="823.8" y2="319.8"/>
            <line class="svg-d-rule10" x1="759.1" y1="255.1" x2="693.5" y2="320.7"/>
            <line class="svg-d-rule10" x1="694.4" y1="190.4" x2="759.1" y2="255.2"/>
            <text transform="matrix(1 0 0 1 738.1665 263.0831)" class="svg-d-rule5 svg-d-rule3 svg-d-rule11">SVG</text>
            <ellipse class="svg-d-rule12" cx="219.6" cy="125.8" rx="23.9" ry="23.9"/>
            <circle class="svg-d-rule12" cx="154.9" cy="190.5" r="23.9"/>
            <line class="svg-d-rule13" x1="219.6" y1="125.8" x2="284.3" y2="190.5"/>
            <line class="svg-d-rule13" x1="219.6" y1="125.8" x2="154" y2="191.3"/>
            <circle class="svg-d-rule12" cx="90.1" cy="254.4" r="23.9"/>
            <ellipse class="svg-d-rule12" cx="219.6" cy="254.4" rx="23.9" ry="23.9"/>
            <line class="svg-d-rule13" x1="154.9" y1="189.7" x2="219.6" y2="254.4"/>
            <line class="svg-d-rule13" x1="154.9" y1="189.7" x2="89.3" y2="255.3"/>
            <circle class="svg-d-rule12" cx="349.1" cy="255.1" r="23.9"/>
            <circle class="svg-d-rule12" cx="284.4" cy="319.8" r="23.9"/>
            <circle class="svg-d-rule12" cx="413.8" cy="319.8" r="23.9"/>
            <line class="svg-d-rule13" x1="349.1" y1="255.1" x2="413.8" y2="319.8"/>
            <line class="svg-d-rule13" x1="349.1" y1="255.1" x2="283.5" y2="320.7"/>
            <line class="svg-d-rule13" x1="284.4" y1="190.4" x2="349.1" y2="255.2"/>
            <text transform="matrix(1 0 0 1 328.1665 263.0831)" class="svg-d-rule5 svg-d-rule3 svg-d-rule11">SVG</text>
            <text transform="matrix(1 0 0 1 326.1664 443.1324)" class="svg-d-rule14 svg-d-rule15 svg-d-rule6">f(x) </text>
            <text transform="matrix(1 0 0 1 241.1664 443.1324)" class="svg-d-rule14 svg-d-rule15 svg-d-rule6">f(x) </text>
            <text transform="matrix(1 0 0 1 412.1664 443.1324)" class="svg-d-rule14 svg-d-rule15 svg-d-rule6">f(x) </text>
            <line class="svg-d-rule16" x1="284.4" y1="393.8" x2="284.4" y2="356.3"/>
            <polygon class="svg-d-rule14" points="289.5,362.2 284.4,357.1 279.3,362.2 279.3,357.9 284.4,352.8 289.5,357.9"/>
            <path class="svg-d-rule16" d="M299,457h-61c-2.2,0-4-1.8-4-4v-42.7c0-2.2,1.8-4,4-4h61c2.2,0,4,1.8,4,4V453C303,455.2,301.2,457,299,457z"/>
            <path class="svg-d-rule16" d="M384,457h-61c-2.2,0-4-1.8-4-4v-42.7c0-2.2,1.8-4,4-4h61c2.2,0,4,1.8,4,4V453C388,455.2,386.2,457,384,457z"/>
            <path class="svg-d-rule16" d="M469,457h-61c-2.2,0-4-1.8-4-4v-42.7c0-2.2,1.8-4,4-4h61c2.2,0,4,1.8,4,4V453C473,455.2,471.2,457,469,457z"/>
            <line class="svg-d-rule16" x1="351.4" y1="394" x2="351.4" y2="318.8"/>
            <polygon class="svg-d-rule14" points="356.5,324.8 351.4,319.7 346.3,324.8 346.3,320.5 351.4,315.4 356.5,320.5"/>
            <line class="svg-d-rule16" x1="415.4" y1="393.8" x2="415.4" y2="356.3"/>
            <polygon class="svg-d-rule14" points="420.5,362.2 415.4,357.1 410.3,362.2 410.3,357.9 415.4,352.8 420.5,357.9"/>
            <circle class="svg-d-rule17" cx="694.3" cy="190.5" r="23.9"/>
            <circle class="svg-d-rule18" cx="284.3" cy="190.5" r="23.9"/>
          </svg>

          <aside class="notes">
            <ul>
              <li>Panorama de React ya lo conocemos. DOM virtual vs Real + Reconciliación</li>
              <li>Todo el árbol de componentes dentro de React. React renderiza todo.</li>
              <li><b>RECOMENDACIÓN</b>: Aunque no es necesario ahora, mantened un contenedor para vuestro gráfico. Puede que necesiteis implementar otra alternativa más adelante.</li>
              <li>Dijimos: D3 API enorme, core para DOM pequeño, muchos helpers matemáticos.</li>
              <li>Usemos los helpers de D3 para apoyarnos y calcular tamaños, posiciones, escalas, etc.</li>
              <li>No obstante, los elementos SVG del gráfico serán siempre React.</li>
            </ul>
          </aside>
        </section>

        <!-- Slide - Código -->
        <section>
          <pre><code class="code-area jsx" data-trim="true" data-noescape="true">
            interface Props {
              data: any[];
            }

            class ChartComponent extends React.PureComponent&ltProps, {}&gt {
              constructor(props) {
                super(props);
              }

              private calculatePath = (lineData) => {
                // Usamos D3 para cálculos
                // d3.scaleLinear()...
                // d3.line()...
                return ...
              }

              public render() {
                return (
                  &ltsvg width="500px" height="300px"&gt
                    {
                      this.props.data.map(lineData => (
                        &ltpath d={this.calculatePath(lineData)} className="line" /&gt
                      ))
                    }
                  &lt/svg&gt
                );
              }
            }
          </code></pre>

          <aside class="notes">
            <ul>
              <li>Ejemplo muy sencillito para ilustrar esta solución.</li>
              <li>Igual que antes: Datos como propiedad.</li>
              <li>Aqui he decidido hacerlo puro, si los datos cambian, habrá nuevo render.</li>
              <li>Por tanto soporta datos dinámicos.</li>
              <li>La chicha está en el RENDER. Ahora es mucho más elaborado.</li>
              <li>Genera un contendor SVG y todos los elementos que componen el gráfico.</li>
              <li>Líneas en este caso, cuyas coordenadas son calculadas por D3.</li>
              <li>Como veis es un ejemplo muuuy sencillo, porque su complejidad crece rápidamente.</li>
            </ul>
          </aside>
        </section>

        <!-- Slide - Ejemplo -->
        <section>
          <div id="sample-react-render" class="flex row center"></div>

          <aside class="notes">
            <ul>
              <li>Resultado de carrera de F1. Posición de cada piloto en cada vuelta.</li>
              <li>Un array donde cada datum representa un piloto y su posición en cada vuelta.</li>
              <li>Por sencillez el ejemplo es estático pero esta solución soporta real time, aunque a través de React y sus re-renders.</li>
              <li>Interactividad, tb posible dentro de React: hover, onclick, etc, etc.</li>
            </ul>
          </aside>
        </section>

        <!-- Slide - Resumen Pros & Cons -->
        <section>
          <div class="flex column center">
            <div>
              <div class="flex row top-align">
                <h4>PROS</h4>
                <ul class="no-bullet">
                  <li class="fragment"><strong class="positive">✓ </strong>Código React</li>
                  <li class="fragment"><strong class="positive">✓ </strong>DOM Virtual / Reconciliación</li>
                  <li class="fragment"><strong class="positive">✓ </strong><i>Server Side Rendering</i></li>
                </ul>
              </div>
              <div class="flex row top-align">
                <h4>CONS</h4>
                <ul class="no-bullet">
                  <li class="fragment"><strong class="negative">✗ </strong>Complejidad exponencial</li>
                  <li class="fragment"><strong class="negative">✗ </strong>Reimplementar funcionalidad D3</li>
                  <li class="fragment"><strong class="negative">✗ </strong>Ejemplos D3</li>
                  <li class="fragment"><strong class="negative">✗ </strong>Amplio conocimiento API D3</li>
                  <li class="fragment"><strong class="negative">✗ </strong>Transiciones</li>
                </ul>
              </div>
            </div>
          </div>

          <aside class="notes">
            <ul>
              <li>✓ Para los puristas, código 100% React.</li>
              <li>✓ Performance y eficiencia de React.</li>
              <li>✓ SSR es posible siguiendo los mecanismos que ya existen en React (Next.js)</li>
              <li>✗ Gráficos sencillos, ok, gráficos complejos, código jodido.</li>
              <li>✗ Acabamos duplicando código que ya existe en D3.js.</li>
              <li>✗ Perdemos los miles de ejemplos de D3. El código nativo D3 no se va a parecer al código que necesitaremos en React para nuestro gráfico.</li>
              <li>✗ Requiere dominio del API de D3</li>
              <li>✗ 3rd party library para transiciones (animaciones con CSS si)</li>
            </ul>
          </aside>
        </section>

      </section>


      <!-- |GRUPO| 3 Faux DOM -->
      <section>

        <!-- Slide - Titulo Intro -->
        <section>
          <h3><i>Faux</i> DOM</h3>
          <p>React y D3 totalmente separados</p>
        </section>

        <!-- Slide - En que consiste la solución -->
        <section>
          <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
          viewbox="0 0 1150 400" style="enable-background:new 0 0 1150 400;" xml:space="preserve">
            <style type="text/css">
              .svg-e-rule0{fill:#F68E48;fill-opacity:0.2;}
              .svg-e-rule1{fill:#00D4EC;fill-opacity:0.2;}
              .svg-e-rule2{fill:#B4B4B4;}
              .svg-e-rule3{font-family:'Montserrat';}
              .svg-e-rule4{font-size:32px;}
              .svg-e-rule5{fill:#FFFFFF;}
              .svg-e-rule6{font-size:38px;}
              .svg-e-rule7{fill:none;stroke:#AAAAAA;stroke-width:3;stroke-miterlimit:10;stroke-dasharray:11.829,11.8286;}
              .svg-e-rule8{fill:none;stroke:#F68E48;stroke-miterlimit:10;}
              .svg-e-rule9{fill:#7F7F7F;stroke:#7F7F7F;stroke-width:3;stroke-miterlimit:10;}
              .svg-e-rule10{fill:none;stroke:#7F7F7F;stroke-width:5;stroke-miterlimit:10;}
              .svg-e-rule11{fill:#00D4EC;stroke:#00D4EC;stroke-width:3;stroke-miterlimit:10;}
              .svg-e-rule12{fill:none;stroke:#00D4EC;stroke-width:5;stroke-miterlimit:10;}
              .svg-e-rule13{font-size:21px;}
              .svg-e-rule14{fill:#FFFFFF;stroke:#7F7F7F;stroke-width:5;stroke-miterlimit:10;}
              .svg-e-rule15{fill:#FFFFFF;stroke:#00D4EC;stroke-width:5;stroke-miterlimit:10;}
              .svg-e-rule16{fill:#F68E48;stroke:#F68E48;stroke-width:3;stroke-miterlimit:10;}
              .svg-e-rule17{fill:#F68E48;stroke:#F68E48;stroke-width:5;stroke-miterlimit:10;}
              .svg-e-rule18{fill:#00ECCC;fill-opacity:0.2;}
              .svg-e-rule19{font-size:26px;}
              .svg-e-rule20{fill:none;stroke:#00ECCC;stroke-width:5;stroke-miterlimit:10;stroke-dasharray:6,6;}
              .svg-e-rule21{fill:#00ECCC;}
            </style>
            <rect x="31.1" y="72.7" class="svg-e-rule0" width="234.8" height="224.3"/>
            <polygon class="svg-e-rule1" points="1117.2,366.5 1117.2,72.7 294.7,72.7 294.7,366.5 "/>
            <text transform="matrix(1 0 0 1 386.8523 50.6566)" class="svg-e-rule2 svg-e-rule3 svg-e-rule4">DOM Virtual</text>
            <text transform="matrix(1 0 0 1 815.519 50.6566)" class="svg-e-rule2 svg-e-rule3 svg-e-rule4">DOM Real</text>
            <text transform="matrix(1 0 0 1 108.1958 135.7946)" class="svg-e-rule5 svg-e-rule3 svg-e-rule6">D3.js</text>
            <g>
              <path class="svg-e-rule5" d="M729.2,167.3v-8.6c0-3.8-3.1-6.9-6.9-6.9l-9.5-0.1c-3.8-0.1-6.9,3-6.9,6.8l5.4,0.1c0.5-1.1,1.9-1.8,3.2-1.7
                l6,0.1c1.9,0.1,3.5,1.6,3.5,3.5v5.1c0,1.9-1.5,3.4-3.4,3.4l-6-0.1c-1.3,0-2.7-0.8-3.3-1.8L706,167c0,3.8,3.1,6.9,6.9,6.9l9.5,0.1
                C726.2,174.1,729.2,171.1,729.2,167.3z"/>
              <path class="svg-e-rule5" d="M694.5,166.8c-0.6,1.1-2,1.8-3.3,1.8l-5.6-0.1c-2,0-3.5-1.6-3.5-3.6v-5.3c0-1.9,1.5-3.5,3.5-3.4l5.6,0.1
                c1.4,0,2.7,0.7,3.3,1.9l5.5,0.1c0-3.9-3.2-7.1-7-7.1l-9.1-0.1c-3.9-0.1-7,3.1-7,6.9v8.8c0,3.9,3.2,7.1,7,7.1l9.1,0.1
                c3.9,0.1,7-3.1,7-6.9L694.5,166.8z"/>
              <path class="svg-e-rule5" d="M692.7,162.6c0,1.3,1,2.4,2.4,2.4l15.8,0.1c1.3,0,2.4-1.1,2.4-2.4s-1-2.4-2.4-2.4l-15.8-0.1
                C693.8,160.2,692.7,161.3,692.7,162.6z"/>
            </g>
            <path class="svg-e-rule7" d="M871.6-25.5"/>
            <path class="svg-e-rule7" d="M232.1,220"/>
            <path class="svg-e-rule7" d="M922,216.9"/>
            <text transform="matrix(1 0 0 1 650.5501 135.6836)" class="svg-e-rule5 svg-e-rule3 svg-e-rule6">React</text>
            <path class="svg-e-rule8" d="M906.7,266.2"/>
            <path class="svg-e-rule8" d="M1033.5,393"/>
            <ellipse transform="matrix(0.3417 -0.9398 0.9398 0.3417 463.4136 913.1752)" class="svg-e-rule9" cx="883.5" cy="125.8" rx="23.9" ry="23.9"/>
            <circle class="svg-e-rule9" cx="818.9" cy="190.5" r="23.9"/>
            <line class="svg-e-rule10" x1="883.6" y1="125.8" x2="948.3" y2="190.5"/>
            <line class="svg-e-rule10" x1="883.6" y1="125.8" x2="818" y2="191.3"/>
            <circle class="svg-e-rule9" cx="754.1" cy="254.4" r="23.9"/>
            <ellipse transform="matrix(0.3162 -0.9487 0.9487 0.3162 362.8625 1012.2014)" class="svg-e-rule9" cx="883.6" cy="254.4" rx="23.9" ry="23.9"/>
            <line class="svg-e-rule10" x1="818.9" y1="189.7" x2="883.6" y2="254.4"/>
            <line class="svg-e-rule10" x1="818.9" y1="189.7" x2="753.3" y2="255.3"/>
            <ellipse class="svg-e-rule11" cx="473.6" cy="125.8" rx="23.9" ry="23.9"/>
            <circle class="svg-e-rule11" cx="408.9" cy="190.5" r="23.9"/>
            <line class="svg-e-rule12" x1="473.6" y1="125.8" x2="538.3" y2="190.5"/>
            <line class="svg-e-rule12" x1="473.6" y1="125.8" x2="408" y2="191.3"/>
            <circle class="svg-e-rule11" cx="344.1" cy="254.4" r="23.9"/>
            <ellipse class="svg-e-rule11" cx="473.6" cy="254.4" rx="23.9" ry="23.9"/>
            <line class="svg-e-rule12" x1="408.9" y1="189.7" x2="473.6" y2="254.4"/>
            <line class="svg-e-rule12" x1="408.9" y1="189.7" x2="343.3" y2="255.3"/>
            <g class="fragment" data-fragment-index="2">
              <g>
                <circle class="svg-e-rule9" cx="1013.1" cy="255.1" r="23.9"/>
                <circle class="svg-e-rule9" cx="948.4" cy="319.8" r="23.9"/>
                <circle class="svg-e-rule9" cx="1077.8" cy="319.8" r="23.9"/>
                <line class="svg-e-rule10" x1="1013.1" y1="255.1" x2="1077.8" y2="319.8"/>
                <line class="svg-e-rule10" x1="1013.1" y1="255.1" x2="947.5" y2="320.7"/>
                <line class="svg-e-rule10" x1="948.4" y1="190.4" x2="1013.1" y2="255.2"/>
                <text transform="matrix(1 0 0 1 992.1623 263.0831)" class="svg-e-rule5 svg-e-rule3 svg-e-rule13">SVG</text>
              </g>
              <g>
                <circle class="svg-e-rule11" cx="603.1" cy="255.1" r="23.9"/>
                <circle class="svg-e-rule11" cx="538.4" cy="319.8" r="23.9"/>
                <circle class="svg-e-rule11" cx="667.8" cy="319.8" r="23.9"/>
                <line class="svg-e-rule12" x1="603.1" y1="255.1" x2="667.8" y2="319.8"/>
                <line class="svg-e-rule12" x1="603.1" y1="255.1" x2="537.5" y2="320.7"/>
                <line class="svg-e-rule12" x1="538.4" y1="190.4" x2="603.1" y2="255.2"/>
                <text transform="matrix(1 0 0 1 582.1623 263.0831)" class="svg-e-rule5 svg-e-rule3 svg-e-rule13">SVG</text>
              </g>
            </g>
            <circle class="svg-e-rule14" cx="948.3" cy="190.5" r="23.9"/>
            <circle class="svg-e-rule15" cx="538.3" cy="190.5" r="23.9"/>
            <g>
              <circle class="svg-e-rule16" cx="148" cy="190.5" r="23.9"/>
              <circle class="svg-e-rule16" cx="83.3" cy="255.1" r="23.9"/>
              <circle class="svg-e-rule16" cx="212.7" cy="255.1" r="23.9"/>
              <line class="svg-e-rule17" x1="148" y1="190.5" x2="212.7" y2="255.1"/>
              <line class="svg-e-rule17" x1="148" y1="190.5" x2="82.4" y2="256.1"/>
              <text transform="matrix(1 0 0 1 127.0623 198.4331)" class="svg-e-rule5 svg-e-rule3 svg-e-rule13">SVG</text>
            </g>
            <text transform="matrix(1 0 0 1 74.8523 50.6566)" class="svg-e-rule2 svg-e-rule3 svg-e-rule4">Faux DOM</text>
            <g class="fragment" data-fragment-index="1">
              <rect x="31.1" y="297" class="svg-e-rule18" width="234.8" height="69.5"/>
              <text transform="matrix(1 0 0 1 46.8622 340.6999)" class="svg-e-rule5 svg-e-rule3 svg-e-rule19">react-faux-dom</text>
              <polyline class="svg-e-rule20" points="265.9,336.3 458,336.3 539.1,255.2 539.1,220.1"/>
              <polygon class="svg-e-rule21" points="547.6,230.1 539.1,221.6 530.6,230.1 530.6,222.9 539.1,214.4 547.6,222.9"/>
              <line class="svg-e-rule20" x1="148.5" y1="246.1" x2="148.5" y2="290.3"/>
              <polygon class="svg-e-rule21" points="140,280.3 148.5,288.8 157,280.3 157,287.5 148.5,296 140,287.5"/>
            </g>
          </svg>
        </section>

        <!-- Slide - Código Variante Estática -->
        <section>
          <h4>Versión Estática</h4>
          <pre><code class="code-area jsx" data-trim="true" data-noescape="true">
            interface Props extends ReactFauxDomProps {
              data: any[];
            }

            class InnerChartComponent extends React.Component&lt;Props, {}&gt; {
              constructor(props) {
                super(props);
              }

              public componentDidMount() {
                // Creamos un Faux DOM para D3
                const fauxDom = this.props.connectFauxDOM("div", "chart");
                createChart(fauxDom, this.props.data);
              }

              public render() {
                return (
                  &lt;div className="container"&gt;
                    {this.props.chart}
                  &lt;/div&gt;
                );
              }
            }

            const ChartComponent = withFauxDOM(InnerChartComponent);
          </code></pre>
        </section>

        <!-- Slide - Código Variante Dinámica -->
        <section>
          <h4>Versión Dinámica</h4>
          <pre><code class="code-area jsx" data-trim="true" data-noescape="true">
            interface Props extends ReactFauxDomProps {
              data: any[];
            }

            class InnerChartComponent extends React.Component&lt;Props, {}&gt; {
              constructor(props) {
                super(props);
              }

              public componentDidMount() {
                // Creamos un Faux DOM para D3
                const fauxDom = this.props.connectFauxDOM("div", "chart");
                createChart(fauxDom, this.props.data);
              }

              public componentDidUpdate(prevProps) {
                if (prevProps.data !== this.props.data) {
                  // Obtenemos el FauxDOM
                  const fauxDom = this.props.connectFauxDOM("div", "chart");
                  updateChart(fauxDom, this.props.data);
                  this.props.animateFauxDOM(1000);
                }
              }

              public render() {
                return (
                  &lt;div className="container"&gt;
                    {this.props.chart}
                  &lt;/div&gt;
                );
              }
            }

            const ChartComponent = withFauxDOM(InnerChartComponent);
          </code></pre>
        </section>

        <!-- Slide - Ejemplo -->
        <section>
          <div class="flex row center">
            <div id="sample-faux-dom"></div>
          </div>
        </section>

        <!-- Slide - Resumen Pros & Cons -->
        <section>
          <div class="flex column center">
            <div>
              <div class="flex row top-align">
                <h4>PROS</h4>
                <ul class="no-bullet">
                  <li class="fragment"><strong class="positive">✓ </strong>Funcionalidad completa D3</li>
                  <li class="fragment"><strong class="positive">✓ </strong>Código nativo D3 y ejemplos</li>
                  <li class="fragment"><strong class="positive">✓ </strong>DOM Virtual / Reconciliación</li>
                  <li class="fragment"><strong class="positive">✓ </strong><i>Server Side Rendering</i></li>
                  <li class="fragment"><strong class="positive">✓ </strong>Transiciones</li>
                </ul>
              </div>
              <div class="flex row top-align">
                <h4>CONS</h4>
                <ul class="no-bullet">
                  <li class="fragment"><strong class="negative">✗ </strong>Nueva entidad en flujo renderizado</li>
                  <li class="fragment"><strong class="negative">✗ </strong>Rendimiento en gráficos complejos</li>
                  <li class="fragment"><strong class="negative">✗ </strong>Pseudo transiciones via muestreo</li>
                  <li class="fragment"><strong class="negative">✗ </strong>Toda la responsabilidad</li>
                  <li class="fragment"><strong class="negative">✗ </strong>¿Mantenimiento? ¿Proyecto desactualizado?</li>
                </ul>
              </div>
            </div>
          </div>
        </section>

      </section>


      <!-- |GRUPO| Despedida -->
      <section>

        <!-- Slide - Consejo -->
        <section>
          <h2>Consejo</h2>
          <ul>
            <li>Comenzad siempre por la Solución 1</li>
            <li>Id promocionando a otras soluciones o versiones a medida que lo necesitéis</li>
          </ul>
        </section>

        <!-- Slide - Enlaces -->
        <section>
          <div class="flex column center" style="font-size:1.75rem;">
            <object type="image/svg+xml" data="media/github_logo.svg" height="80" style="opacity:0.75;">Github Logo</object>
            <div class="flex column center" style="margin-left:1rem">
              <a target="_blank" href="https://github.com/fjcalzado/react_d3_trabajando_juntos/tree/master/samples">Ejemplos D3.js</a>
              <a target="_blank" href="https://github.com/fjcalzado/react_d3_trabajando_juntos">Presentación</a>
            </div>
          </div>
          <div class="flex column center" style="margin-top:3rem;">
            <object type="image/svg+xml" data="media/lemoncode_logo.svg" width="250" height="125">Lemoncode Logo</object>
            <div class="flex column center" style="font-size:1.75rem;">
              <a target="_blank" href="https://github.com/lemoncode">Repositorios Lemoncode</a>
              <ul class="flex column center no-bullet">
                <li><a target="_blank" href="https://github.com/Lemoncode/react-by-sample">react-by-sample</a></li>
                <li><a target="_blank" href="https://github.com/Lemoncode/react-typescript-samples">react-typescript-by-sample</a></li>
                <li><a target="_blank" href="https://github.com/Lemoncode/webpack-by-sample">webpack-by-sample</a></li>
                <li><a target="_blank" href="https://github.com/Lemoncode/redux-by-sample">redux-by-sample</a></li>
              </ul>
            </div>
          </div>

          <aside class="notes">
            <ul>
              <li>Todo el material que habéis visto está disponible en Github, tanto la propia presentación como los ejemplos</li>
              <li>Además os recomiendo que consultéis las guías Lemoncode donde tratamos paso a paso y con ejemplos muchas tecnologías como React, Redux, Webpack, etc. Se agradecen estrellitas :)</li>
            </ul>
          </aside>
        </section>

      </section>


    </div>
  </div>



  <!-- RECURSOS y CONFIGURACIÓN REVEAL.js -->
  <script src="lib/js/head.min.js"></script>
  <script src="js/reveal.js"></script>
  <script>
    // Detectamos si es master/client y extrae la clave (key/secret) mediante el parámetro K de la URL.
    const master = Boolean(Reveal.getQueryHash().k);
    const masterKey = master ? Reveal.getQueryHash().k : null;

    Reveal.initialize({
      width: 960,
	    height: 700,
      controls: true,
      controlsTutorial: true,
      progress: true,
      history: true, // Intersante para desarrollo. Mantiene histórico de URLs con #
      center: true,
      maxScale: 4.0,
      viewDistance: 3,  // Distancia de Lazy loading medida en slides, (contenido/recursos a cargar de las x slides por delante de la actual).
      transition: 'slide', // Opciones: none/fade/slide/convex/concave/zoom.

      multiplex: {
        secret: masterKey, // null o la clave/secreto, según sea el cliente o master el que se haya conectado.
        id: 'a45de79095c017f5', // id, obtenida del servidor socket.io.
        url: 'https://reveal-multiplex-fjcalzado.herokuapp.com/' // Ubicación de nuestro servidor socket.io.
      },

      dependencies: [
        { src: 'lib/js/socket.io.slim.js', async: true },
        { src: master ? 'plugin/multiplex/master.js' : 'plugin/multiplex/client.js', async: true }, // Añadimos el script para el multiplex que corresponda (master vs client).
        { src: 'lib/js/classList.js', condition: function () { return !document.body.classList; } },
        { src: 'plugin/markdown/marked.js', condition: function () { return !!document.querySelector('[data-markdown]'); } },
        { src: 'plugin/markdown/markdown.js', condition: function () { return !!document.querySelector('[data-markdown]'); } },
        { src: 'plugin/highlight/highlight.js', async: true, callback: function () { hljs.initHighlightingOnLoad(); } },
        { src: 'plugin/search/search.js', async: true },
        { src: 'plugin/zoom-js/zoom.js', async: true },
        { src: master ? 'plugin/notes/notes.js' : '', async: true } // Permitir notas de presentador sólo para el masterr.
      ]
    });
  </script>

  <!-- RECURSOS Para ejemplos empotrados React + D3.js -->
  <script type="text/javascript" src="samples/dist/manifest.js"></script>
  <script type="text/javascript" src="samples/dist/vendor.js"></script>
  <script type="text/javascript" src="samples/dist/reactD3Samples.js"></script>

</body>

</html>
